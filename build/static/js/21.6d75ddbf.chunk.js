(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[21],{1621:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(65),o=t(188),i=t(1),l=t.n(i),s=t(11),u=t(79),m=t(118),d=t(112),f=t(21),v=t(18),E=t(26);function p(){var e=l()(["No environment."]);return p=function(){return e},e}function k(){var e=l()(["Assigned to: {environments}"]);return k=function(){return e},e}function b(){var e=l()(["(default)"]);return b=function(){return e},e}function g(){var e=l()(["Name Z-A"]);return g=function(){return e},e}function h(){var e=l()(["Name A-Z"]);return h=function(){return e},e}function A(){var e=l()(["Oldest to newest"]);return A=function(){return e},e}function T(){var e=l()(["Newest to oldest"]);return T=function(){return e},e}function w(){var e=l()(["Access Tokens"]);return w=function(){return e},e}var C=s.a.ns("app-headless-cms/admin/environmentAliases/data-list"),y=function(){var e=Object(d.a)(),n=e.actions,t=e.list;return r.a.createElement(v.a,Object.assign({},t,{title:C(w()),sorters:[{label:C(T()),sorters:{createdOn:-1}},{label:C(A()),sorters:{createdOn:1}},{label:C(h()),sorters:{name:1}},{label:C(g()),sorters:{name:-1}}]}),(function(e){var t=e.data,a=e.isSelected,c=e.select;return r.a.createElement(v.b,{"data-testid":"default-data-list"},t.map((function(e){return r.a.createElement(v.d,{key:e.id,selected:a(e)},r.a.createElement(v.g,{onClick:function(){return c(e)}},e.name," ",e.default&&r.a.createElement(f.a,{use:"overline"},C(b())),r.a.createElement(v.i,null,e.environments.length?C(k())({environments:r.a.createElement(r.a.Fragment,null,e.environments.map((function(e){return r.a.createElement(E.b,{key:e.id,onClick:function(e){return e.stopPropagation()},to:"/settings/cms/environments?id=".concat(e.id)},e.name)})).reduce((function(e,n){return[e,", ",n]})))}):C(p()))),r.a.createElement(v.f,null,r.a.createElement(v.c,null,r.a.createElement(u.a,null,(function(t){var a=t.showConfirmation;return r.a.createElement(m.a,{onClick:function(){a((function(){return n.delete(e)}))}})})))))})))}))},x=t(39),O=t(3),$=t(17),I=t(10),N=t(35),j=t(179),S=t(69),D=t(31),F=t(20),q=t(49),L=t(581),J=t(41);function V(){var e=l()(["Save Access Token"]);return V=function(){return e},e}function Z(){var e=l()(["Description"]);return Z=function(){return e},e}function B(){var e=l()(["Name"]);return B=function(){return e},e}function H(){var e=l()(["New Access Token"]);return H=function(){return e},e}var P=s.a.ns("app-headless-cms/admin/accessTokens/form");var U=function(){var e=Object(J.a)().showSnackbar,n=Object(d.a)().form,t=Object(S.b)().environments.environments;return r.a.createElement(x.a,n,(function(a){var c=a.data,o=a.form,i=a.Bind;return r.a.createElement(D.a,{"data-testid":"pb-environmentAliases-form"},n.loading&&r.a.createElement(N.a,null),r.a.createElement(D.d,{title:c.name?c.name:P(H())}),r.a.createElement(D.b,null,r.a.createElement(O.b,null,r.a.createElement(O.a,{span:12},r.a.createElement(i,{name:"name",validators:F.validation.create("required,maxLength:100")},r.a.createElement($.a,{label:P(B())}))),r.a.createElement(O.a,{span:12},r.a.createElement(i,{name:"description"},(function(e){return r.a.createElement($.a,Object.assign({},e,{rows:4,maxLength:100,characterCount:!0,label:P(Z())}))}))),r.a.createElement(O.a,{span:12},r.a.createElement(i,{name:"token"},r.a.createElement("div",null,r.a.createElement("div",{className:"mdc-text-field-helper-text mdc-text-field-helper-text--persistent "+L.a},"Token"),c.token?r.a.createElement("div",{style:{background:"var(--mdc-theme-background)",padding:"8px",paddingLeft:"16px"}},r.a.createElement("span",{style:{lineHeight:"48px",verticalAlign:"middle"}},c.token),r.a.createElement("span",{style:{position:"absolute",right:"32px"}},r.a.createElement(I.f,{value:c.token,onCopy:function(){return e("Succesfully copied!")}}))):r.a.createElement(q.a,null,"Your Token will be shown once you save the form")))),r.a.createElement(O.a,{span:12},r.a.createElement(i,{name:"selectedEnvironmentIds",defaultValue:(c.environments||[]).map((function(e){return e.id}))},r.a.createElement(j.b,{label:"Environments",description:"Select the environments this token will be allowed to access."},(function(e){var n=e.onChange,a=e.getValue;return r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.id,c=e.name;return r.a.createElement("div",{key:"access-token-environment-".concat(t)},r.a.createElement(j.a,{label:c,value:a(t),onChange:n(t)}))})))})))))),r.a.createElement(D.c,null,r.a.createElement(I.d,{onClick:o.submit},P(V()))))}))},Y=t(159),z=t(14),G=t.n(z);function K(){var e=l()(["\n    mutation deleteAccessToken($id: ID!) {\n        cms {\n            deleteAccessToken(id: $id) {\n                data\n                error {\n                    code\n                    message\n                }\n            }\n        }\n    }\n"]);return K=function(){return e},e}function M(){var e=l()(["\n    mutation updateAccessToken($id: ID!, $data: CmsAccessTokenUpdateInput!) {\n        cms {\n            updateAccessToken(id: $id, data: $data) {\n                data {\n                    ","\n                }\n                error {\n                    code\n                    message\n                }\n            }\n        }\n    }\n"]);return M=function(){return e},e}function Q(){var e=l()(["\n    mutation createAccesstoken($data: CmsAccessTokenCreateInput!) {\n        cms {\n            createAccessToken(data: $data) {\n                data {\n                    ","\n                }\n                error {\n                    code\n                    message\n                }\n            }\n        }\n    }\n"]);return Q=function(){return e},e}function R(){var e=l()(["\n    query getAccessToken($id: ID!) {\n        cms {\n            getAccessToken(id: $id) {\n                data {\n                    ","\n                }\n            }\n        }\n    }\n"]);return R=function(){return e},e}function W(){var e=l()(["\n    {\n        cms {\n            listAccessTokens {\n                data {\n                    ","\n                }\n                error {\n                    code\n                    message\n                }\n            }\n        }\n    }\n"]);return W=function(){return e},e}var X="\n    id\n    name\n    description\n    token\n    environments {\n        id\n        name\n    }\n",_=G()(W(),X),ee=G()(R(),X),ne=G()(Q(),X),te=G()(M(),X),ae=G()(K()),re=function(e){return delete e.token,e.environments=e.selectedEnvironmentIds,delete e.selectedEnvironmentIds,{data:e}};n.default=function(){return r.a.createElement(Y.b,{delete:{mutation:ae},read:ee,create:{mutation:ne,variables:re},update:{mutation:te,variables:re},list:{query:_,variables:{sort:{savedOn:-1}}}},(function(e){var n=e.actions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.c,null,r.a.createElement(c.a,{span:4},r.a.createElement(y,null)),r.a.createElement(c.b,{span:8},r.a.createElement(U,null))),r.a.createElement(o.a,{"data-testid":"new-record-button",onClick:n.resetForm}))}))}}}]);