(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[19],{1416:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"f",(function(){return v})),n.d(t,"b",(function(){return E}));var a=n(1),r=n.n(a),c=n(14),i=n.n(c);function l(){var e=r()(["\n    mutation PbDeleteCategory($id: ID!) {\n        pageBuilder {\n            deleteCategory(id: $id) {\n                data\n                error {\n                    code\n                    message\n                }\n            }\n        }\n    }\n"]);return l=function(){return e},e}function o(){var e=r()(["\n    mutation PbUpdateCategory($id: ID!, $data: PbCategoryInput!){\n        pageBuilder {\n            category: updateCategory(id: $id, data: $data) {\n                data {\n                    ","\n                }\n                error {\n                    code\n                    message\n                    data\n                }\n            }\n        }\n    }\n"]);return o=function(){return e},e}function u(){var e=r()(["\n    mutation PbCreateCategory($data: PbCategoryInput!){\n        pageBuilder {\n            category: createCategory(data: $data) {\n                data {\n                    ","\n                }\n                error {\n                    code\n                    message\n                    data\n                }\n            }\n        }\n    }\n"]);return u=function(){return e},e}function s(){var e=r()(["\n    query PbLoadCategory($id: ID!) {\n        pageBuilder {\n            category: getCategory(id: $id){\n                data {\n                    ","\n                }\n                error {\n                    code\n                    message\n                }\n            }\n        }\n    }\n"]);return s=function(){return e},e}function d(){var e=r()(["\n    query PbListCategoriesByName {\n        pageBuilder {\n            categories: listCategories(sort: { name: 1 }, limit: 100) {\n                data {\n                    id\n                    name\n                    slug\n                    url\n                }\n            }\n        }\n    }\n"]);return d=function(){return e},e}function g(){var e=r()(["\n    query PbLoadCategories(\n        $where: JSON\n        $sort: JSON\n        $search: PbSearchInput\n        $limit: Int\n        $after: String\n        $before: String\n    ) {\n        pageBuilder {\n            categories: listCategories(\n                where: $where\n                sort: $sort\n                search: $search\n                limit: $limit\n                after: $after\n                before: $before\n            ) {\n                data {\n                    id\n                    name\n                    slug\n                    url\n                    createdOn\n                }\n                meta {\n                    cursors {\n                        next\n                        previous\n                    }\n                    hasNextPage\n                    hasPreviousPage\n                    totalCount\n                }\n            }\n        }\n    }\n"]);return g=function(){return e},e}var m="\n    id\n    name\n    slug\n    url\n    layout\n",f=i()(g()),b=i()(d()),p=i()(s(),m),h=i()(u(),m),v=i()(o(),m),E=i()(l())},1618:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),c=n(12),i=n.n(c),l=n(16),o=n.n(l),u=n(0),s=n.n(u),d=n(378),g=n(26),m=n(122),f=n(65),b=n(188),p=n(41),h=n(165),v=n(227),E=n(35),y=n(1),C=n.n(y),O=n(163),w=n.n(O),P=n(11),j=n(8),$=n(21),k=n(18);function S(){var e=C()(["Pages"]);return S=function(){return e},e}var x=P.a.namespace("Pb.PagesDataList"),B=Object(j.a)({alignItems:"flex-end !important"},"label:rightAlign;"),L=function(e){var t=Object(g.e)(),n=t.location,a=t.history,r=e.dataList,c=new URLSearchParams(n.search);return u.createElement(k.a,Object.assign({},r,{title:x(S()),sorters:[{label:"Newest to oldest",sorters:{createdOn:-1}},{label:"Oldest to newest",sorters:{createdOn:1}},{label:"Title A-Z",sorters:{title:1}},{label:"Title Z-A",sorters:{title:-1}}]}),(function(e){var t=e.data,n=void 0===t?[]:t;return u.createElement(k.b,{"data-testid":"default-data-list"},n.map((function(e){return u.createElement(k.d,{key:e.id},u.createElement(k.g,{onClick:function(){c.set("id",e.id),a.push({search:c.toString()})}},e.title,u.createElement(k.k,null,e.category.name),e.createdBy&&u.createElement(k.i,null,"Created by: ",e.createdBy.firstName||"N/A",". Last modified: ",u.createElement(w.a,{datetime:e.savedOn}),".")),u.createElement(k.f,{className:B},u.createElement($.a,{use:"subtitle2"},e.locked?"Published":"Draft"," (v",e.version,")")))})))}))},N=n(9),D=n.n(N),I=n(296),q=n(15),A=n(44),J=n(72),R=n(654),z=n(354),F=Object(q.a)("div",{target:"e1c91zhx0",label:"EmptySelect"})({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--mdc-theme-on-surface)",".select-page":{maxWidth:400,padding:"50px 100px",textAlign:"center",display:"block",borderRadius:2,backgroundColor:"var(--mdc-theme-surface)"}}),U=Object(q.a)("div",{target:"e1c91zhx1",label:"DetailsContainer"})({height:"calc(100% - 10px)",overflow:"hidden",position:"relative",nav:{backgroundColor:"var(--mdc-theme-surface)"}}),Q=function(){return s.a.createElement(F,null,s.a.createElement(A.a,{z:2,className:"select-page"},"Select a page on the left side, or click the green button to create a new one."))},T=function(e){var t=e.refreshPages,n=Object(g.e)(),a=n.history,r=n.location,c=Object(p.a)().showSnackbar,i=new URLSearchParams(r.search),l=i.get("id");return l?s.a.createElement(I.b,{query:Object(h.f)(),variables:{id:l},onCompleted:function(e){var t=D()(e,"pageBuilder.page.error.message");t&&(i.delete("id"),a.push({search:i.toString()}),c(t))}},(function(e){var n=e.data,a=e.loading,r={page:D()(n,"pageBuilder.page.data")||{},loading:a};return s.a.createElement(z.a,null,(function(e){var n=e.refresh;return s.a.createElement(U,{onScroll:n},s.a.createElement(R.c,{value:r},s.a.createElement(R.a,null,(function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("test-id",{"data-testid":"pb-page-details"},Object(J.d)("pb-page-details",{refreshPages:t,pageDetails:e,loading:a})))}))))}))})):s.a.createElement(Q,null)},W=n(40),Z=n(10),_=n(1416),G=Object(j.a)({".mdc-dialog__surface":{width:400,minWidth:400}},"label:narrowDialog;"),H=function(e){var t=e.open,n=e.onClose,a=e.onSelect,r=e.children,c=Object(g.e)().history;return s.a.createElement(W.a,{open:t,onClose:n,className:G,"data-testid":"pb-new-page-category-modal"},r,s.a.createElement(W.g,null,"Select a category"),s.a.createElement(W.f,null,s.a.createElement(k.b,{twoLine:!0},s.a.createElement(I.b,{query:_.d},(function(e){var t=e.data;return e.loading?s.a.createElement("span",null,"Loading categories..."):s.a.createElement(s.a.Fragment,null,t.pageBuilder.categories.data.map((function(e){return s.a.createElement(k.d,{key:e.id,onClick:function(){return a(e)}},s.a.createElement(k.g,null,s.a.createElement(k.h,null,e.name),s.a.createElement(k.i,null,e.url)))})))})))),s.a.createElement(W.c,null,s.a.createElement(Z.a,{onClick:function(){return c.push("/page-builder/categories")}},"+ Create new category")))};t.default=function(e){var t=Object(u.useState)(!1),n=o()(t,2),a=n[0],c=n[1],l=Object(u.useState)(!1),y=o()(l,2),C=y[0],O=y[1],w=Object(d.a)(),P=Object(p.a)().showSnackbar,j=Object(g.e)().history,$=Object(v.a)({query:h.h,variables:{sort:{savedOn:-1}}}),k=Object(u.useCallback)((function(){return O(!0)}),[]),S=Object(u.useCallback)((function(){return O(!1)}),[]),x=Object(m.a)(e,(function(){return function(){var e=i()(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,w.mutate({mutation:h.b,variables:{category:t},refetchQueries:["PbListPages"],awaitRefetchQueries:!0});case 4:n=e.sent,c(!1),S(),a=n.data.pageBuilder.page.data,j.push("/page-builder/editor/".concat(a.id)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),P(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()})),B=Object(u.useCallback)((function(e){x(e.id)}),[]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(H,{open:C,onClose:S,onSelect:B},a&&s.a.createElement(E.a,{label:"Creating page..."})),s.a.createElement(f.c,null,s.a.createElement(f.a,{span:4},s.a.createElement(L,{dataList:$})),s.a.createElement(f.b,{span:8},s.a.createElement(T,{refreshPages:$.refresh}))),s.a.createElement(b.a,{"data-testid":"new-record-button",onClick:k}))}}}]);