{"version":3,"sources":["../../../../../src/plugins/Menu/Navigation/components/useNavigation.ts"],"names":["useUi","default","localStorage","set","LOCAL_STORAGE_KEY","modifyExpandedSections","expandedSections","names","action","returnNames","forEach","id","includes","push","splice","indexOf","expandAppsMenuSection","Array","isArray","ui","hook","showMenu","setState","hideMenu","menuIsShown","expandSection","name","sections","join","collapseSection","toggleSection","sectionIsExpanded","initSections","get","split"],"mappings":"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","sourcesContent":["import { useUi } from \"@webiny/app/hooks/useUi\";\nimport { default as localStorage } from \"store\";\nimport { get } from \"lodash\";\nimport { set } from \"dot-prop-immutable\";\n\nconst LOCAL_STORAGE_KEY = \"webiny_apps_menu_sections\";\n\nconst modifyExpandedSections = (\n    expandedSections: Array<string>,\n    names: Array<string>,\n    action: string\n) => {\n    const returnNames = [...expandedSections];\n    names.forEach(id => {\n        if (action === \"expand\") {\n            !returnNames.includes(id) && returnNames.push(id);\n        } else {\n            returnNames.includes(id) && returnNames.splice(returnNames.indexOf(id), 1);\n        }\n    });\n\n    return returnNames;\n};\n\nconst expandAppsMenuSection = (names, expandedSections) => {\n    if (!Array.isArray(names)) {\n        names = [names];\n    }\n\n    return modifyExpandedSections(expandedSections, names, \"expand\");\n};\n\nexport default () => {\n    const ui = useUi();\n\n    const hook = {\n        showMenu: () => {\n            ui.setState(ui => set(ui, \"appsMenu.show\", true));\n        },\n        hideMenu: () => {\n            ui.setState(ui => set(ui, \"appsMenu.show\", false));\n        },\n        menuIsShown(): boolean {\n            return get(ui, \"appsMenu.show\", false);\n        },\n        expandSection(name: string) {\n            let sections = get(ui, \"appsMenu.expandedSections\", []);\n            sections = modifyExpandedSections(sections, [name], \"expand\");\n            localStorage.set(LOCAL_STORAGE_KEY, sections.join(\",\"));\n            ui.setState(ui => set(ui, \"appsMenu.expandedSections\", sections));\n        },\n        collapseSection(name: string) {\n            let sections = get(ui, \"appsMenu.expandedSections\", []);\n            sections = modifyExpandedSections(sections, [name], \"collapse\");\n            localStorage.set(LOCAL_STORAGE_KEY, sections.join(\",\"));\n            ui.setState(ui => set(ui, \"appsMenu.expandedSections\", sections));\n        },\n        toggleSection(name: string) {\n            if (hook.sectionIsExpanded(name)) {\n                return hook.collapseSection(name);\n            }\n            return hook.expandSection(name);\n        },\n        sectionIsExpanded(name: string) {\n            return get(ui, \"appsMenu.expandedSections\", []).includes(name);\n        },\n        initSections: () => {\n            if (!localStorage.get(LOCAL_STORAGE_KEY)) {\n                return;\n            }\n\n            const sections = expandAppsMenuSection(\n                localStorage.get(LOCAL_STORAGE_KEY).split(\",\"),\n                get(ui, \"appsMenu.expandedSections\", [])\n            );\n\n            localStorage.set(LOCAL_STORAGE_KEY, sections.join(\",\"));\n            ui.setState(ui => set(ui, \"appsMenu.expandedSections\", sections));\n        }\n    };\n\n    return hook;\n};\n"],"file":"useNavigation.js"}