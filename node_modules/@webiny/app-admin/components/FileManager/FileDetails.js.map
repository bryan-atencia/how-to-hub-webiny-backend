{"version":3,"sources":["../../../src/components/FileManager/FileDetails.tsx"],"names":["React","bytes","css","Drawer","DrawerContent","IconButton","getFileTypePlugin","get","Tags","Name","Tooltip","useHotkeys","TimeAgo","useFileManager","useMutation","useSnackbar","ConfirmationDialog","DELETE_FILE","i18n","t","ns","style","wrapper","padding","height","overflow","header","fontSize","textAlign","fontWeight","color","preview","backgroundColor","position","width","margin","img","maxHeight","maxWidth","top","left","transform","download","list","li","lineHeight","display","whiteSpace","textOverflow","FileDetails","props","file","uploadFile","validateFiles","filePlugin","actions","hideFileDetails","zIndex","disabled","keys","esc","refetchQueries","deleteFile","showSnackbar","fileDeleteConfirmationProps","title","message","name","render","window","open","src","map","Component","index","showConfirmation","variables","id","format","size","type","createdOn"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React from \"react\";\nimport bytes from \"bytes\";\nimport { css } from \"emotion\";\nimport { Drawer, DrawerContent } from \"@webiny/ui/Drawer\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport getFileTypePlugin from \"./getFileTypePlugin\";\nimport get from \"lodash.get\";\nimport Tags from \"./FileDetails/Tags\";\nimport Name from \"./FileDetails/Name\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { useHotkeys } from \"react-hotkeyz\";\nimport { ReactComponent as DownloadIcon } from \"./icons/round-cloud_download-24px.svg\";\nimport { ReactComponent as DeleteIcon } from \"./icons/delete.svg\";\nimport TimeAgo from \"timeago-react\";\nimport { useFileManager } from \"./FileManagerContext\";\nimport { useMutation } from \"react-apollo\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nimport { ConfirmationDialog } from \"@webiny/ui/ConfirmationDialog\";\nimport { DELETE_FILE } from \"./graphql\";\nimport { i18n } from \"@webiny/app/i18n\";\nconst t = i18n.ns(\"app-admin/file-manager/file-details\");\n\ndeclare global {\n    // eslint-disable-next-line\n    namespace JSX {\n        interface IntrinsicElements {\n            \"li-title\": {\n                children?: React.ReactNode;\n            };\n\n            \"li-content\": {\n                children?: React.ReactNode;\n            };\n        }\n    }\n}\n\nconst style: any = {\n    wrapper: css({\n        padding: 10,\n        height: \"100%\",\n        overflow: \"auto\"\n    }),\n    header: css({\n        fontSize: 18,\n        textAlign: \"center\",\n        padding: 10,\n        fontWeight: 600,\n        color: \"var(--mdc-theme-on-surface)\"\n    }),\n    preview: css({\n        backgroundColor: \"var(--mdc-theme-background)\",\n        padding: 10,\n        position: \"relative\",\n        width: 200,\n        height: 200,\n        margin: \"0 auto\",\n        img: {\n            maxHeight: 200,\n            maxWidth: 200,\n            width: \"auto\",\n            position: \"absolute\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: \"translateX(-50%) translateY(-50%)\",\n            backgroundColor: \"#fff\"\n        }\n    }),\n    download: css({\n        textAlign: \"center\",\n        margin: \"0 auto\",\n        width: \"100%\"\n    }),\n    list: css({\n        textAlign: \"left\",\n        color: \"var(--mdc-theme-on-surface)\",\n        li: {\n            padding: 10,\n            lineHeight: \"22px\",\n            \"li-title\": {\n                fontWeight: 600,\n                display: \"block\"\n            },\n            \"li-content\": {\n                whiteSpace: \"nowrap\",\n                overflow: \"hidden\",\n                textOverflow: \"ellipsis\",\n                width: \"100%\",\n                display: \"block\"\n            }\n        }\n    })\n};\n\nexport default function FileDetails(props) {\n    const { file, uploadFile, validateFiles } = props;\n    const filePlugin = getFileTypePlugin(file);\n    const actions = get(filePlugin, \"fileDetails.actions\") || [];\n\n    const { hideFileDetails } = useFileManager();\n\n    useHotkeys({\n        zIndex: 55,\n        disabled: !file,\n        keys: {\n            esc: hideFileDetails\n        }\n    });\n\n    const [deleteFile] = useMutation(DELETE_FILE, { refetchQueries: [\"ListFiles\"] });\n    const { showSnackbar } = useSnackbar();\n\n    const fileDeleteConfirmationProps = {\n        title: t`Delete file`,\n        message: file && (\n            <span>\n                {t`You're about to delete file {name}. Are you sure you want to continue?`({\n                    name: file.name\n                })}\n            </span>\n        )\n    };\n\n    return (\n        <Drawer dir=\"rtl\" modal open={file} onClose={hideFileDetails}>\n            {file && (\n                <div className={style.wrapper} dir=\"ltr\">\n                    <div className={style.header}>File details</div>\n                    <div className={style.preview}>\n                        {filePlugin.render({ file, uploadFile, validateFiles })}\n                    </div>\n                    <div className={style.download}>\n                        <>\n                            <Tooltip content={<span>{t`Download file`}</span>} placement={\"bottom\"}>\n                                <IconButton\n                                    onClick={() => window.open(file.src, \"_blank\")}\n                                    icon={<DownloadIcon style={{ margin: \"0 8px 0 0\" }} />}\n                                />\n                            </Tooltip>\n\n                            {actions.map((Component, index) => (\n                                <Component key={index} {...props} />\n                            ))}\n\n                            <ConfirmationDialog {...fileDeleteConfirmationProps}>\n                                {({ showConfirmation }) => {\n                                    return (\n                                        <Tooltip\n                                            content={<span>{t`Delete image`}</span>}\n                                            placement={\"bottom\"}\n                                        >\n                                            <IconButton\n                                                icon={\n                                                    <DeleteIcon style={{ margin: \"0 8px 0 0\" }} />\n                                                }\n                                                onClick={() =>\n                                                    showConfirmation(async () => {\n                                                        await deleteFile({\n                                                            variables: {\n                                                                id: file.id\n                                                            }\n                                                        });\n                                                        showSnackbar(t`File deleted successfully.`);\n                                                    })\n                                                }\n                                            />\n                                        </Tooltip>\n                                    );\n                                }}\n                            </ConfirmationDialog>\n                        </>\n                    </div>\n                    <DrawerContent dir=\"ltr\">\n                        <ul className={style.list}>\n                            <li>\n                                <li-title>{t`Name:`}</li-title>\n                                <Name {...props} />\n                            </li>\n                            <li>\n                                <li-title>{t`Size:`}</li-title>\n                                <li-content>{bytes.format(file.size)}</li-content>\n                            </li>\n                            <li>\n                                <li-title>{t`Type:`}</li-title>\n                                <li-content>{file.type}</li-content>\n                            </li>\n                            <li>\n                                <li-title>{t`Tags:`}</li-title>\n                                <Tags {...props} />\n                            </li>\n                            <li>\n                                <li-title>{t`Created:`}</li-title>\n                                <li-content>\n                                    <TimeAgo datetime={file.createdOn} />\n                                </li-content>\n                            </li>\n                        </ul>\n                    </DrawerContent>\n                </div>\n            )}\n        </Drawer>\n    );\n}\n"],"file":"FileDetails.js"}