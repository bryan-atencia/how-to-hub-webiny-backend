{"version":3,"sources":["../../../../../src/admin/plugins/settings/components/FormsSettings.tsx"],"names":["React","Query","Mutation","Form","Grid","Cell","ButtonPrimary","Input","Switch","useSnackbar","CircularProgress","graphql","SimpleForm","SimpleFormFooter","SimpleFormContent","SimpleFormHeader","FormsSettings","showSnackbar","query","data","queryInProgress","loading","settings","mutation","update","mutationInProgress","variables","Bind","form","formData","reCaptchaEnabled","submit"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { get } from \"lodash\";\nimport { Query, Mutation } from \"react-apollo\";\nimport { Form } from \"@webiny/form\";\nimport { Grid, Cell } from \"@webiny/ui/Grid\";\nimport { ButtonPrimary } from \"@webiny/ui/Button\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { Switch } from \"@webiny/ui/Switch\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nimport { CircularProgress } from \"@webiny/ui/Progress\";\nimport graphql from \"./graphql\";\n\nimport {\n    SimpleForm,\n    SimpleFormFooter,\n    SimpleFormContent,\n    SimpleFormHeader\n} from \"@webiny/app-admin/components/SimpleForm\";\n\nconst FormsSettings = () => {\n    const { showSnackbar } = useSnackbar();\n    return (\n        <Query query={graphql.query}>\n            {({ data, loading: queryInProgress }) => {\n                const settings = get(data, \"forms.getSettings.data\") || {};\n\n                return (\n                    <Mutation mutation={graphql.mutation}>\n                        {(update, { loading: mutationInProgress }) => (\n                            <Form\n                                data={settings}\n                                onSubmit={async data => {\n                                    await update({\n                                        variables: {\n                                            data\n                                        }\n                                    });\n\n                                    showSnackbar(\"Settings updated successfully.\");\n                                }}\n                            >\n                                {({ Bind, form, data: formData }) => {\n                                    const reCaptchaEnabled = get(formData, \"reCaptcha.enabled\");\n\n                                    return (\n                                        <SimpleForm>\n                                            {(queryInProgress || mutationInProgress) && (\n                                                <CircularProgress />\n                                            )}\n                                            <SimpleFormHeader title=\"reCAPTCHA settings\" />\n                                            <SimpleFormContent>\n                                                <Grid>\n                                                    <Cell span={12}>\n                                                        <Bind name={\"domain\"}>\n                                                            <Input\n                                                                label=\"Domain\"\n                                                                description={\n                                                                    \"E.g. https://www.mysite.com\"\n                                                                }\n                                                            />\n                                                        </Bind>\n                                                    </Cell>\n\n                                                    <Cell span={12}>\n                                                        <Bind name={\"reCaptcha.enabled\"}>\n                                                            <Switch\n                                                                label={\"Enable Google reCAPTCHA\"}\n                                                            />\n                                                        </Bind>\n                                                    </Cell>\n                                                    <Cell span={12}>\n                                                        <Bind name={\"reCaptcha.siteKey\"}>\n                                                            <Input\n                                                                disabled={!reCaptchaEnabled}\n                                                                label={\"Google reCAPTCHA site key\"}\n                                                                description={\n                                                                    <>\n                                                                        A v2 Tickbox site key.{\" \"}\n                                                                        <a\n                                                                            href=\"https://www.google.com/recaptcha/admin\"\n                                                                            target={\"_blank\"}\n                                                                            rel=\"noopener noreferrer\"\n                                                                        >\n                                                                            Don&apos;t have a site\n                                                                            key?\n                                                                        </a>\n                                                                    </>\n                                                                }\n                                                            />\n                                                        </Bind>\n                                                    </Cell>\n\n                                                    <Cell span={12}>\n                                                        <Bind name={\"reCaptcha.secretKey\"}>\n                                                            <Input\n                                                                disabled={!reCaptchaEnabled}\n                                                                label={\n                                                                    \"Google reCAPTCHA secret key\"\n                                                                }\n                                                                description={\n                                                                    <>\n                                                                        A v2 Tickbox secret key.{\" \"}\n                                                                        <a\n                                                                            href=\"https://www.google.com/recaptcha/admin\"\n                                                                            target={\"_blank\"}\n                                                                            rel=\"noopener noreferrer\"\n                                                                        >\n                                                                            Don&apos;t have a site\n                                                                            key?\n                                                                        </a>\n                                                                    </>\n                                                                }\n                                                            />\n                                                        </Bind>\n                                                    </Cell>\n                                                </Grid>\n                                            </SimpleFormContent>\n                                            <SimpleFormFooter>\n                                                <ButtonPrimary onClick={form.submit}>\n                                                    Save\n                                                </ButtonPrimary>\n                                            </SimpleFormFooter>\n                                        </SimpleForm>\n                                    );\n                                }}\n                            </Form>\n                        )}\n                    </Mutation>\n                );\n            }}\n        </Query>\n    );\n};\n\nexport default FormsSettings;\n"],"file":"FormsSettings.js"}