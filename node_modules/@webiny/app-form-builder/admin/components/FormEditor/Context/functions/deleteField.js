export default (function (_ref) {
  var field = _ref.field,
      data = _ref.data;
  // Remove the field from fields list...
  var fieldIndex = data.fields.findIndex(function (item) {
    return item._id === field._id;
  });
  data.fields.splice(fieldIndex, 1);

  for (var i = 0; i < data.fields.length; i++) {
    if (data.fields[i]._id === field._id) {
      data.fields[i] = field;
      break;
    }
  } // ...and rebuild the layout object.


  var layout = [];
  var currentRowIndex = 0;
  data.layout.forEach(function (row) {
    row.forEach(function (fieldId) {
      var field = data.fields.find(function (item) {
        return item._id === fieldId;
      });

      if (!field) {
        return true;
      }

      if (!Array.isArray(layout[currentRowIndex])) {
        layout[currentRowIndex] = [];
      }

      layout[currentRowIndex].push(fieldId);
    });
    layout[currentRowIndex] && layout[currentRowIndex].length && currentRowIndex++;
  });
  data.layout = layout;
  return data;
});
//# sourceMappingURL=deleteField.js.map