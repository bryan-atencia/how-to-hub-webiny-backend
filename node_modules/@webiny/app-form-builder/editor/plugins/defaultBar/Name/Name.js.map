{"version":3,"sources":["../../../../../src/editor/plugins/defaultBar/Name/Name.tsx"],"names":["React","useState","Input","Tooltip","Typography","useFormEditor","useHotkeys","FormMeta","FormName","formNameWrapper","FormVersion","NameInputWrapper","NameWrapper","i18n","t","namespace","Name","state","setData","localName","setLocalName","editingEnabled","setEditing","cancelChanges","startEditing","data","name","zIndex","keys","disabled","esc","e","preventDefault","enter","autoFocus","window","Cypress","published","width","display","version"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { useFormEditor } from \"@webiny/app-form-builder/admin/components/FormEditor/Context\";\nimport { useHotkeys } from \"react-hotkeyz\";\nimport {\n    FormMeta,\n    FormName,\n    formNameWrapper,\n    FormVersion,\n    NameInputWrapper,\n    NameWrapper\n} from \"./NameStyled\";\nimport { i18n } from \"@webiny/app/i18n\";\nconst t = i18n.namespace(\"FormEditor.Name\");\n\ndeclare global {\n    interface Window {\n        Cypress: any;\n    }\n}\n\nexport const Name = () => {\n    const { state, setData } = useFormEditor();\n    const [localName, setLocalName] = useState(null);\n    const [editingEnabled, setEditing] = useState(false);\n\n    function cancelChanges() {\n        setEditing(false);\n    }\n\n    function startEditing() {\n        setLocalName(state.data.name);\n        setEditing(true);\n    }\n\n    useHotkeys({\n        zIndex: 100,\n        keys: {\n            \"alt+cmd+enter\": startEditing\n        }\n    });\n\n    useHotkeys({\n        zIndex: 101,\n        disabled: !editingEnabled,\n        keys: {\n            esc: e => {\n                e.preventDefault();\n                cancelChanges();\n            },\n            enter: e => {\n                e.preventDefault();\n                setData(data => {\n                    data.name = localName;\n                    return data;\n                });\n                setEditing(false);\n            }\n        }\n    });\n\n    // Disable autoFocus because for some reason, blur event would automatically be triggered when clicking\n    // on the page title when doing Cypress testing. Not sure if this is RMWC or Cypress related issue.\n    const autoFocus = !window.Cypress;\n\n    return editingEnabled ? (\n        <NameInputWrapper>\n            <Input\n                autoFocus={autoFocus}\n                fullwidth\n                value={localName}\n                onChange={setLocalName}\n                onBlur={cancelChanges}\n            />\n        </NameInputWrapper>\n    ) : (\n        <NameWrapper>\n            <FormMeta>\n                <Typography use={\"overline\"}>\n                    {`status: ${state.data.published ? t`published` : t`draft`}`}\n                </Typography>\n            </FormMeta>\n            <div style={{ width: \"100%\", display: \"flex\" }}>\n                <Tooltip\n                    className={formNameWrapper}\n                    placement={\"bottom\"}\n                    content={<span>{t`rename`}</span>}\n                >\n                    <FormName data-testid=\"fb-editor-form-title\" onClick={startEditing}>\n                        {state.data.name}\n                    </FormName>\n                </Tooltip>\n                <FormVersion>{`(v${state.data.version})`}</FormVersion>\n            </div>\n        </NameWrapper>\n    );\n};\n"],"file":"Name.js"}