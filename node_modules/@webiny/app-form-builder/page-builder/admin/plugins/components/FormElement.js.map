{"version":3,"sources":["../../../../../src/page-builder/admin/plugins/components/FormElement.tsx"],"names":["React","ElementRoot","Form","FormsForm","styled","connect","getActiveElementId","Overlay","background","position","width","height","zIndex","opacity","FormElement","props","element","isActive","render","form","revision","preview","parentId","undefined","revisionId","parent","state","id"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,WAAT,QAA4B,wDAA5B;AAEA,SAASC,IAAI,IAAIC,SAAjB,QAAkC,0CAAlC;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,2CAAnC;AAGA,IAAMC,OAAO,gBAAGH,MAAH,CAAU,KAAV;AAAA;AAAA;AAAA,GAAiB;AAC1BI,EAAAA,UAAU,EAAE,OADc;AAE1BC,EAAAA,QAAQ,EAAE,UAFgB;AAG1BC,EAAAA,KAAK,EAAE,MAHmB;AAI1BC,EAAAA,MAAM,EAAE,MAJkB;AAK1BC,EAAAA,MAAM,EAAE,EALkB;AAM1BC,EAAAA,OAAO,EAAE;AANiB,CAAjB,CAAb;;AAcA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAA6B;AAAA,MACrCC,OADqC,GACfD,KADe,CACrCC,OADqC;AAAA,MAC5BC,QAD4B,GACfF,KADe,CAC5BE,QAD4B;AAE7C,MAAIC,MAAM,gBAAG,uDAAb;AAEA,MAAMC,IAAI,GAAG,KAAIH,OAAJ,EAAa,oBAAb,KAAsC,EAAnD;;AAEA,MAAIG,IAAI,CAACC,QAAT,EAAmB;AACf,QAAML,MAAK,GAAG;AACVM,MAAAA,OAAO,EAAE,IADC;AAEVC,MAAAA,QAAQ,EAAEC,SAFA;AAGVC,MAAAA,UAAU,EAAED;AAHF,KAAd;;AAMA,QAAIJ,IAAI,CAACC,QAAL,KAAkB,QAAtB,EAAgC;AAC5BL,MAAAA,MAAK,CAACO,QAAN,GAAiBH,IAAI,CAACM,MAAtB;AACH,KAFD,MAEO;AACHV,MAAAA,MAAK,CAACS,UAAN,GAAmBL,IAAI,CAACC,QAAxB;AACH;;AAEDF,IAAAA,MAAM,gBAAG,oBAAC,SAAD,EAAeH,MAAf,CAAT;AACH;;AAED,sBACI,0CACKE,QAAQ,iBAAI,oBAAC,OAAD,OADjB,eAEI,oBAAC,WAAD;AACI,IAAA,GAAG,iBAAUE,IAAI,CAACM,MAAf,cAAyBN,IAAI,CAACC,QAA9B,CADP;AAEI,IAAA,OAAO,EAAEJ,OAFb;AAGI,IAAA,SAAS,EAAE;AAHf,KAKKE,MALL,CAFJ,CADJ;AAYH,CAlCD;;AAoCA,eAAeb,OAAO,CAAC,UAACqB,KAAD,EAAQX,KAAR,EAAuB;AAC1C,SAAO;AACHE,IAAAA,QAAQ,EAAEX,kBAAkB,CAACoB,KAAD,CAAlB,KAA8BX,KAAK,CAACC,OAAN,CAAcW;AADnD,GAAP;AAGH,CAJqB,CAAP,CAIZb,WAJY,CAAf","sourcesContent":["import * as React from \"react\";\nimport { ElementRoot } from \"@webiny/app-page-builder/render/components/ElementRoot\";\nimport { get } from \"lodash\";\nimport { Form as FormsForm } from \"@webiny/app-form-builder/components/Form\";\nimport styled from \"@emotion/styled\";\nimport { connect } from \"react-redux\";\nimport { getActiveElementId } from \"@webiny/app-page-builder/editor/selectors\";\nimport { PbElement } from \"@webiny/app-page-builder/types\";\n\nconst Overlay = styled(\"div\")({\n    background: \"black\",\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: 10,\n    opacity: 0.25\n});\n\nexport type FormElementProps = {\n    isActive: boolean;\n    element: PbElement;\n};\n\nconst FormElement = (props: FormElementProps) => {\n    const { element, isActive } = props;\n    let render = <span>Form not selected.</span>;\n\n    const form = get(element, \"data.settings.form\") || {};\n\n    if (form.revision) {\n        const props = {\n            preview: true,\n            parentId: undefined,\n            revisionId: undefined\n        };\n\n        if (form.revision === \"latest\") {\n            props.parentId = form.parent;\n        } else {\n            props.revisionId = form.revision;\n        }\n\n        render = <FormsForm {...props} />;\n    }\n\n    return (\n        <>\n            {isActive && <Overlay />}\n            <ElementRoot\n                key={`form-${form.parent}-${form.revision}`}\n                element={element}\n                className={\"webiny-pb-element-form\"}\n            >\n                {render}\n            </ElementRoot>\n        </>\n    );\n};\n\nexport default connect((state, props: any) => {\n    return {\n        isActive: getActiveElementId(state) === props.element.id\n    };\n})(FormElement);\n"],"file":"FormElement.js"}