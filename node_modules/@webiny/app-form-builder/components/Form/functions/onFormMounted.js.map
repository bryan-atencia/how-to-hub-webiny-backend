{"version":3,"sources":["../../../../src/components/Form/functions/onFormMounted.ts"],"names":["SAVE_FORM_VIEW","saveFormView","data","client","window","id","mutate","mutation","variables","props","preview"],"mappings":";;AAEA,SAASA,cAAT,QAA+B,WAA/B;;AAGA;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAG6C;AAAA,MAF9DC,IAE8D,QAF9DA,IAE8D;AAAA,MAD9DC,MAC8D,QAD9DA,MAC8D;;AAC9D;AACA,MAAI,CAACC,MAAD,IAAW,CAACF,IAAhB,EAAsB;AAClB;AACH;;AAED,MAAI,KAAIE,MAAJ,EAAY,4BAA4BF,IAAI,CAACG,EAA7C,CAAJ,EAAsD;AAClD;AACH;;AAED,OAAID,MAAJ,EAAY,4BAA4BF,IAAI,CAACG,EAA7C,EAAiD,CAAjD;;AACAF,EAAAA,MAAM,CAACG,MAAP,CAAc;AACVC,IAAAA,QAAQ,EAAEP,cADA;AAEVQ,IAAAA,SAAS,EAAE;AACPH,MAAAA,EAAE,EAAEH,IAAI,CAACG;AADF;AAFD,GAAd;AAMH,CApBD;;AAsBA,gBAAe,UAACI,KAAD,EAAuE;AAAA,MAC1EP,IAD0E,GACxDO,KADwD,CAC1EP,IAD0E;AAAA,MACpEQ,OADoE,GACxDD,KADwD,CACpEC,OADoE;;AAElF,MAAI,CAACR,IAAD,IAASQ,OAAb,EAAsB;AAClB;AACH;;AAEDT,EAAAA,YAAY,CAACQ,KAAD,CAAZ;AACH,CAPD","sourcesContent":["import { get, set } from \"lodash\";\nimport { FbFormRenderComponentProps } from \"@webiny/app-form-builder/types\";\nimport { SAVE_FORM_VIEW } from \"./graphql\";\nimport { ApolloClient } from \"apollo-client\";\n\n// TODO: `client` is not part of FbFormRenderComponentProps but is injected by `FormRender`\n\nconst saveFormView = ({\n    data,\n    client\n}: FbFormRenderComponentProps & { client: ApolloClient<any> }) => {\n    // SSR?\n    if (!window || !data) {\n        return;\n    }\n\n    if (get(window, \"localStorage.form_view_\" + data.id)) {\n        return;\n    }\n\n    set(window, \"localStorage.form_view_\" + data.id, 1);\n    client.mutate({\n        mutation: SAVE_FORM_VIEW,\n        variables: {\n            id: data.id\n        }\n    });\n};\n\nexport default (props: FbFormRenderComponentProps & { client: ApolloClient<any> }) => {\n    const { data, preview } = props;\n    if (!data || preview) {\n        return;\n    }\n\n    saveFormView(props);\n};\n"],"file":"onFormMounted.js"}