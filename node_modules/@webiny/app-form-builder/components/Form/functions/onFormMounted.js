import _set from "lodash/set";
import _get from "lodash/get";
import { SAVE_FORM_VIEW } from "./graphql";

// TODO: `client` is not part of FbFormRenderComponentProps but is injected by `FormRender`
var saveFormView = function saveFormView(_ref) {
  var data = _ref.data,
      client = _ref.client;

  // SSR?
  if (!window || !data) {
    return;
  }

  if (_get(window, "localStorage.form_view_" + data.id)) {
    return;
  }

  _set(window, "localStorage.form_view_" + data.id, 1);

  client.mutate({
    mutation: SAVE_FORM_VIEW,
    variables: {
      id: data.id
    }
  });
};

export default (function (props) {
  var data = props.data,
      preview = props.preview;

  if (!data || preview) {
    return;
  }

  saveFormView(props);
});
//# sourceMappingURL=onFormMounted.js.map