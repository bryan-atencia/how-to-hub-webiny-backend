{"version":3,"sources":["../../../src/admin/components/MailchimpSettings.tsx"],"names":["React","Form","Grid","Cell","Switch","Input","ButtonPrimary","Query","Mutation","useSnackbar","CircularProgress","graphql","SimpleForm","SimpleFormFooter","SimpleFormContent","SimpleFormHeader","MailchimpSettings","showSnackbar","query","data","queryInProgress","loading","settings","mutation","update","mutationInProgress","variables","response","error","Bind","form","enabled","submit"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { get } from \"lodash\";\nimport { Form } from \"@webiny/form\";\nimport { Grid, Cell } from \"@webiny/ui/Grid\";\nimport { Switch } from \"@webiny/ui/Switch\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { ButtonPrimary } from \"@webiny/ui/Button\";\nimport { Query, Mutation } from \"react-apollo\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nimport { CircularProgress } from \"@webiny/ui/Progress\";\nimport graphql from \"./graphql\";\n\nimport {\n    SimpleForm,\n    SimpleFormFooter,\n    SimpleFormContent,\n    SimpleFormHeader\n} from \"@webiny/app-admin/components/SimpleForm\";\n\nconst MailchimpSettings = () => {\n    const { showSnackbar } = useSnackbar();\n\n    return (\n        <Query query={graphql.query}>\n            {({ data, loading: queryInProgress }) => {\n                const settings = get(data, \"mailchimp.getSettings.data\") || {};\n                return (\n                    <Mutation mutation={graphql.mutation}>\n                        {(update, { loading: mutationInProgress }) => (\n                            <Form\n                                data={settings}\n                                onSubmit={async data => {\n                                    const response = await update({\n                                        variables: {\n                                            data\n                                        }\n                                    });\n\n                                    const error = get(\n                                        response,\n                                        \"data.mailchimp.updateSettings.error.message\"\n                                    );\n\n                                    if (error) {\n                                        return showSnackbar(error);\n                                    }\n                                    showSnackbar(\"Settings updated successfully.\");\n                                }}\n                            >\n                                {({ Bind, form, data }) => (\n                                    <SimpleForm>\n                                        {(queryInProgress || mutationInProgress) && (\n                                            <CircularProgress />\n                                        )}\n                                        <SimpleFormHeader title=\"Mailchimp Settings\">\n                                            <Bind\n                                                name={\"enabled\"}\n                                                afterChange={enabled => {\n                                                    if (!enabled) {\n                                                        form.submit();\n                                                    }\n                                                }}\n                                            >\n                                                <Switch label=\"Enabled\" />\n                                            </Bind>\n                                        </SimpleFormHeader>\n                                        {data.enabled ? (\n                                            <>\n                                                <SimpleFormContent>\n                                                    <Grid>\n                                                        <Cell span={12}>\n                                                            <Grid>\n                                                                <Cell span={6}>\n                                                                    <Bind name={\"apiKey\"}>\n                                                                        <Input\n                                                                            label=\"API key\"\n                                                                            description={\n                                                                                <>\n                                                                                    Click{\" \"}\n                                                                                    <a\n                                                                                        /* eslint-disable-next-line react/jsx-no-target-blank */\n                                                                                        target={\n                                                                                            \"_blank\"\n                                                                                        }\n                                                                                        href=\"https://mailchimp.com/help/about-api-keys/\"\n                                                                                    >\n                                                                                        here\n                                                                                    </a>{\" \"}\n                                                                                    for more\n                                                                                    information\n                                                                                    about Mailchimp\n                                                                                    API keys.\n                                                                                </>\n                                                                            }\n                                                                        />\n                                                                    </Bind>\n                                                                </Cell>\n                                                            </Grid>\n                                                        </Cell>\n                                                    </Grid>\n                                                </SimpleFormContent>\n                                                <SimpleFormFooter>\n                                                    <ButtonPrimary onClick={form.submit}>\n                                                        Save\n                                                    </ButtonPrimary>\n                                                </SimpleFormFooter>\n                                            </>\n                                        ) : null}\n                                    </SimpleForm>\n                                )}\n                            </Form>\n                        )}\n                    </Mutation>\n                );\n            }}\n        </Query>\n    );\n};\n\nexport default MailchimpSettings;\n"],"file":"MailchimpSettings.js"}