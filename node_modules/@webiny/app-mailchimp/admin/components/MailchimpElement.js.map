{"version":3,"sources":["../../../src/admin/components/MailchimpElement.tsx"],"names":["React","ElementRoot","Form","getPlugins","MailchimpElement","memo","element","selected","component","find","cmp","componentName","render","Component","name","form","onSuccess","validate","submit","displayName"],"mappings":";;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,WAAT,QAA4B,wDAA5B;AACA,SAASC,IAAT,QAAqB,cAArB;AAEA,SAASC,UAAT,QAA2B,iBAA3B;AAGA,IAAMC,gBAAgB,gBAAGJ,KAAK,CAACK,IAAN,CAAW,gBAAsB;AAAA,MAAnBC,OAAmB,QAAnBA,OAAmB;;AACtD,MAAMC,QAAQ,GAAG,KAAID,OAAJ,EAAa,yBAAb,EAAwC,KAAIA,OAAJ,EAAa,oBAAb,CAAxC,CAAjB;;AACA,MAAME,SAAS,GAAGL,UAAU,CACxB,qCADwB,CAAV,CAEhBM,IAFgB,CAEX,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,aAAJ,KAAsBJ,QAA1B;AAAA,GAFQ,CAAlB;AAIA,MAAIK,MAAM,gBAAG,mFAAb;;AAEA,MAAIJ,SAAJ,EAAe;AACX,QAAMK,SAAS,GAAGL,SAAS,CAACA,SAA5B;AACAI,IAAAA,MAAM,gBACF,oBAAC,IAAD;AAAM,MAAA,GAAG,EAAEJ,SAAS,CAACM;AAArB,OACK;AAAA,UAAGC,IAAH,SAAGA,IAAH;AAAA,0BACG,oBAAC,SAAD;AACI,QAAA,UAAU,EAAE,KADhB,CACuB;;AADvB,SAEQA,IAFR;AAGI,QAAA,MAAM;AAAA,+EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,oBAAAA,SAAT,SAASA,SAAT;AAAA;AAAA,2BACMD,IAAI,CAACE,QAAL,EADN;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEAF,oBAAAA,IAAI,CAACG,MAAL;AACAF,oBAAAA,SAAS,IAAIA,SAAS,EAAtB;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAF;;AAAA;AAAA;AAAA;AAAA;AAHV,SADH;AAAA,KADL,CADJ;AAgBH;;AAED,sBACI,oBAAC,WAAD;AACI,IAAA,GAAG,EAAER,SAAS,GAAGA,SAAS,CAACM,IAAb,GAAoB,cADtC;AAEI,IAAA,OAAO,EAAER,OAFb;AAGI,IAAA,SAAS,EAAE;AAHf,KAKKM,MALL,CADJ;AASH,CArCwB,CAAzB;AAuCAR,gBAAgB,CAACe,WAAjB,GAA+B,kBAA/B;AAEA,eAAef,gBAAf","sourcesContent":["import * as React from \"react\";\nimport { ElementRoot } from \"@webiny/app-page-builder/render/components/ElementRoot\";\nimport { Form } from \"@webiny/form\";\nimport { get } from \"lodash\";\nimport { getPlugins } from \"@webiny/plugins\";\nimport { PbPageElementMailchimpComponentPlugin } from \"../../types\";\n\nconst MailchimpElement = React.memo(({ element }: any) => {\n    const selected = get(element, \"data.settings.component\", get(element, \"settings.component\"));\n    const component = getPlugins<PbPageElementMailchimpComponentPlugin>(\n        \"pb-page-element-mailchimp-component\"\n    ).find(cmp => cmp.componentName === selected);\n\n    let render = <span>You must configure your embed in the settings!</span>;\n\n    if (component) {\n        const Component = component.component;\n        render = (\n            <Form key={component.name}>\n                {({ form }) => (\n                    <Component\n                        processing={false} // It will suffice for editor preview needs.\n                        {...form}\n                        submit={async ({ onSuccess }) => {\n                            if (await form.validate()) {\n                                form.submit();\n                                onSuccess && onSuccess();\n                            }\n                        }}\n                    />\n                )}\n            </Form>\n        );\n    }\n\n    return (\n        <ElementRoot\n            key={component ? component.name : \"no-component\"}\n            element={element}\n            className={\"webiny-pb-page-element-mailchimp\"}\n        >\n            {render}\n        </ElementRoot>\n    );\n});\n\nMailchimpElement.displayName = \"MailchimpElement\";\n\nexport default MailchimpElement;\n"],"file":"MailchimpElement.js"}