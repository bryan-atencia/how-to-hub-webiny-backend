{"version":3,"sources":["../../../../../src/admin/plugins/richTextEditor/code/index.tsx"],"names":["React","css","isKeyHotkey","isCodeHotkey","mark","codeStyle","plugin","name","type","menu","render","MenuButton","editor","toggleMark","hasMark","onKeyDown","next","event","preventDefault","renderLeaf","leaf","attributes","children"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,GAAT,QAAoB,SAApB;AACA,SAASC,WAAT,QAA4B,WAA5B;;AAIA,IAAMC,YAAY,GAAGD,WAAW,CAAC,OAAD,CAAhC;AAEA,IAAME,IAAI,GAAG,MAAb;AAEA;;AACA,IAAMC,SAAS,gBAAGJ,GAAH,oGAAf;AAMA,IAAMK,MAAqC,GAAG;AAC1CC,EAAAA,IAAI,EAAE,kCADoC;AAE1CC,EAAAA,IAAI,EAAE,6BAFoC;AAG1CF,EAAAA,MAAM,EAAE;AACJC,IAAAA,IAAI,EAAE,MADF;AAEJE,IAAAA,IAAI,EAAE;AACFC,MAAAA,MADE,wBAC6B;AAAA,YAAtBC,UAAsB,QAAtBA,UAAsB;AAAA,YAAVC,MAAU,QAAVA,MAAU;AAC3B,4BACI,oBAAC,UAAD;AACI,UAAA,OAAO,EAAE;AAAA,mBAAMA,MAAM,CAACC,UAAP,CAAkBT,IAAlB,CAAN;AAAA,WADb;AAEI,UAAA,MAAM,EAAEQ,MAAM,CAACE,OAAP,CAAeV,IAAf;AAFZ,wBAII,oBAAC,cAAD,OAJJ,CADJ;AAQH;AAVC,KAFF;AAcJQ,IAAAA,MAAM,EAAE;AACJG,MAAAA,SADI,4BACyBC,IADzB,EAC+B;AAAA,YAAvBC,KAAuB,SAAvBA,KAAuB;AAAA,YAAhBL,MAAgB,SAAhBA,MAAgB;;AAC/B;AACA,YAAIT,YAAY,CAACc,KAAD,CAAhB,EAAyB;AACrBA,UAAAA,KAAK,CAACC,cAAN;AACAN,UAAAA,MAAM,CAACC,UAAP,CAAkBT,IAAlB;AACA,iBAAO,IAAP;AACH;;AAED,eAAOY,IAAI,EAAX;AACH,OAVG;AAWJG,MAAAA,UAXI,6BAWuC;AAAA,YAA9BC,IAA8B,SAA9BA,IAA8B;AAAA,YAAxBC,UAAwB,SAAxBA,UAAwB;AAAA,YAAZC,QAAY,SAAZA,QAAY;;AACvC,YAAIF,IAAI,CAAChB,IAAD,CAAJ,KAAe,IAAnB,EAAyB;AACrB,8BACI;AAAM,YAAA,SAAS,EAAE;AAAjB,aAAoDiB,UAApD,GACKC,QADL,CADJ;AAKH;;AAED,eAAOA,QAAP;AACH;AArBG;AAdJ;AAHkC,CAA9C;AA2CA,eAAehB,MAAf","sourcesContent":["import * as React from \"react\";\nimport { css } from \"emotion\";\nimport { isKeyHotkey } from \"is-hotkey\";\nimport { ReactComponent as FormatCodeIcon } from \"@webiny/app-i18n/admin/assets/icons/format_code.svg\";\nimport { I18NInputRichTextEditorPlugin } from \"@webiny/app-i18n/types\";\n\nconst isCodeHotkey = isKeyHotkey(\"mod+`\");\n\nconst mark = \"code\";\n\n/* prettier-ignore */\nconst codeStyle = css`\n    background-color: var(--mdc-theme-background);\n    padding: 4px 8px;\n    line-height: 1.5rem;\n`;\n\nconst plugin: I18NInputRichTextEditorPlugin = {\n    name: \"i18n-input-rich-text-editor-code\",\n    type: \"i18n-input-rich-text-editor\",\n    plugin: {\n        name: \"code\",\n        menu: {\n            render({ MenuButton, editor }) {\n                return (\n                    <MenuButton\n                        onClick={() => editor.toggleMark(mark)}\n                        active={editor.hasMark(mark)}\n                    >\n                        <FormatCodeIcon />\n                    </MenuButton>\n                );\n            }\n        },\n        editor: {\n            onKeyDown({ event, editor }, next) {\n                // Decide what to do based on the key code...\n                if (isCodeHotkey(event)) {\n                    event.preventDefault();\n                    editor.toggleMark(mark);\n                    return true;\n                }\n\n                return next();\n            },\n            renderLeaf({ leaf, attributes, children }) {\n                if (leaf[mark] === true) {\n                    return (\n                        <code className={\"webiny-rich-typography-code\"} {...attributes}>\n                            {children}\n                        </code>\n                    );\n                }\n\n                return children;\n            }\n        }\n    }\n};\n\nexport default plugin;\n"],"file":"index.js"}