{"version":3,"sources":["../../../../../src/admin/plugins/richTextEditor/scroll/index.ts"],"names":["plugin","name","type","editor","onKeyDown","next","event","native","window","getSelection","top","left","width","height","range","getRangeAt","pos","getBoundingClientRect","cursorY","clientHeight","document","documentElement","scrollDiff","scrollTo","scrollY"],"mappings":"AAEA,IAAMA,MAAqC,GAAG;AAC1CC,EAAAA,IAAI,EAAE,oCADoC;AAE1CC,EAAAA,IAAI,EAAE,6BAFoC;AAG1CF,EAAAA,MAAM,EAAE;AACJC,IAAAA,IAAI,EAAE,QADF;AAEJE,IAAAA,MAAM,EAAE;AACJC,MAAAA,SADI,2BACiBC,IADjB,EACuB;AAAA,YAAfC,KAAe,QAAfA,KAAe;AACvB,YAAMC,MAAM,GAAGC,MAAM,CAACC,YAAP,EAAf;;AACA,YAAIF,MAAM,CAACL,IAAP,KAAgB,MAApB,EAA4B;AACxB,iBAAO;AAAEQ,YAAAA,GAAG,EAAE,CAAP;AAAUC,YAAAA,IAAI,EAAE,CAAhB;AAAmBC,YAAAA,KAAK,EAAE,CAA1B;AAA6BC,YAAAA,MAAM,EAAE;AAArC,WAAP;AACH;;AAED,YAAMC,KAAK,GAAGP,MAAM,CAACQ,UAAP,CAAkB,CAAlB,CAAd;AACA,YAAMC,GAAG,GAAGF,KAAK,CAACG,qBAAN,EAAZ;AAEA,YAAMC,OAAO,GAAGF,GAAG,CAACN,GAApB;AATuB,YAUfS,YAVe,GAUEC,QAAQ,CAACC,eAVX,CAUfF,YAVe;AAWvB,YAAMN,MAAM,GAAGM,YAAY,GAAG,EAA9B;;AAEA,YAAID,OAAO,GAAGL,MAAd,EAAsB;AAClB,cAAMS,UAAU,GAAGJ,OAAO,GAAGL,MAA7B;AACAL,UAAAA,MAAM,CAACe,QAAP,CAAgB,CAAhB,EAAmBf,MAAM,CAACgB,OAAP,GAAiBF,UAAjB,GAA8B,EAAjD;AACH;;AAED,eAAOjB,IAAI,EAAX;AACH;AApBG;AAFJ;AAHkC,CAA9C;AA8BA,eAAeL,MAAf","sourcesContent":["import { I18NInputRichTextEditorPlugin } from \"@webiny/app-i18n/types\";\n\nconst plugin: I18NInputRichTextEditorPlugin = {\n    name: \"i18n-input-rich-text-editor-scroll\",\n    type: \"i18n-input-rich-text-editor\",\n    plugin: {\n        name: \"scroll\",\n        editor: {\n            onKeyDown({ event }, next) {\n                const native = window.getSelection();\n                if (native.type === \"None\") {\n                    return { top: 0, left: 0, width: 0, height: 0 };\n                }\n\n                const range = native.getRangeAt(0);\n                const pos = range.getBoundingClientRect();\n\n                const cursorY = pos.top;\n                const { clientHeight } = document.documentElement;\n                const height = clientHeight - 50;\n\n                if (cursorY > height) {\n                    const scrollDiff = cursorY - height;\n                    window.scrollTo(0, window.scrollY + scrollDiff + 20);\n                }\n\n                return next();\n            }\n        }\n    }\n};\n\nexport default plugin;\n"],"file":"index.js"}