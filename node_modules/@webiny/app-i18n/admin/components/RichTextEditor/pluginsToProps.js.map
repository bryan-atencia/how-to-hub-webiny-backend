{"version":3,"sources":["../../../../src/admin/components/RichTextEditor/pluginsToProps.tsx"],"names":["React","defaultRenderElement","attributes","children","defaultRenderLeaf","defaultRenderEditor","pluginsToProps","plugins","args","editorPlugins","map","pl","editor","filter","Boolean","renderElementFns","renderLeafFns","renderEditorFns","otherProps","i","renderEditor","renderElement","renderLeaf","other","push","Object","keys","forEach","key","length","renderEditorMw","createMiddleware","createLeafMiddleware","reduce","acc","mw","event","fns","next","fn"],"mappings":"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","sourcesContent":["import * as React from \"react\";\n\nconst defaultRenderElement = ({ attributes, children }) => {\n    return <p {...attributes}>{children}</p>;\n};\n\nconst defaultRenderLeaf = ({ attributes, children }) => {\n    return <span {...attributes}>{children}</span>;\n};\n\nconst defaultRenderEditor = ({ children }) => children;\n\nexport const pluginsToProps = (plugins, args) => {\n    const editorPlugins = plugins.map(pl => pl.editor).filter(Boolean);\n    const renderElementFns = [];\n    const renderLeafFns = [];\n    const renderEditorFns = [];\n    const otherProps = {};\n\n    for (let i = 0; i < editorPlugins.length; i++) {\n        const { renderEditor, renderElement, renderLeaf, ...other } = editorPlugins[i];\n\n        if (typeof renderEditor === \"function\") {\n            renderEditorFns.push(renderEditor);\n        }\n\n        if (typeof renderElement === \"function\") {\n            renderElementFns.push(renderElement);\n        }\n\n        if (typeof renderLeaf === \"function\") {\n            renderLeafFns.push(renderLeaf);\n        }\n\n        Object.keys(other).forEach(key => {\n            if (!otherProps[key]) {\n                otherProps[key] = [];\n            }\n            otherProps[key].push(other[key]);\n        });\n    }\n\n    renderEditorFns.push(defaultRenderEditor);\n    renderElementFns.push(defaultRenderElement);\n    renderLeafFns.push(defaultRenderLeaf);\n\n    const renderEditorMw = createMiddleware(renderEditorFns);\n\n    return {\n        renderEditor: children => renderEditorMw({ children, ...args }),\n        renderElement: createMiddleware(renderElementFns),\n        renderLeaf: createLeafMiddleware(renderLeafFns),\n        ...Object.keys(otherProps).reduce((acc, key) => {\n            const mw = createMiddleware(otherProps[key]);\n            acc[key] = event => mw({ event, ...args });\n            return acc;\n        }, {})\n    };\n};\n\nconst createMiddleware = fns => {\n    return args => {\n        let i = 0;\n\n        function next() {\n            const fn = fns[i++];\n            if (!fn) {\n                return;\n            }\n\n            return fn(args, next);\n        }\n\n        return next();\n    };\n};\n\nconst createLeafMiddleware = fns => {\n    return args => {\n        let i = 0;\n\n        function next({ children }) {\n            const fn = fns[i++];\n            if (!fn) {\n                return children;\n            }\n\n            return next({ children: fn({ ...args, children }) });\n        }\n\n        return next(args);\n    };\n};\n"],"file":"pluginsToProps.js"}