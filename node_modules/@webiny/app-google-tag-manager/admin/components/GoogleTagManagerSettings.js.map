{"version":3,"sources":["../../../src/admin/components/GoogleTagManagerSettings.tsx"],"names":["React","Form","Grid","Cell","Switch","ButtonPrimary","Query","Mutation","useSnackbar","Input","graphql","CircularProgress","get","SimpleForm","SimpleFormFooter","SimpleFormContent","SimpleFormHeader","GoogleTagManagerSettings","showSnackbar","query","data","queryInProgress","loading","mutation","update","mutationInProgress","settings","variables","Bind","form","enabled","submit"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { Form } from \"@webiny/form\";\nimport { Grid, Cell } from \"@webiny/ui/Grid\";\nimport { Switch } from \"@webiny/ui/Switch\";\nimport { ButtonPrimary } from \"@webiny/ui/Button\";\nimport { Query, Mutation } from \"react-apollo\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nimport { Input } from \"@webiny/ui/Input\";\nimport graphql from \"./graphql\";\nimport { CircularProgress } from \"@webiny/ui/Progress\";\nimport get from \"lodash.get\";\n\nimport {\n    SimpleForm,\n    SimpleFormFooter,\n    SimpleFormContent,\n    SimpleFormHeader\n} from \"@webiny/app-admin/components/SimpleForm\";\n\nconst GoogleTagManagerSettings = () => {\n    const { showSnackbar } = useSnackbar();\n    return (\n        <Query query={graphql.query}>\n            {({ data, loading: queryInProgress }) => (\n                <Mutation mutation={graphql.mutation}>\n                    {(update, { loading: mutationInProgress }) => {\n                        const settings = get(data, \"googleTagManager.getSettings.data\") || {};\n\n                        return (\n                            <Form\n                                data={settings}\n                                onSubmit={async data => {\n                                    await update({\n                                        variables: {\n                                            data: data\n                                        }\n                                    });\n                                    showSnackbar(\"Settings updated successfully.\");\n                                }}\n                            >\n                                {({ Bind, form, data }) => (\n                                    <SimpleForm>\n                                        {(queryInProgress || mutationInProgress) && (\n                                            <CircularProgress />\n                                        )}\n                                        <SimpleFormHeader title=\"Google Tag Manager Settings\">\n                                            <Bind\n                                                name={\"enabled\"}\n                                                afterChange={enabled => {\n                                                    if (!enabled) {\n                                                        form.submit();\n                                                    }\n                                                }}\n                                            >\n                                                <Switch label=\"Enabled\" />\n                                            </Bind>\n                                        </SimpleFormHeader>\n                                        {data.enabled ? (\n                                            <>\n                                                <SimpleFormContent>\n                                                    <Grid>\n                                                        <Cell span={12}>\n                                                            <Grid>\n                                                                <Cell span={6}>\n                                                                    <Bind name={\"code\"}>\n                                                                        <Input\n                                                                            label=\"Container ID\"\n                                                                            description={\n                                                                                'Formatted as \"GTM-XXXXXX\".'\n                                                                            }\n                                                                        />\n                                                                    </Bind>\n                                                                </Cell>\n                                                            </Grid>\n                                                        </Cell>\n                                                    </Grid>\n                                                </SimpleFormContent>\n                                                <SimpleFormFooter>\n                                                    <ButtonPrimary onClick={form.submit}>\n                                                        Save\n                                                    </ButtonPrimary>\n                                                </SimpleFormFooter>\n                                            </>\n                                        ) : null}\n                                    </SimpleForm>\n                                )}\n                            </Form>\n                        );\n                    }}\n                </Mutation>\n            )}\n        </Query>\n    );\n};\n\nexport default GoogleTagManagerSettings;\n"],"file":"GoogleTagManagerSettings.js"}