{"version":3,"sources":["../../../../src/editor/plugins/blockEditing/SearchBlocks.tsx"],"names":["React","useCallback","useEffect","useMemo","useState","Mutation","connect","deactivatePlugin","updateElement","getContent","useKeyHandler","useSnackbar","getPlugins","unregisterPlugin","createBlockElements","OverlayLayout","LeftPanel","RightPanel","SplitView","List","ListItem","ListItemGraphic","Icon","DelayedOnChange","Typography","SimpleForm","SimpleFormContent","SimpleFormHeader","createBlockPlugin","BlocksList","DELETE_ELEMENT","UPDATE_ELEMENT","EditBlockDialog","listItem","ListItemTitle","listStyle","TitleContent","Styled","allBlockCategory","type","name","categoryName","title","description","icon","sortBlocks","blocks","sort","a","b","SearchBar","props","content","search","setSearch","editingBlock","setEditingBlock","activeCategory","setActiveCategory","allCategories","allBlocks","addKeyHandler","removeKeyHandler","e","preventDefault","addBlockToContent","plugin","element","elements","getBlocksList","output","filter","item","tags","includes","category","toLowerCase","getCategoryBlocksCount","length","pl","showSnackbar","deleteBlock","deleteElement","variables","id","response","error","data","pageBuilder","message","updateBlock","setTimeout","renderSearchInput","searchIcon","value","onChange","target","onExited","categoryPlugin","find","map","p","updateInProgress","loading","state"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,OAAxC,EAAiDC,QAAjD,QAAiE,OAAjE;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,OAAT,QAAwB,uCAAxB;AACA,SAASC,gBAAT,EAA2BC,aAA3B,QAAgD,yCAAhD;AACA,SAASC,UAAT,QAA2B,2CAA3B;AACA,SAASC,aAAT,QAA8B,qDAA9B;AACA,SAASC,WAAT,QAA4B,qCAA5B;AACA,SAASC,UAAT,EAAqBC,gBAArB,QAA6C,iBAA7C;AACA,SAASC,mBAAT,QAAoC,uCAApC;AACA,SAASC,aAAT,QAA8B,4CAA9B;AACA,SAASC,SAAT,EAAoBC,UAApB,EAAgCC,SAAhC,QAAiD,wCAAjD;AACA,SAASC,IAAT,EAAeC,QAAf,EAAyBC,eAAzB,QAAgD,iBAAhD;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,eAAT,QAAgC,4DAAhC;AACA,SAASC,UAAT,QAA2B,uBAA3B;;AAGA,SACIC,UADJ,EAEIC,iBAFJ,EAGIC,gBAHJ,QAIO,yCAJP;;AAOA,OAAOC,iBAAP,MAA8B,wDAA9B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,WAA/C;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,QAAT,EAAmBC,aAAnB,EAAkCC,SAAlC,EAA6CC,YAA7C,QAAiE,sBAAjE;AACA,OAAO,KAAKC,MAAZ,MAAwB,oBAAxB;AAGA,IAAMC,gBAA6C,GAAG;AAClDC,EAAAA,IAAI,EAAE,0BAD4C;AAElDC,EAAAA,IAAI,EAAE,8BAF4C;AAGlDC,EAAAA,YAAY,EAAE,KAHoC;AAIlDC,EAAAA,KAAK,EAAE,YAJ2C;AAKlDC,EAAAA,WAAW,EAAE,+BALqC;AAMlDC,EAAAA,IAAI,eAAE,oBAAC,OAAD;AAN4C,CAAtD;;AASA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,MAAM,EAAI;AACzB,SAAOA,MAAM,CAACC,IAAP,CAAY,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAC9B,QAAID,CAAC,CAACR,IAAF,KAAW,uBAAf,EAAwC;AACpC,aAAO,CAAC,CAAR;AACH;;AAED,QAAIS,CAAC,CAACT,IAAF,KAAW,uBAAf,EAAwC;AACpC,aAAO,CAAP;AACH;;AAED,QAAIQ,CAAC,CAACN,KAAF,GAAUO,CAAC,CAACP,KAAhB,EAAuB;AACnB,aAAO,CAAC,CAAR;AACH;;AACD,QAAIM,CAAC,CAACN,KAAF,GAAUO,CAAC,CAACP,KAAhB,EAAuB;AACnB,aAAO,CAAP;AACH;;AACD,WAAO,CAAP;AACH,GAhBM,CAAP;AAiBH,CAlBD;;AAoBA,IAAMQ,SAAS,GAAG,SAAZA,SAAY,CAAAC,KAAK,EAAI;AAAA,MACf3C,aADe,GAC8B2C,KAD9B,CACf3C,aADe;AAAA,MACA4C,OADA,GAC8BD,KAD9B,CACAC,OADA;AAAA,MACS7C,gBADT,GAC8B4C,KAD9B,CACS5C,gBADT;;AAAA,kBAGKH,QAAQ,CAAC,EAAD,CAHb;AAAA;AAAA,MAGhBiD,MAHgB;AAAA,MAGRC,SAHQ;;AAAA,mBAIiBlD,QAAQ,CAAC,IAAD,CAJzB;AAAA;AAAA,MAIhBmD,YAJgB;AAAA,MAIFC,eAJE;;AAAA,mBAKqBpD,QAAQ,CAAC,KAAD,CAL7B;AAAA;AAAA,MAKhBqD,cALgB;AAAA,MAKAC,iBALA;;AAOvB,MAAMC,aAAa,GAAGxD,OAAO,CACzB;AAAA,YACImC,gBADJ,4BAEO1B,UAAU,CAA8B,0BAA9B,CAFjB;AAAA,GADyB,EAKzB,EALyB,CAA7B;AAQA,MAAMgD,SAAS,GAAGhD,UAAU,CAAsB,iBAAtB,CAA5B;;AAfuB,uBAiBqBF,aAAa,EAjBlC;AAAA,MAiBfmD,aAjBe,kBAiBfA,aAjBe;AAAA,MAiBAC,gBAjBA,kBAiBAA,gBAjBA;;AAmBvB5D,EAAAA,SAAS,CAAC,YAAM;AACZ2D,IAAAA,aAAa,CAAC,QAAD,EAAW,UAAAE,CAAC,EAAI;AACzBA,MAAAA,CAAC,CAACC,cAAF;AACAzD,MAAAA,gBAAgB,CAAC;AAAEiC,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAhB;AACH,KAHY,CAAb;AAKA,WAAO;AAAA,aAAMsB,gBAAgB,CAAC,QAAD,CAAtB;AAAA,KAAP;AACH,GAPQ,EAON,EAPM,CAAT;AASA,MAAMG,iBAAiB,GAAGhE,WAAW,CACjC,UAAAiE,MAAM,EAAI;AACN,QAAMC,OAAO,mCACNf,OADM;AAETgB,MAAAA,QAAQ,+BAAMhB,OAAO,CAACgB,QAAd,IAAwBtD,mBAAmB,CAACoD,MAAM,CAAC1B,IAAR,CAA3C;AAFC,MAAb;;AAIAhC,IAAAA,aAAa,CAAC;AAAE2D,MAAAA,OAAO,EAAPA;AAAF,KAAD,CAAb;AACH,GAPgC,EAQjC,CAACf,OAAD,CARiC,CAArC;AAWA;;;;;AAIA,MAAMiB,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxB,QAAI,CAACZ,cAAL,EAAqB;AACjB,aAAO,EAAP;AACH;;AAED,QAAIa,MAAM,GAAGV,SAAb,CALwB,CAOxB;;AACA,QAAIH,cAAc,KAAK,KAAvB,EAA8B;AAC1B,UAAIA,cAAc,KAAK,OAAvB,EAAgC;AAC5Ba,QAAAA,MAAM,GAAGA,MAAM,CAACC,MAAP,CAAc,UAAAC,IAAI,EAAI;AAC3B,iBAAOA,IAAI,CAACC,IAAL,IAAaD,IAAI,CAACC,IAAL,CAAUC,QAAV,CAAmB,OAAnB,CAApB;AACH,SAFQ,CAAT;AAGH,OAJD,MAIO;AACHJ,QAAAA,MAAM,GAAGA,MAAM,CAACC,MAAP,CAAc,UAAAC,IAAI,EAAI;AAC3B,iBAAOA,IAAI,CAACG,QAAL,KAAkBlB,cAAzB;AACH,SAFQ,CAAT;AAGH;AACJ,KAlBuB,CAoBxB;;;AACA,QAAIJ,MAAJ,EAAY;AACRiB,MAAAA,MAAM,GAAGA,MAAM,CAACC,MAAP,CAAc,UAAAC,IAAI,EAAI;AAC3B,eAAOA,IAAI,CAAC9B,KAAL,CAAWkC,WAAX,GAAyBF,QAAzB,CAAkCrB,MAAM,CAACuB,WAAP,EAAlC,CAAP;AACH,OAFQ,CAAT;AAGH;;AAED,WAAO/B,UAAU,CAACyB,MAAD,CAAjB;AACH,GA5BD;;AA8BA,MAAMO,sBAAsB,GAAG5E,WAAW,CAAC,UAAA0E,QAAQ,EAAI;AACnD,QAAIA,QAAQ,KAAK,KAAjB,EAAwB;AACpB,aAAOf,SAAS,CAACkB,MAAjB;AACH;;AACD,WAAOlB,SAAS,CAACW,MAAV,CAAiB,UAAAQ,EAAE;AAAA,aAAIA,EAAE,CAACJ,QAAH,KAAgBA,QAApB;AAAA,KAAnB,EAAiDG,MAAxD;AACH,GALyC,EAKvC,EALuC,CAA1C;;AAzEuB,qBAgFEnE,WAAW,EAhFb;AAAA,MAgFfqE,YAhFe,gBAgFfA,YAhFe;;AAkFvB,MAAMC,WAAW,GAAGhF,WAAW;AAAA,yEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAASiE,cAAAA,MAAT,QAASA,MAAT,EAAiBgB,aAAjB,QAAiBA,aAAjB;AAAA;AAAA,qBACLA,aAAa,CAAC;AACjCC,gBAAAA,SAAS,EAAE;AACPC,kBAAAA,EAAE,EAAElB,MAAM,CAACkB;AADJ;AADsB,eAAD,CADR;;AAAA;AACtBC,cAAAA,QADsB;AAOpBC,cAAAA,KAPoB,GAOVD,QAAQ,CAACE,IAAT,CAAcC,WAAd,CAA0BN,aAPhB,CAOpBI,KAPoB;;AAAA,mBAQxBA,KARwB;AAAA;AAAA;AAAA;;AASxBN,cAAAA,YAAY,CAACM,KAAK,CAACG,OAAP,CAAZ;AATwB;;AAAA;AAa5B5E,cAAAA,gBAAgB,CAACqD,MAAM,CAAC1B,IAAR,CAAhB;AACAwC,cAAAA,YAAY,eACR,yDACU,oCAASd,MAAM,CAACxB,KAAhB,CADV,kBADQ,CAAZ;;AAd4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA;AAAA;AAAA;AAAA,OAmB5B,EAnB4B,CAA/B;AAqBA,MAAMgD,WAAW,GAAGzF,WAAW;AAAA,yEAC3B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAASO,cAAAA,aAAT,SAASA,aAAT,qBAAwB+E,IAAxB,EAAuC/C,IAAvC,cAAgCE,KAAhC,EAA6CiC,QAA7C,cAA6CA,QAA7C;;AAAA,kBACSpB,YADT;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,qBAK2B/C,aAAa,CAAC;AACjC2E,gBAAAA,SAAS,EAAE;AACPC,kBAAAA,EAAE,EAAE7B,YAAY,CAAC6B,EADV;AAEPG,kBAAAA,IAAI,EAAE;AAAE/C,oBAAAA,IAAI,EAAJA,IAAF;AAAQmC,oBAAAA,QAAQ,EAARA;AAAR;AAFC;AADsB,eAAD,CALxC;;AAAA;AAKUU,cAAAA,QALV;AAAA,sCAY4BA,QAAQ,CAACE,IAAT,CAAcC,WAAd,CAA0BhF,aAZtD,EAYY8E,KAZZ,yBAYYA,KAZZ,EAYmBC,IAZnB,yBAYmBA,IAZnB;;AAAA,mBAaQD,KAbR;AAAA;AAAA;AAAA;;AAcQN,cAAAA,YAAY,CAACM,KAAK,CAACG,OAAP,CAAZ;AAdR;;AAAA;AAkBI;AACA7D,cAAAA,iBAAiB,CAAC2D,IAAD,CAAjB;AAEA/B,cAAAA,eAAe,CAAC,IAAD,CAAf;AACAmC,cAAAA,UAAU,CAAC,YAAM;AACb;AACAX,gBAAAA,YAAY,eACR,yDACU,oCAASxC,IAAT,CADV,gBADQ,CAAZ;AAKH,eAPS,EAOP,GAPO,CAAV;;AAtBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAD2B;;AAAA;AAAA;AAAA;AAAA,OAgC3B,CAACe,YAAD,CAhC2B,CAA/B;AAmCA,MAAMqC,iBAAiB,GAAG3F,WAAW,CAAC,YAAM;AACxC,wBACI,oBAAC,MAAD,CAAQ,KAAR,qBACI,oBAAC,IAAD;AAAM,MAAA,SAAS,EAAEoC,MAAM,CAACwD,UAAxB;AAAoC,MAAA,IAAI,eAAE,oBAAC,UAAD;AAA1C,MADJ,eAEI,oBAAC,eAAD;AAAiB,MAAA,KAAK,EAAExC,MAAxB;AAAgC,MAAA,QAAQ,EAAE,kBAAAyC,KAAK;AAAA,eAAIxC,SAAS,CAACwC,KAAD,CAAb;AAAA;AAA/C,OACK;AAAA,UAAGA,KAAH,SAAGA,KAAH;AAAA,UAAUC,SAAV,SAAUA,QAAV;AAAA,0BACG;AACI,QAAA,SAAS,MADb;AAEI,QAAA,IAAI,EAAE,MAFV;AAGI,QAAA,WAAW,EAAC,kBAHhB;AAII,QAAA,KAAK,EAAED,KAJX;AAKI,QAAA,QAAQ,EAAE,kBAAA/B,CAAC;AAAA,iBAAIgC,SAAQ,CAAChC,CAAC,CAACiC,MAAF,CAASF,KAAV,CAAZ;AAAA;AALf,QADH;AAAA,KADL,CAFJ,CADJ;AAgBH,GAjBoC,EAiBlC,CAACzC,MAAD,CAjBkC,CAArC;AAmBA,MAAM4C,QAAQ,GAAGhG,WAAW,CAAC,YAAM;AAC/BM,IAAAA,gBAAgB,CAAC;AAAEiC,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAhB;AACH,GAF2B,EAEzB,EAFyB,CAA5B;AAIA,MAAM0D,cAAc,GAAGvC,aAAa,CAACwC,IAAd,CAAmB,UAAApB,EAAE;AAAA,WAAIA,EAAE,CAACtC,YAAH,KAAoBgB,cAAxB;AAAA,GAArB,CAAvB;AAEA,sBACI,oBAAC,aAAD;AAAe,IAAA,SAAS,EAAEmC,iBAAiB,EAA3C;AAA+C,IAAA,QAAQ,EAAEK;AAAzD,kBACI,oBAAC,SAAD,qBACI,oBAAC,SAAD;AAAW,IAAA,IAAI,EAAE;AAAjB,kBACI,oBAAC,IAAD;AAAM,IAAA,OAAO,MAAb;AAAc,IAAA,SAAS,EAAE9D;AAAzB,KACKwB,aAAa,CAACyC,GAAd,CAAkB,UAAAC,CAAC;AAAA,wBAChB,oBAAC,QAAD;AACI,MAAA,GAAG,EAAEA,CAAC,CAAC7D,IADX;AAEI,MAAA,SAAS,EAAEP,QAFf;AAGI,MAAA,OAAO,EAAE,mBAAM;AACXyB,QAAAA,iBAAiB,CAAC2C,CAAC,CAAC5D,YAAH,CAAjB;AACH;AALL,oBAOI,oBAAC,eAAD,qBACI,oBAAC,IAAD;AAAM,MAAA,IAAI,EAAE4D,CAAC,CAACzD;AAAd,MADJ,CAPJ,eAUI,oBAAC,YAAD,qBACI,oBAAC,aAAD,QACKyD,CAAC,CAAC3D,KADP,QACgBmC,sBAAsB,CAACwB,CAAC,CAAC5D,YAAH,CADtC,MADJ,eAII,oBAAC,UAAD;AAAY,MAAA,GAAG,EAAE;AAAjB,OAA+B4D,CAAC,CAAC1D,WAAjC,CAJJ,CAVJ,CADgB;AAAA,GAAnB,CADL,CADJ,CADJ,eAwBI,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAE;AAAlB,kBACI,oBAAC,QAAD;AAAU,IAAA,QAAQ,EAAEZ;AAApB,KACK,UAACvB,aAAD;AAAA,QAA2B8F,gBAA3B,SAAkBC,OAAlB;AAAA,wBACG,oBAAC,QAAD;AAAU,MAAA,QAAQ,EAAEzE;AAApB,OACK,UAAAoD,aAAa;AAAA,aACVzB,cAAc,iBACV,oBAAC,UAAD,qBACI,oBAAC,gBAAD;AACI,QAAA,KAAK,EAAEyC,cAAc,CAACxD,KAD1B;AAEI,QAAA,IAAI,EAAEwD,cAAc,CAACtD;AAFzB,QADJ,eAKI,oBAAC,iBAAD,qBACI,oBAAC,MAAD,CAAQ,SAAR,qBACI,oBAAC,UAAD;AACI,QAAA,QAAQ,EAAEa,cADd;AAEI,QAAA,QAAQ,EAAEQ,iBAFd;AAGI,QAAA,gBAAgB,EAAE1D,gBAHtB;AAII,QAAA,MAAM,EAAE8D,aAAa,EAJzB;AAKI,QAAA,MAAM,EAAE,gBAAAH,MAAM;AAAA,iBAAIV,eAAe,CAACU,MAAD,CAAnB;AAAA,SALlB;AAMI,QAAA,QAAQ,EAAE,kBAAAA,MAAM;AAAA,iBACZe,WAAW,CAAC;AACRf,YAAAA,MAAM,EAANA,MADQ;AAERgB,YAAAA,aAAa,EAAbA;AAFQ,WAAD,CADC;AAAA;AANpB,QADJ,CADJ,eAiBI,oBAAC,eAAD;AACI,QAAA,OAAO,EAAE;AAAA,iBAAM1B,eAAe,CAAC,IAAD,CAArB;AAAA,SADb;AAEI,QAAA,QAAQ,EAAE,kBAAA+B,IAAI;AAAA,iBACVG,WAAW,CAAC;AAAEH,YAAAA,IAAI,EAAJA,IAAF;AAAQ/E,YAAAA,aAAa,EAAbA;AAAR,WAAD,CADD;AAAA,SAFlB;AAKI,QAAA,IAAI,EAAE,CAAC,CAAC+C,YALZ;AAMI,QAAA,MAAM,EAAEA,YANZ;AAOI,QAAA,OAAO,EAAE+C;AAPb,QAjBJ,CALJ,CAFM;AAAA,KADlB,CADH;AAAA,GADL,CADJ,CAxBJ,CADJ,CADJ;AA0EH,CA7OD;;AA+OA,eAAehG,OAAO,CAAgB,UAAAkG,KAAK;AAAA,SAAK;AAAEpD,IAAAA,OAAO,EAAE3C,UAAU,CAAC+F,KAAD;AAArB,GAAL;AAAA,CAArB,EAA2D;AAC7EjG,EAAAA,gBAAgB,EAAhBA,gBAD6E;AAE7EC,EAAAA,aAAa,EAAbA;AAF6E,CAA3D,CAAP,CAGZ0C,SAHY,CAAf","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport { connect } from \"@webiny/app-page-builder/editor/redux\";\nimport { deactivatePlugin, updateElement } from \"@webiny/app-page-builder/editor/actions\";\nimport { getContent } from \"@webiny/app-page-builder/editor/selectors\";\nimport { useKeyHandler } from \"@webiny/app-page-builder/editor/hooks/useKeyHandler\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nimport { getPlugins, unregisterPlugin } from \"@webiny/plugins\";\nimport { createBlockElements } from \"@webiny/app-page-builder/editor/utils\";\nimport { OverlayLayout } from \"@webiny/app-admin/components/OverlayLayout\";\nimport { LeftPanel, RightPanel, SplitView } from \"@webiny/app-admin/components/SplitView\";\nimport { List, ListItem, ListItemGraphic } from \"@webiny/ui/List\";\nimport { Icon } from \"@webiny/ui/Icon\";\nimport { DelayedOnChange } from \"@webiny/app-page-builder/editor/components/DelayedOnChange\";\nimport { Typography } from \"@webiny/ui/Typography\";\n\nimport { ReactComponent as SearchIcon } from \"@webiny/app-page-builder/editor/assets/icons/search.svg\";\nimport {\n    SimpleForm,\n    SimpleFormContent,\n    SimpleFormHeader\n} from \"@webiny/app-admin/components/SimpleForm\";\n\nimport { ReactComponent as AllIcon } from \"./icons/round-clear_all-24px.svg\";\nimport createBlockPlugin from \"@webiny/app-page-builder/admin/utils/createBlockPlugin\";\nimport BlocksList from \"./BlocksList\";\nimport { DELETE_ELEMENT, UPDATE_ELEMENT } from \"./graphql\";\nimport EditBlockDialog from \"./EditBlockDialog\";\nimport { listItem, ListItemTitle, listStyle, TitleContent } from \"./SearchBlocksStyled\";\nimport * as Styled from \"./StyledComponents\";\nimport { PbEditorBlockCategoryPlugin, PbEditorBlockPlugin } from \"@webiny/app-page-builder/types\";\n\nconst allBlockCategory: PbEditorBlockCategoryPlugin = {\n    type: \"pb-editor-block-category\",\n    name: \"pb-editor-block-category-all\",\n    categoryName: \"all\",\n    title: \"All blocks\",\n    description: \"List of all available blocks.\",\n    icon: <AllIcon />\n};\n\nconst sortBlocks = blocks => {\n    return blocks.sort(function(a, b) {\n        if (a.name === \"pb-editor-block-empty\") {\n            return -1;\n        }\n\n        if (b.name === \"pb-editor-block-empty\") {\n            return 1;\n        }\n\n        if (a.title < b.title) {\n            return -1;\n        }\n        if (a.title > b.title) {\n            return 1;\n        }\n        return 0;\n    });\n};\n\nconst SearchBar = props => {\n    const { updateElement, content, deactivatePlugin } = props;\n\n    const [search, setSearch] = useState(\"\");\n    const [editingBlock, setEditingBlock] = useState(null);\n    const [activeCategory, setActiveCategory] = useState(\"all\");\n\n    const allCategories = useMemo(\n        () => [\n            allBlockCategory,\n            ...getPlugins<PbEditorBlockCategoryPlugin>(\"pb-editor-block-category\")\n        ],\n        []\n    );\n\n    const allBlocks = getPlugins<PbEditorBlockPlugin>(\"pb-editor-block\");\n\n    const { addKeyHandler, removeKeyHandler } = useKeyHandler();\n\n    useEffect(() => {\n        addKeyHandler(\"escape\", e => {\n            e.preventDefault();\n            deactivatePlugin({ name: \"pb-editor-search-blocks-bar\" });\n        });\n\n        return () => removeKeyHandler(\"escape\");\n    }, []);\n\n    const addBlockToContent = useCallback(\n        plugin => {\n            const element = {\n                ...content,\n                elements: [...content.elements, createBlockElements(plugin.name)]\n            };\n            updateElement({ element });\n        },\n        [content]\n    );\n\n    /**\n     * Returns a list of blocks - by selected category and by searched term (if present).\n     * @returns {*}\n     */\n    const getBlocksList = () => {\n        if (!activeCategory) {\n            return [];\n        }\n\n        let output = allBlocks;\n\n        // If \"all\" is selected, no category filtering is required.\n        if (activeCategory !== \"all\") {\n            if (activeCategory === \"saved\") {\n                output = output.filter(item => {\n                    return item.tags && item.tags.includes(\"saved\");\n                });\n            } else {\n                output = output.filter(item => {\n                    return item.category === activeCategory;\n                });\n            }\n        }\n\n        // Finally, filter by typed search term.\n        if (search) {\n            output = output.filter(item => {\n                return item.title.toLowerCase().includes(search.toLowerCase());\n            });\n        }\n\n        return sortBlocks(output);\n    };\n\n    const getCategoryBlocksCount = useCallback(category => {\n        if (category === \"all\") {\n            return allBlocks.length;\n        }\n        return allBlocks.filter(pl => pl.category === category).length;\n    }, []);\n\n    const { showSnackbar } = useSnackbar();\n\n    const deleteBlock = useCallback(async ({ plugin, deleteElement }) => {\n        const response = await deleteElement({\n            variables: {\n                id: plugin.id\n            }\n        });\n\n        const { error } = response.data.pageBuilder.deleteElement;\n        if (error) {\n            showSnackbar(error.message);\n            return;\n        }\n\n        unregisterPlugin(plugin.name);\n        showSnackbar(\n            <span>\n                Block <strong>{plugin.title}</strong> was deleted!\n            </span>\n        );\n    }, []);\n\n    const updateBlock = useCallback(\n        async ({ updateElement, data: { title: name, category } }) => {\n            if (!editingBlock) {\n                return;\n            }\n\n            const response = await updateElement({\n                variables: {\n                    id: editingBlock.id,\n                    data: { name, category }\n                }\n            });\n\n            const { error, data } = response.data.pageBuilder.updateElement;\n            if (error) {\n                showSnackbar(error.message);\n                return;\n            }\n\n            // This will replace previously registered block plugin.\n            createBlockPlugin(data);\n\n            setEditingBlock(null);\n            setTimeout(() => {\n                // For better UX, success message is shown after 300ms.\n                showSnackbar(\n                    <span>\n                        Block <strong>{name}</strong> was saved!\n                    </span>\n                );\n            }, 300);\n        },\n        [editingBlock]\n    );\n\n    const renderSearchInput = useCallback(() => {\n        return (\n            <Styled.Input>\n                <Icon className={Styled.searchIcon} icon={<SearchIcon />} />\n                <DelayedOnChange value={search} onChange={value => setSearch(value)}>\n                    {({ value, onChange }) => (\n                        <input\n                            autoFocus\n                            type={\"text\"}\n                            placeholder=\"Search blocks...\"\n                            value={value}\n                            onChange={e => onChange(e.target.value)}\n                        />\n                    )}\n                </DelayedOnChange>\n            </Styled.Input>\n        );\n    }, [search]);\n\n    const onExited = useCallback(() => {\n        deactivatePlugin({ name: \"pb-editor-search-blocks-bar\" });\n    }, []);\n\n    const categoryPlugin = allCategories.find(pl => pl.categoryName === activeCategory);\n\n    return (\n        <OverlayLayout barMiddle={renderSearchInput()} onExited={onExited}>\n            <SplitView>\n                <LeftPanel span={3}>\n                    <List twoLine className={listStyle}>\n                        {allCategories.map(p => (\n                            <ListItem\n                                key={p.name}\n                                className={listItem}\n                                onClick={() => {\n                                    setActiveCategory(p.categoryName);\n                                }}\n                            >\n                                <ListItemGraphic>\n                                    <Icon icon={p.icon} />\n                                </ListItemGraphic>\n                                <TitleContent>\n                                    <ListItemTitle>\n                                        {p.title} ({getCategoryBlocksCount(p.categoryName)})\n                                    </ListItemTitle>\n                                    <Typography use={\"subtitle2\"}>{p.description}</Typography>\n                                </TitleContent>\n                            </ListItem>\n                        ))}\n                    </List>\n                </LeftPanel>\n                <RightPanel span={9}>\n                    <Mutation mutation={UPDATE_ELEMENT}>\n                        {(updateElement, { loading: updateInProgress }) => (\n                            <Mutation mutation={DELETE_ELEMENT}>\n                                {deleteElement =>\n                                    activeCategory && (\n                                        <SimpleForm>\n                                            <SimpleFormHeader\n                                                title={categoryPlugin.title}\n                                                icon={categoryPlugin.icon}\n                                            />\n                                            <SimpleFormContent>\n                                                <Styled.BlockList>\n                                                    <BlocksList\n                                                        category={activeCategory}\n                                                        addBlock={addBlockToContent}\n                                                        deactivatePlugin={deactivatePlugin}\n                                                        blocks={getBlocksList()}\n                                                        onEdit={plugin => setEditingBlock(plugin)}\n                                                        onDelete={plugin =>\n                                                            deleteBlock({\n                                                                plugin,\n                                                                deleteElement\n                                                            })\n                                                        }\n                                                    />\n                                                </Styled.BlockList>\n\n                                                <EditBlockDialog\n                                                    onClose={() => setEditingBlock(null)}\n                                                    onSubmit={data =>\n                                                        updateBlock({ data, updateElement })\n                                                    }\n                                                    open={!!editingBlock}\n                                                    plugin={editingBlock}\n                                                    loading={updateInProgress}\n                                                />\n                                            </SimpleFormContent>\n                                        </SimpleForm>\n                                    )\n                                }\n                            </Mutation>\n                        )}\n                    </Mutation>\n                </RightPanel>\n            </SplitView>\n        </OverlayLayout>\n    );\n};\n\nexport default connect<any, any, any>(state => ({ content: getContent(state) }), {\n    deactivatePlugin,\n    updateElement\n})(SearchBar);\n"],"file":"SearchBlocks.js"}