{"version":3,"sources":["../../../../../src/editor/plugins/slate/scroll/index.ts"],"names":["editor","name","type","slate","onKeyDown","event","change","next","native","window","getSelection","top","left","width","height","range","getRangeAt","pos","getBoundingClientRect","cursorY","clientHeight","document","documentElement","scrollDiff","scrollTo","scrollY"],"mappings":"AAAA,gBAAe,YAAM;AACjB,SAAO;AACHA,IAAAA,MAAM,EAAE,CACJ;AACIC,MAAAA,IAAI,EAAE,+BADV;AAEIC,MAAAA,IAAI,EAAE,wBAFV;AAGIC,MAAAA,KAAK,EAAE;AACHC,QAAAA,SADG,qBACOC,KADP,EACcC,MADd,EACsBC,IADtB,EAC4B;AAC3B,cAAMC,MAAM,GAAGC,MAAM,CAACC,YAAP,EAAf;;AACA,cAAIF,MAAM,CAACN,IAAP,KAAgB,MAApB,EAA4B;AACxB,mBAAO;AAAES,cAAAA,GAAG,EAAE,CAAP;AAAUC,cAAAA,IAAI,EAAE,CAAhB;AAAmBC,cAAAA,KAAK,EAAE,CAA1B;AAA6BC,cAAAA,MAAM,EAAE;AAArC,aAAP;AACH;;AAED,cAAMC,KAAK,GAAGP,MAAM,CAACQ,UAAP,CAAkB,CAAlB,CAAd;AACA,cAAMC,GAAG,GAAGF,KAAK,CAACG,qBAAN,EAAZ;AAEA,cAAMC,OAAO,GAAGF,GAAG,CAACN,GAApB;AAT2B,cAUnBS,YAVmB,GAUFC,QAAQ,CAACC,eAVP,CAUnBF,YAVmB;AAW3B,cAAMN,MAAM,GAAGM,YAAY,GAAG,EAA9B;;AAEA,cAAID,OAAO,GAAGL,MAAd,EAAsB;AAClB,gBAAMS,UAAU,GAAGJ,OAAO,GAAGL,MAA7B;AACAL,YAAAA,MAAM,CAACe,QAAP,CAAgB,CAAhB,EAAmBf,MAAM,CAACgB,OAAP,GAAiBF,UAAjB,GAA8B,EAAjD;AACH;;AAED,iBAAOhB,IAAI,EAAX;AACH;AApBE;AAHX,KADI;AADL,GAAP;AA8BH,CA/BD","sourcesContent":["export default () => {\n    return {\n        editor: [\n            {\n                name: \"pb-editor-slate-editor-scroll\",\n                type: \"pb-editor-slate-editor\",\n                slate: {\n                    onKeyDown(event, change, next) {\n                        const native = window.getSelection();\n                        if (native.type === \"None\") {\n                            return { top: 0, left: 0, width: 0, height: 0 };\n                        }\n\n                        const range = native.getRangeAt(0);\n                        const pos = range.getBoundingClientRect();\n\n                        const cursorY = pos.top;\n                        const { clientHeight } = document.documentElement;\n                        const height = clientHeight - 50;\n\n                        if (cursorY > height) {\n                            const scrollDiff = cursorY - height;\n                            window.scrollTo(0, window.scrollY + scrollDiff + 20);\n                        }\n\n                        return next();\n                    }\n                }\n            }\n        ]\n    };\n};\n"],"file":"index.js"}