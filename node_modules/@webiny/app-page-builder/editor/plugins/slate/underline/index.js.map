{"version":3,"sources":["../../../../../src/editor/plugins/slate/underline/index.tsx"],"names":["React","isKeyHotkey","isUnderlineHotkey","hasMark","value","type","Boolean","activeMarks","find","mark","onClickMark","onChange","editor","change","toggleMark","menu","name","render","MenuButton","isActive","slate","onKeyDown","event","next","preventDefault","renderMark","props","attributes","children"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;;AAEA,SAASC,WAAT,QAA4B,WAA5B;AAKA,IAAMC,iBAAiB,GAAGD,WAAW,CAAC,OAAD,CAArC;;AAEA,IAAME,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAQC,IAAR,EAAiB;AAC7B,SAAOC,OAAO,CAACF,KAAK,CAACG,WAAN,CAAkBC,IAAlB,CAAuB,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAACJ,IAAL,KAAcA,IAAlB;AAAA,GAA3B,CAAD,CAAd;AACH,CAFD;;AAIA,IAAMK,WAAW,GAAG,SAAdA,WAAc,CAACL,IAAD,EAAOM,QAAP,EAAiBC,MAAjB,EAA4B;AAC5CA,EAAAA,MAAM,CAACC,MAAP,CAAc,UAAAA,MAAM;AAAA,WAAIF,QAAQ,CAACE,MAAM,CAACC,UAAP,CAAkBT,IAAlB,CAAD,CAAZ;AAAA,GAApB;AACH,CAFD;;AAIA,IAAMI,IAAI,GAAG,WAAb;AAEA,gBAAe,YAAM;AACjB,SAAO;AACHM,IAAAA,IAAI,EAAE,CACF;AACIC,MAAAA,IAAI,EAAE,qCADV;AAEIX,MAAAA,IAAI,EAAE,2BAFV;AAGIY,MAAAA,MAHJ,wBAG6C;AAAA,YAAhCC,UAAgC,QAAhCA,UAAgC;AAAA,YAApBN,MAAoB,QAApBA,MAAoB;AAAA,YAAZD,QAAY,QAAZA,QAAY;AACrC,YAAMQ,QAAQ,GAAGhB,OAAO,CAACS,MAAM,CAACR,KAAR,EAAeK,IAAf,CAAxB;AAEA;AAAA;AACI;AACA,8BAAC,UAAD;AACI,YAAA,OAAO,EAAE;AAAA,qBAAMC,WAAW,CAACD,IAAD,EAAOE,QAAP,EAAiBC,MAAjB,CAAjB;AAAA,aADb;AAEI,YAAA,MAAM,EAAEO;AAFZ,0BAII,oBAAC,aAAD,OAJJ;AAFJ;AASH;AAfL,KADE,CADH;AAoBHP,IAAAA,MAAM,EAAE,CACJ;AACII,MAAAA,IAAI,EAAE,kCADV;AAEIX,MAAAA,IAAI,EAAE,wBAFV;AAGIe,MAAAA,KAAK,EAAE;AACHC,QAAAA,SADG,qBACOC,KADP,EACcT,MADd,EACsBU,IADtB,EAC4B;AAC3B;AACA,cAAIrB,iBAAiB,CAACoB,KAAD,CAArB,EAA8B;AAC1BA,YAAAA,KAAK,CAACE,cAAN;AACAX,YAAAA,MAAM,CAACC,UAAP,CAAkBL,IAAlB;AACA,mBAAO,IAAP;AACH;;AAED,iBAAOc,IAAI,EAAX;AACH,SAVE;AAWHE,QAAAA,UAXG,sBAWQC,KAXR,EAWeH,IAXf,EAWqB;AACpB,cAAIG,KAAK,CAACjB,IAAN,CAAWJ,IAAX,KAAoBI,IAAxB,EAA8B;AAC1B,gCAAO,yBAAOiB,KAAK,CAACC,UAAb,EAA0BD,KAAK,CAACE,QAAhC,CAAP;AACH;;AACD,iBAAOL,IAAI,EAAX;AACH;AAhBE;AAHX,KADI;AApBL,GAAP;AA6CH,CA9CD","sourcesContent":["import * as React from \"react\";\nimport { ReactComponent as UnderlineIcon } from \"@webiny/app-page-builder/editor/assets/icons/format_underlined.svg\";\nimport { isKeyHotkey } from \"is-hotkey\";\nimport {\n    PbEditorSlateEditorPlugin,\n    PbEditorSlateMenuItemPlugin\n} from \"@webiny/app-page-builder/types\";\nconst isUnderlineHotkey = isKeyHotkey(\"mod+u\");\n\nconst hasMark = (value, type) => {\n    return Boolean(value.activeMarks.find(mark => mark.type === type));\n};\n\nconst onClickMark = (type, onChange, editor) => {\n    editor.change(change => onChange(change.toggleMark(type)));\n};\n\nconst mark = \"underline\";\n\nexport default () => {\n    return {\n        menu: [\n            {\n                name: \"pb-editor-slate-menu-item-underline\",\n                type: \"pb-editor-slate-menu-item\",\n                render({ MenuButton, editor, onChange }) {\n                    const isActive = hasMark(editor.value, mark);\n\n                    return (\n                        // eslint-disable-next-line react/jsx-no-bind\n                        <MenuButton\n                            onClick={() => onClickMark(mark, onChange, editor)}\n                            active={isActive}\n                        >\n                            <UnderlineIcon />\n                        </MenuButton>\n                    );\n                }\n            } as PbEditorSlateMenuItemPlugin\n        ],\n        editor: [\n            {\n                name: \"pb-editor-slate-editor-underline\",\n                type: \"pb-editor-slate-editor\",\n                slate: {\n                    onKeyDown(event, change, next) {\n                        // Decide what to do based on the key code...\n                        if (isUnderlineHotkey(event)) {\n                            event.preventDefault();\n                            change.toggleMark(mark);\n                            return true;\n                        }\n\n                        return next();\n                    },\n                    renderMark(props, next) {\n                        if (props.mark.type === mark) {\n                            return <u {...props.attributes}>{props.children}</u>;\n                        }\n                        return next();\n                    }\n                }\n            } as PbEditorSlateEditorPlugin\n        ]\n    };\n};\n"],"file":"index.js"}