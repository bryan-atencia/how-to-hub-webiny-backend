{"version":3,"sources":["../../../../../src/editor/plugins/slate/link/index.tsx"],"names":["React","Fragment","LinkDialog","LinkTooltip","menu","name","type","render","props","MenuButton","activatePlugin","renderDialog","editor","slate","renderNode","next","attributes","children","node","data","href","get","noFollow","rel","renderEditor","onChange"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;;AAEA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAMA,gBAAe,YAAM;AACjB,SAAO;AACHC,IAAAA,IAAI,EAAE,CACF;AACIC,MAAAA,IAAI,EAAE,gCADV;AAEIC,MAAAA,IAAI,EAAE,2BAFV;AAGIC,MAAAA,MAHJ,kBAGWC,KAHX,EAGkB;AAAA;;AAAA,YACFC,UADE,GACaD,KADb,CACFC,UADE;AAGV,4BACI,oBAAC,UAAD;AAAY,UAAA,WAAW,EAAE;AAAA,mBAAMD,KAAK,CAACE,cAAN,CAAqB,KAAI,CAACL,IAA1B,CAAN;AAAA;AAAzB,wBACI,oBAAC,QAAD,OADJ,CADJ;AAKH,OAXL;AAYIM,MAAAA,YAZJ,wBAYiBH,KAZjB,EAYwB;AAChB,4BAAO,oBAAC,UAAD,EAAgBA,KAAhB,CAAP;AACH;AAdL,KADE,CADH;AAmBHI,IAAAA,MAAM,EAAE,CACJ;AACIP,MAAAA,IAAI,EAAE,6BADV;AAEIC,MAAAA,IAAI,EAAE,wBAFV;AAGIO,MAAAA,KAAK,EAAE;AACHC,QAAAA,UADG,sBACQN,KADR,EACeO,IADf,EACqB;AAAA,cACZC,UADY,GACmBR,KADnB,CACZQ,UADY;AAAA,cACAC,QADA,GACmBT,KADnB,CACAS,QADA;AAAA,cACUC,IADV,GACmBV,KADnB,CACUU,IADV,EAGpB;;AACA,cAAIA,IAAI,CAACZ,IAAL,KAAc,MAAlB,EAA0B;AACtB;AADsB,gBAEda,IAFc,GAELD,IAFK,CAEdC,IAFc;AAGtB,gBAAMC,IAAI,GAAGD,IAAI,CAACE,GAAL,CAAS,MAAT,CAAb;AACA,gBAAMC,QAAQ,GAAGH,IAAI,CAACE,GAAL,CAAS,UAAT,CAAjB;AACA,gCACI,2CAAOL,UAAP,EAAuB;AAAEI,cAAAA,IAAI,EAAJA,IAAF;AAAQG,cAAAA,GAAG,EAAED,QAAQ,GAAG,UAAH,GAAgB;AAArC,aAAvB,GACKL,QADL,CADJ;AAKH;;AAED,iBAAOF,IAAI,EAAX;AACH,SAlBE;AAmBHS,QAAAA,YAnBG,8BAmBgDT,IAnBhD,EAmBsD;AAAA,cAA1CH,MAA0C,QAA1CA,MAA0C;AAAA,cAAlCa,QAAkC,QAAlCA,QAAkC;AAAA,cAAxBf,cAAwB,QAAxBA,cAAwB;AACrD;AACA,cAAMO,QAAQ,GAAGF,IAAI,EAArB;AAEA,8BACI,oBAAC,QAAD,QACKE,QADL,eAEI,oBAAC,WAAD;AACI,YAAA,MAAM,EAAEL,MADZ;AAEI,YAAA,QAAQ,EAAEa,QAFd;AAGI,YAAA,cAAc,EAAEf;AAHpB,YAFJ,CADJ;AAUH;AAjCE;AAHX,KADI;AAnBL,GAAP;AA6DH,CA9DD","sourcesContent":["import React, { Fragment } from \"react\";\nimport { ReactComponent as LinkIcon } from \"@webiny/app-page-builder/editor/assets/icons/link.svg\";\nimport LinkDialog from \"./LinkDialog\";\nimport LinkTooltip from \"./LinkTooltip\";\nimport {\n    PbEditorSlateEditorPlugin,\n    PbEditorSlateMenuItemPlugin\n} from \"@webiny/app-page-builder/types\";\n\nexport default () => {\n    return {\n        menu: [\n            {\n                name: \"pb-editor-slate-menu-item-link\",\n                type: \"pb-editor-slate-menu-item\",\n                render(props) {\n                    const { MenuButton } = props;\n\n                    return (\n                        <MenuButton onMouseDown={() => props.activatePlugin(this.name)}>\n                            <LinkIcon />\n                        </MenuButton>\n                    );\n                },\n                renderDialog(props) {\n                    return <LinkDialog {...props} />;\n                }\n            } as PbEditorSlateMenuItemPlugin\n        ],\n        editor: [\n            {\n                name: \"pb-editor-slate-editor-link\",\n                type: \"pb-editor-slate-editor\",\n                slate: {\n                    renderNode(props, next) {\n                        const { attributes, children, node } = props;\n\n                        // @ts-ignore\n                        if (node.type === \"link\") {\n                            // @ts-ignore\n                            const { data } = node;\n                            const href = data.get(\"href\");\n                            const noFollow = data.get(\"noFollow\");\n                            return (\n                                <a {...attributes} {...{ href, rel: noFollow ? \"nofollow\" : null }}>\n                                    {children}\n                                </a>\n                            );\n                        }\n\n                        return next();\n                    },\n                    renderEditor({ editor, onChange, activatePlugin }, next) {\n                        // @ts-ignore\n                        const children = next();\n\n                        return (\n                            <Fragment>\n                                {children}\n                                <LinkTooltip\n                                    editor={editor}\n                                    onChange={onChange}\n                                    activatePlugin={activatePlugin}\n                                />\n                            </Fragment>\n                        );\n                    }\n                }\n            } as PbEditorSlateEditorPlugin\n        ]\n    };\n};\n"],"file":"index.js"}