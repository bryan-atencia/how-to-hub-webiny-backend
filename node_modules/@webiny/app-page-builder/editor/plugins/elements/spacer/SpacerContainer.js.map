{"version":3,"sources":["../../../../../src/editor/plugins/elements/spacer/SpacerContainer.tsx"],"names":["React","useState","css","styled","set","useHandlers","connect","Resizer","updateElement","getElement","resizeStart","resizeStop","SpacerHandle","height","width","position","left","bottom","SpacerHeight","top","color","fontSize","padding","borderRadius","MIN_HEIGHT","INIT_HEIGHT","SpacerContainer","props","elementStyle","customClasses","combineClassNames","localHeight","setHeight","initialHeight","spacerStyle","onResizeStart","element","onResizeStop","onResize","diff","Math","max","otherProps","state","elementId"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { css } from \"emotion\";\nimport styled from \"@emotion/styled\";\nimport { set } from \"dot-prop-immutable\";\nimport { get } from \"lodash\";\nimport { useHandlers } from \"@webiny/app/hooks/useHandlers\";\nimport { connect } from \"@webiny/app-page-builder/editor/redux\";\nimport Resizer from \"@webiny/app-page-builder/editor/components/Resizer\";\nimport { updateElement } from \"@webiny/app-page-builder/editor/actions\";\nimport { getElement } from \"@webiny/app-page-builder/editor/selectors\";\nimport { resizeStart, resizeStop } from \"./actions\";\n\nconst SpacerHandle = styled(\"div\")({\n    height: \"100%\",\n    width: \"100%\",\n    position: \"absolute\",\n    left: 0,\n    bottom: -8\n});\n\nconst SpacerHeight = styled(\"div\")({\n    position: \"absolute\",\n    width: 50,\n    top: \"calc(50% - 12px)\",\n    left: \"calc(50% - 25px)\",\n    color: \"white\",\n    fontSize: 12,\n    padding: 5,\n    borderRadius: 5\n});\n\nexport const MIN_HEIGHT = 20;\nexport const INIT_HEIGHT = 100;\n\nconst SpacerContainer = props => {\n    const { elementStyle, customClasses, combineClassNames } = props;\n\n    const [localHeight, setHeight] = useState(null);\n    const { initialHeight = MIN_HEIGHT, ...spacerStyle } = elementStyle;\n    let height = initialHeight;\n    if (localHeight) {\n        height = localHeight;\n    }\n\n    const { onResizeStart, onResizeStop, onResize } = useHandlers(props, {\n        onResizeStart: ({ element, resizeStart }) => () => {\n            resizeStart();\n            setHeight(get(element, \"data.settings.height.value\", MIN_HEIGHT));\n        },\n        onResizeStop: ({ updateElement, element, resizeStop }) => () => {\n            resizeStop();\n            updateElement({ element: set(element, \"data.settings.height.value\", localHeight) });\n            setHeight(null);\n        },\n        onResize: () => diff => {\n            setHeight(Math.max(MIN_HEIGHT, localHeight - diff));\n        }\n    });\n\n    return (\n        <div style={{ height }} className={combineClassNames(css(spacerStyle), ...customClasses)}>\n            <Resizer\n                axis={\"y\"}\n                onResizeStart={onResizeStart}\n                onResizeStop={onResizeStop}\n                onResize={onResize}\n            >\n                {({ ...otherProps }) => (\n                    <React.Fragment>\n                        <SpacerHeight>\n                            {height}\n                            px\n                        </SpacerHeight>\n\n                        <SpacerHandle {...otherProps} />\n                    </React.Fragment>\n                )}\n            </Resizer>\n        </div>\n    );\n};\n\nexport default connect<any, any, any>(\n    (state, props) => ({ element: getElement(state, props.elementId) }),\n    { updateElement, resizeStart, resizeStop }\n)(SpacerContainer);\n"],"file":"SpacerContainer.js"}