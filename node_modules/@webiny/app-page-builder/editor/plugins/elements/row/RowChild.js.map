{"version":3,"sources":["../../../../../src/editor/plugins/elements/row/RowChild.tsx"],"names":["React","useCallback","css","styled","useHandlers","connect","DropZone","Resizer","Element","dropElement","getIsDragging","ResizeHandle","ColumnContainer","position","display","noPointer","pointerEvents","RowChild","memo","props","onResize","onResizeStop","target","resizing","element","index","leftElement","last","resize","diff","resizeStart","onResizeStart","dropElementLeft","source","dropElementRight","count","width","resizeProps","data","type","id","state","isDragging"],"mappings":"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","sourcesContent":["import React, { useCallback } from \"react\";\nimport { css } from \"emotion\";\nimport { get } from \"lodash\";\nimport styled from \"@emotion/styled\";\nimport { useHandlers } from \"@webiny/app/hooks/useHandlers\";\nimport { connect } from \"@webiny/app-page-builder/editor/redux\";\nimport DropZone from \"@webiny/app-page-builder/editor/components/DropZone\";\nimport Resizer from \"@webiny/app-page-builder/editor/components/Resizer\";\nimport Element from \"@webiny/app-page-builder/editor/components/Element\";\nimport { dropElement } from \"@webiny/app-page-builder/editor/actions\";\nimport { getIsDragging } from \"@webiny/app-page-builder/editor/selectors\";\nimport ResizeHandle from \"./ResizeHandle\";\nimport { PbElement } from \"@webiny/app-page-builder/types\";\n\nconst ColumnContainer = styled(\"div\")({\n    position: \"relative\",\n    display: \"flex\",\n    \"&:hover\": {\n        \">.resize-handle\": {\n            display: \"block !important\"\n        }\n    }\n});\n\ntype Props = {\n    resizing: boolean;\n    element: PbElement;\n    leftElement: PbElement;\n    index: number;\n    last: boolean;\n    target: { type: string };\n    dropElementLeft: Function;\n    dropElementRight: Function;\n    resizeStart: Function;\n    resizeStop: Function;\n    resize: Function;\n    onResize(position: number): void;\n    onResizeStop(): void;\n};\n\nconst noPointer = css({\n    \"> *\": {\n        pointerEvents: \"none\"\n    }\n});\n\nconst RowChild = React.memo((props: Props) => {\n    const {\n        onResize,\n        onResizeStop,\n        target,\n        resizing,\n        element,\n        index,\n        leftElement,\n        last = false\n    } = props;\n\n    const resize = useCallback(diff => onResize(diff), [onResize]);\n\n    const { resizeStart, dropElementLeft, dropElementRight } = useHandlers(props, {\n        resizeStart: ({ onResizeStart, element, leftElement }) => () => {\n            onResizeStart(leftElement, element);\n        },\n        dropElementLeft: ({ target, index, dropElement }) => source => {\n            dropElement({ source, target: { ...target, position: index } });\n        },\n        dropElementRight: ({ target, count, dropElement }) => source => {\n            dropElement({ source, target: { ...target, position: count } });\n        }\n    });\n\n    return (\n        <ColumnContainer\n            data-type=\"row-column-container\"\n            style={{ width: get(element, \"data.width\", 100) + \"%\", position: \"relative\" }}\n        >\n            {index > 0 && (\n                <Resizer\n                    axis={\"x\"}\n                    onResizeStart={resizeStart}\n                    onResizeStop={onResizeStop}\n                    onResize={resize}\n                >\n                    {resizeProps => (\n                        <ResizeHandle\n                            {...resizeProps}\n                            leftWidth={leftElement.data.width}\n                            rightWidth={element.data.width}\n                        />\n                    )}\n                </Resizer>\n            )}\n            <DropZone.Left type={target.type} onDrop={dropElementLeft} />\n            <Element id={element.id} className={resizing && noPointer} />\n            {last && <DropZone.Right type={target.type} onDrop={dropElementRight} />}\n        </ColumnContainer>\n    );\n});\n\nexport default connect<any, any, any>(\n    state => ({\n        isDragging: getIsDragging(state)\n    }),\n    { dropElement }\n)(RowChild);\n"],"file":"RowChild.js"}