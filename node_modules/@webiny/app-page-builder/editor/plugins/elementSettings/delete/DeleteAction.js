import React from "react";
import { useHandler } from "@webiny/app/hooks/useHandler";
import { connect } from "@webiny/app-page-builder/editor/redux";
import { getPlugins } from "@webiny/plugins";
import { deleteElement } from "@webiny/app-page-builder/editor/actions";
import { getActiveElement } from "@webiny/app-page-builder/editor/selectors";

var DeleteAction = function DeleteAction(props) {
  var element = props.element,
      children = props.children;
  var onClick = useHandler(props, function (_ref) {
    var element = _ref.element,
        deleteElement = _ref.deleteElement;
    return function () {
      deleteElement({
        element: element
      });
    };
  });
  var plugin = getPlugins("pb-editor-page-element").find(function (pl) {
    return pl.elementType === element.type;
  });

  if (!plugin) {
    return null;
  }

  if (typeof plugin.canDelete === "function") {
    if (!plugin.canDelete({
      element: element
    })) {
      return null;
    }
  }

  return /*#__PURE__*/React.cloneElement(children, {
    onClick: onClick
  });
};

export default connect(function (state) {
  return {
    element: getActiveElement(state)
  };
}, {
  deleteElement: deleteElement
})(DeleteAction);
//# sourceMappingURL=DeleteAction.js.map