{"version":3,"sources":["../../../../../src/editor/plugins/elementSettings/width/Settings.tsx"],"names":["React","set","connect","useHandler","Tabs","Tab","Input","InputContainer","Typography","Grid","Cell","Form","updateElement","getActiveElement","validateWidth","value","isNaN","parseInt","Error","endsWith","Settings","props","updateSettings","element","data","form","validate","valid","attrKey","newElement","settings","Bind","state"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { get } from \"lodash\";\nimport { set } from \"dot-prop-immutable\";\nimport { connect } from \"@webiny/app-page-builder/editor/redux\";\nimport { useHandler } from \"@webiny/app/hooks/useHandler\";\nimport { Tabs, Tab } from \"@webiny/ui/Tabs\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { InputContainer } from \"@webiny/app-page-builder/editor/plugins/elementSettings/components/StyledComponents\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { Grid, Cell } from \"@webiny/ui/Grid\";\nimport { Form } from \"@webiny/form\";\nimport { updateElement } from \"@webiny/app-page-builder/editor/actions\";\nimport { getActiveElement } from \"@webiny/app-page-builder/editor/selectors\";\n\nconst validateWidth = value => {\n    if (!value) {\n        return null;\n    }\n\n    if (isNaN(parseInt(value))) {\n        throw Error(\"Enter a valid number!\");\n    }\n\n    if (value.endsWith(\"%\") || value.endsWith(\"px\")) {\n        return true;\n    }\n\n    throw Error(\"Specify % or px!\");\n};\n\nconst Settings = props => {\n    const updateSettings = useHandler(props, ({ element, updateElement }) => async (data, form) => {\n        const valid = await form.validate();\n        if (!valid) {\n            return;\n        }\n\n        const attrKey = `data.settings.width`;\n        const newElement = set(element, attrKey, data);\n\n        updateElement({ element: newElement });\n    });\n\n    const { data } = props.element;\n\n    const settings = get(data, \"settings.width\", { value: \"100%\" });\n\n    return (\n        <Form data={settings} onChange={updateSettings}>\n            {({ Bind }) => (\n                <Tabs>\n                    <Tab label={\"Width\"}>\n                        <Grid>\n                            <Cell span={5}>\n                                <Typography use={\"overline\"}>Width</Typography>\n                            </Cell>\n                            <Cell span={7}>\n                                <InputContainer width={\"auto\"} margin={0}>\n                                    <Bind name={\"value\"} validators={validateWidth}>\n                                        <Input />\n                                    </Bind>\n                                </InputContainer>\n                            </Cell>\n                        </Grid>\n                    </Tab>\n                </Tabs>\n            )}\n        </Form>\n    );\n};\n\nexport default connect<any, any, any>(\n    state => ({ element: getActiveElement(state) }),\n    { updateElement }\n)(Settings);\n"],"file":"Settings.js"}