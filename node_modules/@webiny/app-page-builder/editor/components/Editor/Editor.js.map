{"version":3,"sources":["../../../../src/editor/components/Editor/Editor.tsx"],"names":["React","useEffect","connect","classSet","ActionCreators","HTML5Backend","DndProvider","getUi","useKeyHandler","EditorBar","EditorToolbar","EditorContent","DragPreview","Dialogs","EditorComponent","isDragging","isResizing","undo","redo","slateFocused","addKeyHandler","removeKeyHandler","e","preventDefault","classes","Editor","state","ui","dragging","resizing"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,uCAAxB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,cAAT,QAA+B,YAA/B;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,SAASC,WAAT,QAA4B,WAA5B;AACA,SAASC,KAAT,QAAsB,2CAAtB;AACA,SAASC,aAAT,QAA8B,qDAA9B;AACA,OAAO,eAAP,C,CAEA;;AACA,OAAOC,SAAP,MAAsB,OAAtB;AACA,OAAOC,aAAP,MAA0B,WAA1B;AACA,OAAOC,aAAP,MAA0B,WAA1B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAYA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,OAAuE;AAAA,MAApEC,UAAoE,QAApEA,UAAoE;AAAA,MAAxDC,UAAwD,QAAxDA,UAAwD;AAAA,MAA5CC,IAA4C,QAA5CA,IAA4C;AAAA,MAAtCC,IAAsC,QAAtCA,IAAsC;AAAA,MAAhCC,YAAgC,QAAhCA,YAAgC;;AAAA,uBAC/CX,aAAa,EADkC;AAAA,MACnFY,aADmF,kBACnFA,aADmF;AAAA,MACpEC,gBADoE,kBACpEA,gBADoE;;AAG3FpB,EAAAA,SAAS,CAAC,YAAM;AACZmB,IAAAA,aAAa,CAAC,OAAD,EAAU,UAAAE,CAAC,EAAI;AACxB,UAAI,CAACH,YAAL,EAAmB;AACfG,QAAAA,CAAC,CAACC,cAAF;AACAN,QAAAA,IAAI;AACP;AACJ,KALY,CAAb;AAMAG,IAAAA,aAAa,CAAC,aAAD,EAAgB,UAAAE,CAAC,EAAI;AAC9B,UAAI,CAACH,YAAL,EAAmB;AACfG,QAAAA,CAAC,CAACC,cAAF;AACAL,QAAAA,IAAI;AACP;AACJ,KALY,CAAb;AAOA,WAAO,YAAM;AACTG,MAAAA,gBAAgB,CAAC,OAAD,CAAhB;AACAA,MAAAA,gBAAgB,CAAC,aAAD,CAAhB;AACH,KAHD;AAIH,GAlBQ,CAAT;AAoBA,MAAMG,OAAO,GAAG;AACZ,iBAAa,IADD;AAEZ,0BAAsBT,UAFV;AAGZ,0BAAsBC;AAHV,GAAhB;AAKA,sBACI,oBAAC,WAAD;AAAa,IAAA,OAAO,EAAEX;AAAtB,kBACI;AAAK,IAAA,SAAS,EAAEF,QAAQ,CAACqB,OAAD;AAAxB,kBACI,oBAAC,SAAD,OADJ,eAEI,oBAAC,aAAD,OAFJ,eAGI,oBAAC,aAAD,OAHJ,eAII,oBAAC,OAAD,OAJJ,eAKI,oBAAC,WAAD,OALJ,CADJ,CADJ;AAWH,CAvCD;;AAyCA,OAAO,IAAMC,MAAM,GAAGvB,OAAO,CACzB,UAAAwB,KAAK,EAAI;AACL,MAAMC,EAAE,GAAGpB,KAAK,CAACmB,KAAD,CAAhB;AAEA,SAAO;AACHP,IAAAA,YAAY,EAAEQ,EAAE,CAACR,YADd;AAEHJ,IAAAA,UAAU,EAAEY,EAAE,CAACC,QAFZ;AAGHZ,IAAAA,UAAU,EAAEW,EAAE,CAACE;AAHZ,GAAP;AAKH,CATwB,EAUzB;AACIZ,EAAAA,IAAI,EAAEb,cAAc,CAACa,IADzB;AAEIC,EAAAA,IAAI,EAAEd,cAAc,CAACc;AAFzB,CAVyB,CAAP,CAcpBJ,eAdoB,CAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { connect } from \"@webiny/app-page-builder/editor/redux\";\nimport classSet from \"classnames\";\nimport { ActionCreators } from \"redux-undo\";\nimport HTML5Backend from \"react-dnd-html5-backend\";\nimport { DndProvider } from \"react-dnd\";\nimport { getUi } from \"@webiny/app-page-builder/editor/selectors\";\nimport { useKeyHandler } from \"@webiny/app-page-builder/editor/hooks/useKeyHandler\";\nimport \"./Editor.scss\";\n\n// Components\nimport EditorBar from \"./Bar\";\nimport EditorToolbar from \"./Toolbar\";\nimport EditorContent from \"./Content\";\nimport DragPreview from \"./DragPreview\";\nimport Dialogs from \"./Dialogs\";\n\nexport type EditorProps = {\n    isDragging: boolean;\n    isResizing: boolean;\n    undo: Function;\n    redo: Function;\n    addKeyHandler: Function;\n    removeKeyHandler: Function;\n    slateFocused: boolean;\n};\n\nconst EditorComponent = ({ isDragging, isResizing, undo, redo, slateFocused }: EditorProps) => {\n    const { addKeyHandler, removeKeyHandler } = useKeyHandler();\n\n    useEffect(() => {\n        addKeyHandler(\"mod+z\", e => {\n            if (!slateFocused) {\n                e.preventDefault();\n                undo();\n            }\n        });\n        addKeyHandler(\"mod+shift+z\", e => {\n            if (!slateFocused) {\n                e.preventDefault();\n                redo();\n            }\n        });\n\n        return () => {\n            removeKeyHandler(\"mod+z\");\n            removeKeyHandler(\"mod+shift+z\");\n        };\n    });\n\n    const classes = {\n        \"pb-editor\": true,\n        \"pb-editor-dragging\": isDragging,\n        \"pb-editor-resizing\": isResizing\n    };\n    return (\n        <DndProvider backend={HTML5Backend}>\n            <div className={classSet(classes)}>\n                <EditorBar />\n                <EditorToolbar />\n                <EditorContent />\n                <Dialogs />\n                <DragPreview />\n            </div>\n        </DndProvider>\n    );\n};\n\nexport const Editor = connect<any, any, any>(\n    state => {\n        const ui = getUi(state);\n\n        return {\n            slateFocused: ui.slateFocused,\n            isDragging: ui.dragging,\n            isResizing: ui.resizing\n        };\n    },\n    {\n        undo: ActionCreators.undo,\n        redo: ActionCreators.redo\n    }\n)(EditorComponent);\n"],"file":"Editor.js"}