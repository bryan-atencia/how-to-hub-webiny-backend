{"version":3,"sources":["../../../src/editor/components/IconPicker.tsx"],"names":["React","css","getPlugins","Typography","Grid","FontAwesomeIcon","DelayedOnChange","Menu","Input","COLUMN_COUNT","gridItem","display","flexDirection","justifyContent","boxSizing","paddingTop","alignItems","textAlign","cursor","transform","borderRadius","color","transition","boxShadow","content","position","top","left","width","height","zIndex","opacity","backgroundColor","marginBottom","grid","padding","pickIcon","searchInput","input","useState","useCallback","useMemo","Fragment","IconPicker","value","onChange","filter","setFilter","onFilterChange","cb","trim","allIcons","plugins","reduce","icons","pl","concat","getIcons","ic","name","includes","renderCell","closeMenu","columnIndex","key","rowIndex","style","item","id","renderGrid","Math","ceil","length"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { css } from \"emotion\";\nimport { getPlugins } from \"@webiny/plugins\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { Grid } from \"react-virtualized\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { DelayedOnChange } from \"@webiny/app-page-builder/editor/components/DelayedOnChange\";\nimport { Menu } from \"@webiny/ui/Menu\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { PbIcon, PbIconsPlugin } from \"@webiny/app-page-builder/types\";\n\nconst COLUMN_COUNT = 6;\n\nconst gridItem = css({\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n    boxSizing: \"border-box\",\n    paddingTop: 15,\n    alignItems: \"center\",\n    textAlign: \"center\",\n    cursor: \"pointer\",\n    transform: \"translateZ(0)\",\n    borderRadius: 2,\n    color: \"var(--mdc-theme-text-secondary-on-background)\",\n    transition: \"all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)\",\n    \"&::after\": {\n        boxShadow: \"0 0.25rem 0.125rem 0 rgba(0,0,0,0.05)\",\n        transition: \"opacity 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)\",\n        content: '\"\"',\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: -1,\n        opacity: 0\n    },\n    \"&:hover\": {\n        backgroundColor: \"var(--mdc-theme-background)\",\n        color: \"var(--mdc-theme-text-primary-on-background)\",\n        \"&::after\": {\n            opacity: 1\n        }\n    },\n    \">svg\": {\n        width: 42,\n        marginBottom: 5\n    }\n});\n\nconst grid = css({\n    padding: 20\n});\n\nconst pickIcon = css({\n    width: 50,\n    textAlign: \"center\",\n    cursor: \"pointer\"\n});\n\nconst searchInput = css({\n    input: {\n        padding: \"20px 12px 20px\",\n        \"&::placeholder\": {\n            opacity: \"1 !important\"\n        }\n    }\n});\n\nconst { useState, useCallback, useMemo, Fragment } = React;\n\nconst IconPicker = ({ value, onChange }) => {\n    const [filter, setFilter] = useState(\"\");\n\n    const onFilterChange = useCallback(\n        (value, cb) => {\n            setFilter(value.trim());\n            cb();\n        },\n        [filter]\n    );\n\n    const allIcons: PbIcon[] = useMemo(() => {\n        const plugins = getPlugins<PbIconsPlugin>(\"pb-icons\");\n        return plugins.reduce((icons: Array<PbIcon>, pl) => {\n            return icons.concat(pl.getIcons());\n        }, []);\n    }, []);\n\n    const icons = useMemo(() => {\n        return filter ? allIcons.filter(ic => ic.name.includes(filter)) : allIcons;\n    }, [filter]);\n\n    const renderCell = useCallback(\n        ({ closeMenu }) => {\n            return function renderCell({ columnIndex, key, rowIndex, style }) {\n                const item = icons[rowIndex * COLUMN_COUNT + columnIndex];\n                if (!item) {\n                    return null;\n                }\n\n                return (\n                    <div\n                        key={key}\n                        style={style}\n                        className={gridItem}\n                        onClick={() => {\n                            onChange(item);\n                            closeMenu();\n                        }}\n                    >\n                        <FontAwesomeIcon icon={item.id} size={\"2x\"} />\n                        <Typography use={\"body2\"}>{item.name}</Typography>\n                    </div>\n                );\n            };\n        },\n        [icons]\n    );\n\n    const renderGrid = useCallback(\n        ({ closeMenu }) => {\n            return (\n                <Fragment>\n                    <DelayedOnChange value={filter} onChange={onFilterChange}>\n                        {({ value, onChange }) => (\n                            <Input\n                                autoFocus\n                                className={searchInput}\n                                value={value}\n                                onChange={onChange}\n                                placeholder={\"Search icons...\"}\n                            />\n                        )}\n                    </DelayedOnChange>\n                    <Grid\n                        className={grid}\n                        cellRenderer={renderCell({ closeMenu })}\n                        columnCount={COLUMN_COUNT}\n                        columnWidth={100}\n                        height={440}\n                        rowCount={Math.ceil(icons.length / COLUMN_COUNT)}\n                        rowHeight={100}\n                        width={640}\n                    />\n                </Fragment>\n            );\n        },\n        [icons]\n    );\n\n    return (\n        <Menu\n            handle={\n                <div className={pickIcon}>\n                    <FontAwesomeIcon icon={value || [\"far\", \"star\"]} size={\"2x\"} />\n                </div>\n            }\n        >\n            {renderGrid}\n        </Menu>\n    );\n};\n\nexport default IconPicker;\n"],"file":"IconPicker.js"}