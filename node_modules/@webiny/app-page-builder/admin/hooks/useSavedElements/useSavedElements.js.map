{"version":3,"sources":["../../../../src/admin/hooks/useSavedElements/useSavedElements.ts"],"names":["useState","useQuery","get","LIST_ELEMENTS","createElementPlugin","createBlockPlugin","useSavedElements","ready","setReady","skip","data","loading","elements","forEach","el","type"],"mappings":";AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,GAAT,QAAoB,oBAApB;AACA,SAASC,aAAT,QAA8B,8CAA9B;AACA,OAAOC,mBAAP,MAAgC,iCAAhC;AACA,OAAOC,iBAAP,MAA8B,+BAA9B;AAEA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAAA,kBACRN,QAAQ,CAAC,KAAD,CADA;AAAA;AAAA,MAC3BO,KAD2B;AAAA,MACpBC,QADoB;;AAAA,kBAGRP,QAAQ,CAACE,aAAD,EAAgB;AAAEM,IAAAA,IAAI,EAAEF;AAAR,GAAhB,CAHA;AAAA,MAG1BG,IAH0B,aAG1BA,IAH0B;AAAA,MAGpBC,OAHoB,aAGpBA,OAHoB;;AAKlC,MAAIJ,KAAJ,EAAW;AACP,WAAO,IAAP;AACH;;AAED,MAAII,OAAJ,EAAa;AACT,WAAO,KAAP;AACH;;AAED,MAAMC,QAAQ,GAAGV,GAAG,CAACQ,IAAD,EAAO,2BAAP,CAApB;;AACA,MAAI,CAACH,KAAL,EAAY;AACRK,IAAAA,QAAQ,CAACC,OAAT,CAAiB,UAAAC,EAAE,EAAI;AACnB,UAAIA,EAAE,CAACC,IAAH,KAAY,SAAhB,EAA2B;AACvBX,QAAAA,mBAAmB,CAACU,EAAD,CAAnB;AACH,OAFD,MAEO;AACHT,QAAAA,iBAAiB,CAACS,EAAD,CAAjB;AACH;AACJ,KAND;AAOAN,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACH;;AAED,SAAOD,KAAP;AACH,CA1BM","sourcesContent":["import { useState } from \"react\";\nimport { useQuery } from \"react-apollo\";\nimport { get } from \"dot-prop-immutable\";\nimport { LIST_ELEMENTS } from \"@webiny/app-page-builder/admin/graphql/pages\";\nimport createElementPlugin from \"../../utils/createElementPlugin\";\nimport createBlockPlugin from \"../../utils/createBlockPlugin\";\n\nexport const useSavedElements = () => {\n    const [ready, setReady] = useState(false);\n\n    const { data, loading } = useQuery(LIST_ELEMENTS, { skip: ready });\n\n    if (ready) {\n        return true;\n    }\n\n    if (loading) {\n        return false;\n    }\n\n    const elements = get(data, \"pageBuilder.elements.data\");\n    if (!ready) {\n        elements.forEach(el => {\n            if (el.type === \"element\") {\n                createElementPlugin(el);\n            } else {\n                createBlockPlugin(el);\n            }\n        });\n        setReady(true);\n    }\n\n    return ready;\n};\n"],"file":"useSavedElements.js"}