{"version":3,"sources":["../../../../../../src/admin/views/Menus/MenusForm/MenuItems/MenuItemForm.tsx"],"names":["uniqid","useHandlers","getPlugins","findObject","MenuItemForm","props","onCancel","editItem","currentMenuItem","deleteItem","__new","onSubmit","items","onChange","data","item","id","target","source","index","plugins","plugin","find","pl","menuItem","type","renderForm"],"mappings":";;;;AACA,OAAOA,MAAP,MAAmB,QAAnB;AACA,SAASC,WAAT,QAA4B,+BAA5B;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,OAAOC,UAAP,MAAuB,cAAvB;;AAGA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,KAAK,EAAI;AAAA,qBACKJ,WAAW,CAACI,KAAD,EAAQ;AAC9CC,IAAAA,QAAQ,EAAE;AAAA,UAAGC,QAAH,QAAGA,QAAH;AAAA,UAAaC,eAAb,QAAaA,eAAb;AAAA,UAA8BC,UAA9B,QAA8BA,UAA9B;AAAA,aAA+C,YAAM;AAC3D,YAAID,eAAe,CAACE,KAApB,EAA2B;AACvBD,UAAAA,UAAU,CAACD,eAAD,CAAV;AACH,SAFD,MAEO;AACHD,UAAAA,QAAQ,CAAC,IAAD,CAAR;AACH;AACJ,OANS;AAAA,KADoC;AAQ9CI,IAAAA,QAAQ,EAAE;AAAA,UAAGC,KAAH,SAAGA,KAAH;AAAA,UAAUC,QAAV,SAAUA,QAAV;AAAA,UAAoBN,QAApB,SAAoBA,QAApB;AAAA,aAAmC,UAAAO,IAAI,EAAI;AACjD,YAAMC,IAAI,GAAG,MAAK,QAAOD,IAAP,UAAL,EAA2B,CAAC,OAAD,CAA3B,CAAb;;AACA,YAAIC,IAAI,CAACC,EAAT,EAAa;AACT,cAAMC,MAAM,GAAGd,UAAU,CAACS,KAAD,EAAQG,IAAI,CAACC,EAAb,CAAzB;;AACA,cAAIC,MAAJ,EAAY;AACRA,YAAAA,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACE,KAArB,IAA8BJ,IAA9B;AACAF,YAAAA,QAAQ,oBAAKD,KAAL,EAAR;AACH;AACJ,SAND,MAMO;AACHG,UAAAA,IAAI,CAACC,EAAL,GAAUhB,MAAM,EAAhB;AACAa,UAAAA,QAAQ,8BAAKD,KAAL,IAAYG,IAAZ,GAAR;AACH;;AAEDR,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACH,OAdS;AAAA;AARoC,GAAR,CADhB;AAAA,MAClBD,QADkB,gBAClBA,QADkB;AAAA,MACRK,QADQ,gBACRA,QADQ;;AAAA,MA0BlBH,eA1BkB,GA0BEH,KA1BF,CA0BlBG,eA1BkB;AA2B1B,MAAMY,OAAO,GAAGlB,UAAU,CAAmB,cAAnB,CAA1B;AACA,MAAMmB,MAAM,GAAGD,OAAO,CAACE,IAAR,CAAa,UAAAC,EAAE;AAAA,WAAIA,EAAE,CAACC,QAAH,CAAYC,IAAZ,KAAqBjB,eAAe,CAACiB,IAAzC;AAAA,GAAf,CAAf;;AACA,MAAI,CAACJ,MAAL,EAAa;AACT,WAAO,IAAP;AACH;;AACD,SAAOA,MAAM,CAACG,QAAP,CAAgBE,UAAhB,CAA2B;AAAEf,IAAAA,QAAQ,EAARA,QAAF;AAAYL,IAAAA,QAAQ,EAARA,QAAZ;AAAsBQ,IAAAA,IAAI,EAAEN;AAA5B,GAA3B,CAAP;AACH,CAjCD;;AAmCA,eAAeJ,YAAf","sourcesContent":["import { omit, omitBy, isNull } from \"lodash\";\nimport uniqid from \"uniqid\";\nimport { useHandlers } from \"@webiny/app/hooks/useHandlers\";\nimport { getPlugins } from \"@webiny/plugins\";\nimport findObject from \"./findObject\";\nimport { PbMenuItemPlugin } from \"@webiny/app-page-builder/types\";\n\nconst MenuItemForm = props => {\n    const { onCancel, onSubmit } = useHandlers(props, {\n        onCancel: ({ editItem, currentMenuItem, deleteItem }) => () => {\n            if (currentMenuItem.__new) {\n                deleteItem(currentMenuItem);\n            } else {\n                editItem(null);\n            }\n        },\n        onSubmit: ({ items, onChange, editItem }) => data => {\n            const item = omit(omitBy(data, isNull), [\"__new\"]);\n            if (item.id) {\n                const target = findObject(items, item.id);\n                if (target) {\n                    target.source[target.index] = item;\n                    onChange([...items]);\n                }\n            } else {\n                item.id = uniqid();\n                onChange([...items, item]);\n            }\n\n            editItem(null);\n        }\n    });\n\n    const { currentMenuItem } = props;\n    const plugins = getPlugins<PbMenuItemPlugin>(\"pb-menu-item\");\n    const plugin = plugins.find(pl => pl.menuItem.type === currentMenuItem.type);\n    if (!plugin) {\n        return null;\n    }\n    return plugin.menuItem.renderForm({ onSubmit, onCancel, data: currentMenuItem });\n};\n\nexport default MenuItemForm;\n"],"file":"MenuItemForm.js"}