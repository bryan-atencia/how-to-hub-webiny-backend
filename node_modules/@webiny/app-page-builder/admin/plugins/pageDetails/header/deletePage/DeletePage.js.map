{"version":3,"sources":["../../../../../../src/admin/plugins/pageDetails/header/deletePage/DeletePage.tsx"],"names":["React","dot","useApolloClient","useRouter","useHandler","useSnackbar","useConfirmationDialog","useDialog","IconButton","Tooltip","DELETE_PAGE","DeletePage","props","client","showSnackbar","history","showDialog","title","message","showConfirmation","confirmDelete","page","pageDetails","mutate","mutation","variables","id","parent","refetchQueries","res","data","get","error","substr","push"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,SAASC,eAAT,QAAgC,cAAhC;AACA,SAASC,SAAT,QAA0B,sBAA1B;AAEA,SAASC,UAAT,QAA2B,8BAA3B;AACA,SAASC,WAAT,QAA4B,qCAA5B;AACA,SAASC,qBAAT,QAAsC,+CAAtC;AACA,SAASC,SAAT,QAA0B,mCAA1B;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,OAAT,QAAwB,oBAAxB;;AAEA,SAASC,WAAT,QAA4B,8CAA5B;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,KAAK,EAAI;AACxB,MAAMC,MAAM,GAAGX,eAAe,EAA9B;;AADwB,qBAECG,WAAW,EAFZ;AAAA,MAEhBS,YAFgB,gBAEhBA,YAFgB;;AAAA,mBAGJX,SAAS,EAHL;AAAA,MAGhBY,OAHgB,cAGhBA,OAHgB;;AAAA,mBAIDR,SAAS,EAJR;AAAA,MAIhBS,UAJgB,cAIhBA,UAJgB;;AAMxB,MAAMC,KAAK,GAAG,KAAIL,KAAJ,EAAW,wBAAX,EAAqC,KAArC,CAAd;;AANwB,8BAQKN,qBAAqB,CAAC;AAC/CW,IAAAA,KAAK,EAAE,aADwC;AAE/CC,IAAAA,OAAO,eACH,kHACsE,+BADtE,wEAEyD,oCAASD,KAAT,CAFzD;AAH2C,GAAD,CAR1B;AAAA,MAQhBE,gBARgB,yBAQhBA,gBARgB;;AAkBxB,MAAMC,aAAa,GAAGhB,UAAU,iCACvBQ,KADuB;AAChBO,IAAAA,gBAAgB,EAAhBA;AADgB,MAE5B;AAAA,QAAkBE,IAAlB,QAAGC,WAAH,CAAkBD,IAAlB;AAAA,QAA0BF,gBAA1B,QAA0BA,gBAA1B;AAAA,WAAiD,YAAM;AACnDA,MAAAA,gBAAgB,wEAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACeN,MAAM,CAACU,MAAP,CAAc;AACtCC,kBAAAA,QAAQ,EAAEd,WAD4B;AAEtCe,kBAAAA,SAAS,EAAE;AAAEC,oBAAAA,EAAE,EAAEL,IAAI,CAACM;AAAX,mBAF2B;AAGtCC,kBAAAA,cAAc,EAAE,CAAC,aAAD;AAHsB,iBAAd,CADf;;AAAA;AAAA;AACCC,gBAAAA,GADD,wBACLC,IADK;AAAA,2BAOK7B,GAAG,CAAC8B,GAAJ,CAAQF,GAAR,EAAa,wBAAb,CAPL,EAOLG,KAPK,YAOLA,KAPK;;AAAA,qBAQTA,KARS;AAAA;AAAA;AAAA;;AAAA,iDASFhB,UAAU,CAACgB,KAAK,CAACd,OAAP,EAAgB;AAAED,kBAAAA,KAAK,EAAE;AAAT,iBAAhB,CATR;;AAAA;AAYbH,gBAAAA,YAAY,eACR,8CACa,GADb,eAEI,oCACKO,IAAI,CAACJ,KAAL,CAAWgB,MAAX,CAAkB,CAAlB,EAAqB,EAArB,CADL,QAFJ,EAKc,GALd,8BADQ,CAAZ;AAWAlB,gBAAAA,OAAO,CAACmB,IAAR,CAAa,qBAAb;;AAvBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAD,GAAhB;AAyBH,KA1BD;AAAA,GAF4B,CAAhC;AA+BA,sBACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAE,QAAlB;AAA4B,IAAA,SAAS,EAAE;AAAvC,kBACI,oBAAC,UAAD;AAAY,IAAA,IAAI,eAAE,oBAAC,UAAD,OAAlB;AAAkC,IAAA,OAAO,EAAEd;AAA3C,IADJ,CADJ;AAKH,CAtDD;;AAwDA,eAAeT,UAAf","sourcesContent":["import React from \"react\";\nimport dot from \"dot-prop-immutable\";\nimport { useApolloClient } from \"react-apollo\";\nimport { useRouter } from \"@webiny/react-router\";\nimport { get } from \"lodash\";\nimport { useHandler } from \"@webiny/app/hooks/useHandler\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nimport { useConfirmationDialog } from \"@webiny/app-admin/hooks/useConfirmationDialog\";\nimport { useDialog } from \"@webiny/app-admin/hooks/useDialog\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { ReactComponent as DeleteIcon } from \"@webiny/app-page-builder/admin/assets/delete.svg\";\nimport { DELETE_PAGE } from \"@webiny/app-page-builder/admin/graphql/pages\";\n\nconst DeletePage = props => {\n    const client = useApolloClient();\n    const { showSnackbar } = useSnackbar();\n    const { history } = useRouter();\n    const { showDialog } = useDialog();\n\n    const title = get(props, \"pageDetails.page.title\", \"N/A\");\n\n    const { showConfirmation } = useConfirmationDialog({\n        title: \"Delete page\",\n        message: (\n            <p>\n                You are about to delete the entire page and all of its revisions! <br />\n                Are you sure you want to permanently delete the page <strong>{title}</strong>?\n            </p>\n        )\n    });\n\n    const confirmDelete = useHandler(\n        { ...props, showConfirmation },\n        ({ pageDetails: { page }, showConfirmation }) => () => {\n            showConfirmation(async () => {\n                const { data: res } = await client.mutate({\n                    mutation: DELETE_PAGE,\n                    variables: { id: page.parent },\n                    refetchQueries: [\"PbListPages\"]\n                });\n\n                const { error } = dot.get(res, \"pageBuilder.deletePage\");\n                if (error) {\n                    return showDialog(error.message, { title: \"Could not delete page\" });\n                }\n\n                showSnackbar(\n                    <span>\n                        The page{\" \"}\n                        <strong>\n                            {page.title.substr(0, 20)}\n                            ...\n                        </strong>{\" \"}\n                        was deleted successfully!\n                    </span>\n                );\n\n                history.push(\"/page-builder/pages\");\n            });\n        }\n    );\n\n    return (\n        <Tooltip content={\"Delete\"} placement={\"top\"}>\n            <IconButton icon={<DeleteIcon />} onClick={confirmDelete} />\n        </Tooltip>\n    );\n};\n\nexport default DeletePage;\n"],"file":"DeletePage.js"}