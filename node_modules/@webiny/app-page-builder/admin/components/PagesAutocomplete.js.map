{"version":3,"sources":["../../../src/admin/components/PagesAutocomplete.tsx"],"names":["React","AutoComplete","gql","Query","useAutocomplete","GET_PAGE","LIST_PUBLISHED_PAGES","PagesAutocomplete","props","autoComplete","value","parent","data"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,YAAT,QAA6B,yBAA7B;AACA,OAAOC,GAAP,MAAgB,aAAhB;AAEA,SAASC,KAAT,QAAsB,cAAtB;AACA,SAASC,eAAT,QAAgC,mCAAhC,C,CAEA;;AACA,IAAMC,QAAQ,GAAGH,GAAH,mBAAd;AAcA,IAAMI,oBAAoB,GAAGJ,GAAH,oBAA1B;AAcA,OAAO,SAASK,iBAAT,CAA2BC,KAA3B,EAAkC;AACrC,MAAMC,YAAY,GAAGL,eAAe,CAACE,oBAAD,CAApC;AAEA,sBACI,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAE,CAACE,KAAK,CAACE,KAApB;AAA2B,IAAA,SAAS,EAAE;AAAEC,MAAAA,MAAM,EAAEH,KAAK,CAACE;AAAhB,KAAtC;AAA+D,IAAA,KAAK,EAAEL;AAAtE,KACK,gBAAc;AAAA,QAAXO,IAAW,QAAXA,IAAW;;AACX,QAAMF,KAAK,GAAG,KAAIE,IAAJ,EAAU,uBAAV,CAAd;;AACA,wBACI,oBAAC,YAAD,oBACQJ,KADR,EAEQC,YAFR;AAGI,MAAA,SAAS,EAAE,QAHf;AAII,MAAA,QAAQ,EAAE,OAJd;AAKI,MAAA,KAAK,EAAEC;AALX,OADJ;AASH,GAZL,CADJ;AAgBH","sourcesContent":["import * as React from \"react\";\nimport { AutoComplete } from \"@webiny/ui/AutoComplete\";\nimport gql from \"graphql-tag\";\nimport { get } from \"lodash\";\nimport { Query } from \"react-apollo\";\nimport { useAutocomplete } from \"@webiny/app/hooks/useAutocomplete\";\n\n// We utilize the same \"listPages\" GraphQL field.\nconst GET_PAGE = gql`\n    query getPublishedPage($parent: ID) {\n        pageBuilder {\n            page: getPublishedPage(parent: $parent) {\n                data {\n                    parent\n                    published\n                    title\n                }\n            }\n        }\n    }\n`;\n\nconst LIST_PUBLISHED_PAGES = gql`\n    query listPublishedPages($search: String) {\n        pageBuilder {\n            pages: listPublishedPages(search: $search) {\n                data {\n                    parent\n                    published\n                    title\n                }\n            }\n        }\n    }\n`;\n\nexport function PagesAutocomplete(props) {\n    const autoComplete = useAutocomplete(LIST_PUBLISHED_PAGES);\n\n    return (\n        <Query skip={!props.value} variables={{ parent: props.value }} query={GET_PAGE}>\n            {({ data }) => {\n                const value = get(data, \"pageBuilder.page.data\");\n                return (\n                    <AutoComplete\n                        {...props}\n                        {...autoComplete}\n                        valueProp={\"parent\"}\n                        textProp={\"title\"}\n                        value={value}\n                    />\n                );\n            }}\n        </Query>\n    );\n}\n"],"file":"PagesAutocomplete.js"}