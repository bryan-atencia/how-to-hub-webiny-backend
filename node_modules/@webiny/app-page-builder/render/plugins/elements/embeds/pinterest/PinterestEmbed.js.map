{"version":3,"sources":["../../../../../../src/render/plugins/elements/embeds/pinterest/PinterestEmbed.tsx"],"names":["React","useEffect","css","useHandler","appendSDK","props","element","url","window","Promise","resolve","script","document","createElement","type","src","encodeURI","setAttribute","onload","body","appendChild","initEmbed","node","getElementById","id","PinUtils","build","centerAlign","textAlign","then","renderEmbed","data","size"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,GAAT,QAAoB,SAApB;AAEA,SAASC,UAAT,QAA2B,8BAA3B;;AAQA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAA,MACdC,OADc,GACFD,KADE,CACdC,OADc;;AAAA,aAEN,KAAIA,OAAJ,EAAa,aAAb,KAA+B,EAFzB;AAAA,MAEdC,GAFc,QAEdA,GAFc;;AAItB,MAAI,CAACA,GAAD,IAAQC,MAAM,CAAC,UAAD,CAAlB,EAAgC;AAC5B,WAAOC,OAAO,CAACC,OAAR,EAAP;AACH;;AAED,SAAO,IAAID,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC1B,QAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAF,IAAAA,MAAM,CAACG,IAAP,GAAc,iBAAd;AACAH,IAAAA,MAAM,CAACI,GAAP,GAAaC,SAAS,CAAC,0CAAD,CAAtB;AACAL,IAAAA,MAAM,CAACM,YAAP,CAAoB,OAApB,EAA6B,EAA7B;AACAN,IAAAA,MAAM,CAACM,YAAP,CAAoB,SAApB,EAA+B,OAA/B;AACAN,IAAAA,MAAM,CAACO,MAAP,GAAgBR,OAAhB;AACAE,IAAAA,QAAQ,CAACO,IAAT,CAAcC,WAAd,CAA0BT,MAA1B;AACH,GARM,CAAP;AASH;;AAED,SAASU,SAAT,CAAmBhB,KAAnB,EAA0B;AAAA,MACdC,OADc,GACFD,KADE,CACdC,OADc;AAEtB,MAAMgB,IAAI,GAAGV,QAAQ,CAACW,cAAT,CAAwBjB,OAAO,CAACkB,EAAhC,CAAb,CAFsB,CAGtB;;AACA,MAAIF,IAAI,IAAId,MAAM,CAACiB,QAAnB,EAA6B;AACzB;AACAjB,IAAAA,MAAM,CAACiB,QAAP,CAAgBC,KAAhB;AACH;AACJ;;AAED,IAAMC,WAAW,gBAAGzB,GAAG,CAAC;AACpB0B,EAAAA,SAAS,EAAE;AADS,CAAD,uBAAvB;AAIA,gBAAe,UAAAvB,KAAK,EAAI;AAAA,cACJ,KAAIA,KAAK,CAACC,OAAV,EAAmB,aAAnB,KAAqC,EADjC;AAAA,MACZC,GADY,SACZA,GADY;;AAGpBN,EAAAA,SAAS,CAAC,YAAM;AACZG,IAAAA,SAAS,CAACC,KAAD,CAAT,CAAiBwB,IAAjB,CAAsB;AAAA,aAAMR,SAAS,CAAChB,KAAD,CAAf;AAAA,KAAtB;AACH,GAFQ,EAEN,EAFM,CAAT;AAIA,MAAMyB,WAAW,GAAG3B,UAAU,CAACE,KAAD,EAAQ,iBAAiB;AAAA,QAAdC,OAAc,SAAdA,OAAc;AACnD,WAAO,SAASwB,WAAT,GAAuB;AAC1B,UAAMC,IAAI,GAAG,KAAIzB,OAAJ,EAAa,aAAb,CAAb;;AACA,0BACI;AAAK,QAAA,EAAE,EAAEA,OAAO,CAACkB,EAAjB;AAAqB,QAAA,SAAS,EAAEG;AAAhC,sBACI;AACI,uBAAY,UADhB;AAEI,0BAAgBI,IAAI,CAACC,IAAL,IAAa,OAFjC;AAGI,QAAA,IAAI,EAAED,IAAI,CAACxB;AAHf,QADJ,CADJ;AASH,KAXD;AAYH,GAb6B,CAA9B;AAeA,SAAOA,GAAG,GAAGuB,WAAW,EAAd,GAAmB,IAA7B;AACH,CAvBD","sourcesContent":["import React, { useEffect } from \"react\";\nimport { css } from \"emotion\";\nimport { get } from \"lodash\";\nimport { useHandler } from \"@webiny/app/hooks/useHandler\";\n\ndeclare global {\n    interface Window {\n        PinUtils: any;\n    }\n}\n\nfunction appendSDK(props) {\n    const { element } = props;\n    const { url } = get(element, \"data.source\") || {};\n\n    if (!url || window[\"PinUtils\"]) {\n        return Promise.resolve();\n    }\n\n    return new Promise(resolve => {\n        const script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src = encodeURI(\"https://assets.pinterest.com/js/pinit.js\");\n        script.setAttribute(\"async\", \"\");\n        script.setAttribute(\"charset\", \"utf-8\");\n        script.onload = resolve;\n        document.body.appendChild(script);\n    });\n}\n\nfunction initEmbed(props) {\n    const { element } = props;\n    const node = document.getElementById(element.id);\n    // @ts-ignore\n    if (node && window.PinUtils) {\n        // @ts-ignore\n        window.PinUtils.build();\n    }\n}\n\nconst centerAlign = css({\n    textAlign: \"center\"\n});\n\nexport default props => {\n    const { url } = get(props.element, \"data.source\") || {};\n\n    useEffect(() => {\n        appendSDK(props).then(() => initEmbed(props));\n    }, []);\n\n    const renderEmbed = useHandler(props, ({ element }) => {\n        return function renderEmbed() {\n            const data = get(element, \"data.source\");\n            return (\n                <div id={element.id} className={centerAlign}>\n                    <a\n                        data-pin-do=\"embedPin\"\n                        data-pin-width={data.size || \"small\"}\n                        href={data.url}\n                    />\n                </div>\n            );\n        };\n    });\n\n    return url ? renderEmbed() : null;\n};\n"],"file":"PinterestEmbed.js"}