{"version":3,"sources":["../../../src/site/plugins/linkPreload.ts"],"names":["GET_PUBLISHED_PAGE","preloadedLinks","name","type","onLink","link","apolloClient","process","env","REACT_APP_ENV","startsWith","includes","push","query","variables","url","id","returnErrorPage","returnNotFoundPage"],"mappings":"AACA,SAASA,kBAAT,QAAmC,4BAAnC;AAEA,gBAAe,YAA+B;AAC1C,MAAMC,cAAc,GAAG,EAAvB;AAEA,SAAO;AACHC,IAAAA,IAAI,EAAE,yBADH;AAEHC,IAAAA,IAAI,EAAE,sBAFH;AAGHC,IAAAA,MAHG,wBAG4B;AAAA,UAAtBC,IAAsB,QAAtBA,IAAsB;AAAA,UAAhBC,YAAgB,QAAhBA,YAAgB;;AAC3B,UAAIC,OAAO,CAACC,GAAR,CAAYC,aAAZ,KAA8B,SAAlC,EAA6C;AACzC,YACI,OAAOJ,IAAP,KAAgB,QAAhB,IACA,CAACA,IAAI,CAACK,UAAL,CAAgB,GAAhB,CADD,IAEAT,cAAc,CAACU,QAAf,CAAwBN,IAAxB,CAHJ,EAIE;AACE;AACH;;AAEDJ,QAAAA,cAAc,CAACW,IAAf,CAAoBP,IAApB;AACAC,QAAAA,YAAY,CAACO,KAAb,CAAmB;AACfA,UAAAA,KAAK,EAAEb,kBAAkB,EADV;AAEfc,UAAAA,SAAS,EAAE;AACPC,YAAAA,GAAG,EAAEV,IADE;AAEPW,YAAAA,EAAE,EAAE,IAFG;AAGPC,YAAAA,eAAe,EAAE,IAHV;AAIPC,YAAAA,kBAAkB,EAAE;AAJb;AAFI,SAAnB;AASH;AACJ;AAxBE,GAAP;AA0BH,CA7BD","sourcesContent":["import { ReactRouterOnLinkPlugin } from \"@webiny/react-router/types\";\nimport { GET_PUBLISHED_PAGE } from \"../components/Page/graphql\";\n\nexport default (): ReactRouterOnLinkPlugin => {\n    const preloadedLinks = [];\n\n    return {\n        name: \"react-router-on-link-pb\",\n        type: \"react-router-on-link\",\n        onLink({ link, apolloClient }) {\n            if (process.env.REACT_APP_ENV === \"browser\") {\n                if (\n                    typeof link !== \"string\" ||\n                    !link.startsWith(\"/\") ||\n                    preloadedLinks.includes(link)\n                ) {\n                    return;\n                }\n\n                preloadedLinks.push(link);\n                apolloClient.query({\n                    query: GET_PUBLISHED_PAGE(),\n                    variables: {\n                        url: link,\n                        id: null,\n                        returnErrorPage: true,\n                        returnNotFoundPage: true\n                    }\n                });\n            }\n        }\n    };\n};\n"],"file":"linkPreload.js"}