{"version":3,"sources":["../../../src/site/plugins/index.tsx"],"names":["React","Route","renderPlugins","Helmet","Query","gql","linkPreloadPlugin","PageRoute","name","type","route","component","response","data","favicon","social","src","image"],"mappings":";;;;;;;;;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,KAAT,QAAsB,sBAAtB;AACA,OAAOC,aAAP,MAA0B,iDAA1B;AAGA,OAAOC,MAAP,MAAmB,cAAnB;AACA,SAASC,KAAT,QAAsB,cAAtB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AAEA,OAAOC,iBAAP,MAA8B,eAA9B;AACA,SAASC,SAAT,QAA0B,sBAA1B;AAEA,gBAAe;AAAA,UACX;AACIC,IAAAA,IAAI,EAAE,UADV;AAEIC,IAAAA,IAAI,EAAE,OAFV;AAGIC,IAAAA,KAAK,eAAE,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAEH;AAAlB;AAHX,GADW,EAMXD,iBAAiB,EANN,EAOX;AACIG,IAAAA,IAAI,EAAE,cADV;AAEID,IAAAA,IAAI,EAAE,wBAFV;AAGIG,IAAAA,SAAS,eACL,oBAAC,KAAD;AACI,MAAA,KAAK,EAAEN,GAAF;AADT,OAqBK,gBAAwB;AAAA,UAAfO,QAAe,QAArBC,IAAqB;;AAAA,kBAEjB,KAAID,QAAJ,EAAc,8BAAd,KAAiD,EAFhC;AAAA,UACbE,OADa,SACbA,OADa;AAAA,UACJN,IADI,SACJA,IADI;AAAA,UACEO,MADF,SACEA,MADF,EAIrB;AACA;;;AACA,UAAID,OAAO,IAAIA,OAAO,CAACE,GAAvB,EAA4B;AAAA;;AACxB,4BACI,oBAAC,MAAD,qBACI;AACI,UAAA,GAAG,EAAC,MADR;AAEI,UAAA,IAAI,EAAC,WAFT;AAGI,UAAA,IAAI,EAAEF,OAAO,CAACE,GAAR,GAAc,YAHxB;AAII,UAAA,KAAK,EAAC;AAJV,UADJ,EAQKR,IAAI,iBAAI;AAAM,UAAA,IAAI,EAAC,OAAX;AAAmB,UAAA,OAAO,EAAEA;AAA5B,UARb,EASKA,IAAI,iBAAI;AAAM,UAAA,QAAQ,EAAC,UAAf;AAA0B,UAAA,OAAO,EAAEA;AAAnC,UATb,EAWK,CAAAO,MAAM,SAAN,IAAAA,MAAM,WAAN,6BAAAA,MAAM,CAAEE,KAAR,gEAAeD,GAAf,kBACG;AAAM,UAAA,QAAQ,EAAC,UAAf;AAA0B,UAAA,OAAO,EAAED,MAAM,CAACE,KAAP,CAAaD;AAAhD,UAZR,CADJ;AAiBH;;AAED,aAAO,IAAP;AACH,KAhDL;AAJR,GAPW,4BA+DRd,aAAa,EA/DL;AAAA,CAAf","sourcesContent":["import * as React from \"react\";\nimport { Route } from \"@webiny/react-router\";\nimport renderPlugins from \"@webiny/app-page-builder/render/presets/default\";\nimport { RoutePlugin } from \"@webiny/app/types\";\nimport { PbAddonRenderPlugin } from \"@webiny/app-page-builder/types\";\nimport Helmet from \"react-helmet\";\nimport { Query } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { get } from \"lodash\";\nimport linkPreloadPlugin from \"./linkPreload\";\nimport { PageRoute } from \"./../components/Page\";\n\nexport default () => [\n    {\n        name: \"pb-route\",\n        type: \"route\",\n        route: <Route component={PageRoute} />\n    } as RoutePlugin,\n    linkPreloadPlugin(),\n    {\n        type: \"addon-render\",\n        name: \"addon-render-site-head\",\n        component: (\n            <Query\n                query={gql`\n                    query PbGetSettings {\n                        pageBuilder {\n                            getSettings {\n                                data {\n                                    name\n                                    favicon {\n                                        src\n                                    }\n                                    social {\n                                        image {\n                                            src\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                `}\n            >\n                {({ data: response }) => {\n                    const { favicon, name, social } =\n                        get(response, \"pageBuilder.getSettings.data\") || {};\n\n                    // Manually added \"?width=128\" to the favicon URL. In the future, fix this.\n                    // See \"packages/webiny-app/src/plugins/imagePlugin.js:54\"\n                    if (favicon && favicon.src) {\n                        return (\n                            <Helmet>\n                                <link\n                                    rel=\"icon\"\n                                    type=\"image/png\"\n                                    href={favicon.src + \"?width=128\"}\n                                    sizes=\"16x16\"\n                                />\n\n                                {name && <meta name=\"title\" content={name} />}\n                                {name && <meta property=\"og:title\" content={name} />}\n\n                                {social?.image?.src && (\n                                    <meta property=\"og:image\" content={social.image.src} />\n                                )}\n                            </Helmet>\n                        );\n                    }\n\n                    return null;\n                }}\n            </Query>\n        )\n    } as PbAddonRenderPlugin,\n    ...renderPlugins()\n];\n"],"file":"index.js"}