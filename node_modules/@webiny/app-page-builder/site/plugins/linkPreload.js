import { GET_PUBLISHED_PAGE } from "../components/Page/graphql";
export default (function () {
  var preloadedLinks = [];
  return {
    name: "react-router-on-link-pb",
    type: "react-router-on-link",
    onLink: function onLink(_ref) {
      var link = _ref.link,
          apolloClient = _ref.apolloClient;

      if (process.env.REACT_APP_ENV === "browser") {
        if (typeof link !== "string" || !link.startsWith("/") || preloadedLinks.includes(link)) {
          return;
        }

        preloadedLinks.push(link);
        apolloClient.query({
          query: GET_PUBLISHED_PAGE(),
          variables: {
            url: link,
            id: null,
            returnErrorPage: true,
            returnNotFoundPage: true
          }
        });
      }
    }
  };
});
//# sourceMappingURL=linkPreload.js.map