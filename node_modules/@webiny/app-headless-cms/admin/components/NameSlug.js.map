{"version":3,"sources":["../../../src/admin/components/NameSlug.tsx"],"names":["React","Cell","Input","i18n","validation","slugify","t","ns","toSlug","text","replacement","lower","remove","slugValidator","value","validateSlugUniqueness","newEntry","validateSync","NameSlug","Bind","setValue","name","slug","create","bindProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,UAAT,QAA2B,oBAA3B;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,IAAMC,CAAC,GAAGH,IAAI,CAACI,EAAL,CAAQ,6CAAR,CAAV;;AAEA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,IAAI;AAAA,SACfJ,OAAO,CAACI,IAAD,EAAO;AACVC,IAAAA,WAAW,EAAE,GADH;AAEVC,IAAAA,KAAK,EAAE,IAFG;AAGVC,IAAAA,MAAM,EAAE;AAHE,GAAP,CADQ;AAAA,CAAnB;;AAOA,IAAMC,aAAa;AAAA,sEAAG,iBAAOC,KAAP,EAAcC,sBAAd,EAAsCC,QAAtC;AAAA;AAAA;AAAA;AAAA;AAAA,gBACbA,QADa;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAKlBZ,YAAAA,UAAU,CAACa,YAAX,CAAwBH,KAAxB,EAA+B,wBAA/B;AALkB;AAAA,mBAMZC,sBAAsB,EANV;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbF,aAAa;AAAA;AAAA;AAAA,GAAnB;;AASA,SAASK,QAAT,QAA8F;AAAA,MAA1EF,QAA0E,SAA1EA,QAA0E;AAAA,MAAhEG,IAAgE,SAAhEA,IAAgE;AAAA,MAA1DC,QAA0D,SAA1DA,QAA0D;AAAA,yBAAhDC,IAAgD;AAAA,MAAhDA,IAAgD,2BAAzC,EAAyC;AAAA,yBAArCC,IAAqC;AAAA,MAArCA,IAAqC,2BAA9B,EAA8B;AAAA,MAA1BP,sBAA0B,SAA1BA,sBAA0B;AAC1F,sBACI,uDACI,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAE;AAAZ,kBACI,oBAAC,IAAD,oBACQM,IADR;AAEI,IAAA,IAAI,EAAC,MAFT;AAGI,IAAA,UAAU,EAAEjB,UAAU,CAACmB,MAAX,CAAkB,wBAAlB,CAHhB;AAII,IAAA,WAAW,EAAE,qBAAAT,KAAK,EAAI;AAClB,UAAIE,QAAJ,EAAc;AACVI,QAAAA,QAAQ,CAAC,MAAD,EAASZ,MAAM,CAACM,KAAD,CAAf,CAAR;AACH;AACJ;AARL,mBAUI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAER,CAAF;AAAZ,IAVJ,CADJ,CADJ,eAeI,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAE;AAAZ,kBACI,oBAAC,IAAD;AACI,IAAA,IAAI,EAAC,MADT;AAEI,IAAA,UAAU,EAAE,oBAAAQ,KAAK;AAAA,aAAID,aAAa,CAACC,KAAD,EAAQC,sBAAR,EAAgCC,QAAhC,CAAjB;AAAA;AAFrB,KAIK,UAAAQ,SAAS;AAAA,wBACN,oBAAC,KAAD;AACI,MAAA,WAAW,EAAElB,CAAF;AADf,OAEQkB,SAFR,EAGQF,IAHR;AAII,MAAA,QAAQ,EAAE,CAACN,QAJf;AAKI,MAAA,KAAK,EAAEV,CAAF;AALT,OADM;AAAA,GAJd,CADJ,CAfJ,CADJ;AAkCH;;AAED,eAAeY,QAAf","sourcesContent":["import React from \"react\";\nimport { Cell } from \"@webiny/ui/Grid\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { validation } from \"@webiny/validation\";\nimport slugify from \"slugify\";\nconst t = i18n.ns(\"app-headless-cms/admin/components/name-slug\");\n\nconst toSlug = text =>\n    slugify(text, {\n        replacement: \"-\",\n        lower: true,\n        remove: /[*#\\?<>_\\{\\}\\[\\]+~.()'\"!:;@]/g\n    });\n\nconst slugValidator = async (value, validateSlugUniqueness, newEntry) => {\n    if (!newEntry) {\n        return;\n    }\n\n    validation.validateSync(value, \"required,maxLength:100\");\n    await validateSlugUniqueness();\n};\n\nfunction NameSlug({ newEntry, Bind, setValue, name = {}, slug = {}, validateSlugUniqueness }) {\n    return (\n        <>\n            <Cell span={6}>\n                <Bind\n                    {...name}\n                    name=\"name\"\n                    validators={validation.create(\"required,maxLength:100\")}\n                    afterChange={value => {\n                        if (newEntry) {\n                            setValue(\"slug\", toSlug(value));\n                        }\n                    }}\n                >\n                    <Input label={t`Name`} />\n                </Bind>\n            </Cell>\n            <Cell span={6}>\n                <Bind\n                    name=\"slug\"\n                    validators={value => slugValidator(value, validateSlugUniqueness, newEntry)}\n                >\n                    {bindProps => (\n                        <Input\n                            description={t`Cannot be changed.`}\n                            {...bindProps}\n                            {...slug}\n                            disabled={!newEntry}\n                            label={t`Slug`}\n                        />\n                    )}\n                </Bind>\n            </Cell>\n        </>\n    );\n}\n\nexport default NameSlug;\n"],"file":"NameSlug.js"}