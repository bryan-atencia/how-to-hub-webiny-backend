{"version":3,"sources":["../../../../../../src/admin/components/ContentModelEditor/Tabs/EditTab/Field.tsx"],"names":["React","styled","IconButton","Typography","useI18N","useContentModelEditor","Menu","MenuItem","getPlugins","css","ListItemGraphic","Icon","i18n","useSnackbar","t","ns","FieldContainer","display","flexDirection","justifyContent","alignItems","Info","flex","lineHeight","Actions","menuStyles","width","right","left","opacity","pointerEvents","Field","props","field","onEdit","onDelete","getValue","showSnackbar","getFieldPlugin","setData","data","fieldPlugin","type","plugins","lockedFields","label","multipleValues","fieldId","titleFieldId","map","pl","cloneElement","render","key","name","response","error","message","find","lockedField"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { ReactComponent as EditIcon } from \"@webiny/app-headless-cms/admin/icons/edit.svg\";\nimport { ReactComponent as DeleteIcon } from \"@webiny/app-headless-cms/admin/icons/delete.svg\";\nimport { ReactComponent as TitleIcon } from \"@webiny/app-headless-cms/admin/icons/title-24px.svg\";\nimport { useI18N } from \"@webiny/app-i18n/hooks/useI18N\";\nimport { useContentModelEditor } from \"@webiny/app-headless-cms/admin/components/ContentModelEditor/Context\";\nimport { ReactComponent as MoreVerticalIcon } from \"@webiny/app-headless-cms/admin/icons/more_vert.svg\";\nimport { Menu, MenuItem } from \"@webiny/ui/Menu\";\nimport { getPlugins } from \"@webiny/plugins\";\nimport { CmsEditorFieldOptionPlugin } from \"@webiny/app-headless-cms/types\";\nimport { css } from \"emotion\";\nimport { ListItemGraphic } from \"@webiny/ui/List\";\nimport { Icon } from \"@webiny/ui/Icon\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nconst t = i18n.ns(\"app-headless-cms/admin/components/editor/field\");\n\nconst FieldContainer = styled(\"div\")({\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\"\n});\n\nconst Info = styled(\"div\")({\n    display: \"flex\",\n    flexDirection: \"column\",\n    \"> *\": {\n        flex: \"1 100%\",\n        lineHeight: \"150%\"\n    }\n});\n\nconst Actions = styled(\"div\")({\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"right\",\n    \"> *\": {\n        flex: \"1 100%\"\n    }\n});\n\nconst menuStyles = css({\n    width: 220,\n    right: -105,\n    left: \"auto !important\",\n    \".disabled\": {\n        opacity: 0.5,\n        pointerEvents: \"none\"\n    }\n});\n\nconst Field = props => {\n    const { field, onEdit, onDelete } = props;\n    const { getValue } = useI18N();\n    const { showSnackbar } = useSnackbar();\n    const { getFieldPlugin, setData, data } = useContentModelEditor();\n\n    const fieldPlugin = getFieldPlugin({ type: field.type });\n    const plugins = getPlugins<CmsEditorFieldOptionPlugin>(\"cms-editor-field-option\");\n\n    const lockedFields = data.lockedFields || [];\n    return (\n        <FieldContainer>\n            <Info>\n                <Typography use={\"subtitle1\"}>{getValue(field.label)} </Typography>\n                <Typography use={\"caption\"}>\n                    {fieldPlugin && fieldPlugin.field.label}{\" \"}\n                    {field.multipleValues && <>({t`multiple values`})</>}\n                    {field.fieldId === data.titleFieldId && <>({t`entry title`})</>}\n                </Typography>\n            </Info>\n            <Actions>\n                <IconButton icon={<EditIcon />} onClick={() => onEdit(field)} />\n                <Menu className={menuStyles} handle={<IconButton icon={<MoreVerticalIcon />} />}>\n                    {plugins.map(pl => React.cloneElement(pl.render(), { key: pl.name }))}\n                    <MenuItem\n                        disabled={field.multipleValues || field.type !== \"text\"}\n                        onClick={async () => {\n                            const response = await setData(data => {\n                                data.titleFieldId = field.fieldId;\n                                return data;\n                            });\n\n                            if (response.error) {\n                                return showSnackbar(response.error.message);\n                            }\n\n                            showSnackbar(t`Title field set successfully.`);\n                        }}\n                    >\n                        <ListItemGraphic>\n                            <Icon icon={<TitleIcon />} />\n                        </ListItemGraphic>\n                        {t`Use as title`}\n                    </MenuItem>\n                    <MenuItem\n                        disabled={lockedFields.find(\n                            lockedField => lockedField.fieldId === field.fieldId\n                        )}\n                        onClick={() => onDelete(field)}\n                    >\n                        <ListItemGraphic>\n                            <Icon icon={<DeleteIcon />} />\n                        </ListItemGraphic>\n                        {lockedFields.find(lockedField => lockedField.fieldId === field.fieldId)\n                            ? t`Cannot delete`\n                            : t`Delete`}\n                    </MenuItem>\n                </Menu>\n            </Actions>\n        </FieldContainer>\n    );\n};\n\nexport default Field;\n"],"file":"Field.js"}