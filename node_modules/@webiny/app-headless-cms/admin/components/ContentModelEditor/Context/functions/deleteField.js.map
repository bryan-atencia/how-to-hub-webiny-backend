{"version":3,"sources":["../../../../../../src/admin/components/ContentModelEditor/Context/functions/deleteField.ts"],"names":["field","data","fieldIndex","fields","findIndex","item","_id","splice","i","length","layout","currentRowIndex","forEach","row","fieldId","find","Array","isArray","push"],"mappings":"AAMA,gBAAe,gBAA6E;AAAA,MAA1EA,KAA0E,QAA1EA,KAA0E;AAAA,MAAnEC,IAAmE,QAAnEA,IAAmE;AACxF;AACA,MAAMC,UAAU,GAAGD,IAAI,CAACE,MAAL,CAAYC,SAAZ,CAAsB,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAACC,GAAL,KAAaN,KAAK,CAACM,GAAvB;AAAA,GAA1B,CAAnB;AACAL,EAAAA,IAAI,CAACE,MAAL,CAAYI,MAAZ,CAAmBL,UAAnB,EAA+B,CAA/B;;AACA,OAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,IAAI,CAACE,MAAL,CAAYM,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzC,QAAIP,IAAI,CAACE,MAAL,CAAYK,CAAZ,EAAeF,GAAf,KAAuBN,KAAK,CAACM,GAAjC,EAAsC;AAClCL,MAAAA,IAAI,CAACE,MAAL,CAAYK,CAAZ,IAAiBR,KAAjB;AACA;AACH;AACJ,GATuF,CAWxF;;;AACA,MAAMU,MAAM,GAAG,EAAf;AACA,MAAIC,eAAe,GAAG,CAAtB;AACAV,EAAAA,IAAI,CAACS,MAAL,CAAYE,OAAZ,CAAoB,UAAAC,GAAG,EAAI;AACvBA,IAAAA,GAAG,CAACD,OAAJ,CAAY,UAAAE,OAAO,EAAI;AACnB,UAAMd,KAAK,GAAGC,IAAI,CAACE,MAAL,CAAYY,IAAZ,CAAiB,UAAAV,IAAI;AAAA,eAAIA,IAAI,CAACC,GAAL,KAAaQ,OAAjB;AAAA,OAArB,CAAd;;AACA,UAAI,CAACd,KAAL,EAAY;AACR,eAAO,IAAP;AACH;;AACD,UAAI,CAACgB,KAAK,CAACC,OAAN,CAAcP,MAAM,CAACC,eAAD,CAApB,CAAL,EAA6C;AACzCD,QAAAA,MAAM,CAACC,eAAD,CAAN,GAA0B,EAA1B;AACH;;AAEDD,MAAAA,MAAM,CAACC,eAAD,CAAN,CAAwBO,IAAxB,CAA6BJ,OAA7B;AACH,KAVD;AAWAJ,IAAAA,MAAM,CAACC,eAAD,CAAN,IAA2BD,MAAM,CAACC,eAAD,CAAN,CAAwBF,MAAnD,IAA6DE,eAAe,EAA5E;AACH,GAbD;AAeAV,EAAAA,IAAI,CAACS,MAAL,GAAcA,MAAd;AACA,SAAOT,IAAP;AACH,CA/BD","sourcesContent":["import {\n    CmsEditorField,\n    CmsEditorFieldId,\n    CmsEditorContentModel\n} from \"@webiny/app-headless-cms/types\";\n\nexport default ({ field, data }: { field: CmsEditorField; data: CmsEditorContentModel }) => {\n    // Remove the field from fields list...\n    const fieldIndex = data.fields.findIndex(item => item._id === field._id);\n    data.fields.splice(fieldIndex, 1);\n    for (let i = 0; i < data.fields.length; i++) {\n        if (data.fields[i]._id === field._id) {\n            data.fields[i] = field;\n            break;\n        }\n    }\n\n    // ...and rebuild the layout object.\n    const layout = [];\n    let currentRowIndex = 0;\n    data.layout.forEach(row => {\n        row.forEach(fieldId => {\n            const field = data.fields.find(item => item._id === fieldId);\n            if (!field) {\n                return true;\n            }\n            if (!Array.isArray(layout[currentRowIndex])) {\n                layout[currentRowIndex] = [];\n            }\n\n            layout[currentRowIndex].push(fieldId);\n        });\n        layout[currentRowIndex] && layout[currentRowIndex].length && currentRowIndex++;\n    });\n\n    data.layout = layout;\n    return data;\n};\n"],"file":"deleteField.js"}