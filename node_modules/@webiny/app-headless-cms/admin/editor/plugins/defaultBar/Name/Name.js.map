{"version":3,"sources":["../../../../../../src/admin/editor/plugins/defaultBar/Name/Name.tsx"],"names":["React","useState","Input","Tooltip","useContentModelEditor","useHotkeys","FormName","formNameWrapper","NameInputWrapper","NameWrapper","i18n","t","namespace","Name","state","setData","localName","setLocalName","editingEnabled","setEditing","cancelChanges","startEditing","data","name","zIndex","keys","disabled","esc","e","preventDefault","enter","autoFocus","window","Cypress"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,qBAAT,QAAsC,sEAAtC;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,QAAT,EAAmBC,eAAnB,EAAoCC,gBAApC,EAAsDC,WAAtD,QAAyE,cAAzE;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,IAAMC,CAAC,GAAGD,IAAI,CAACE,SAAL,CAAe,yBAAf,CAAV;AAQA,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AAAA,8BACKT,qBAAqB,EAD1B;AAAA,MACdU,KADc,yBACdA,KADc;AAAA,MACPC,OADO,yBACPA,OADO;;AAAA,kBAEYd,QAAQ,CAAC,IAAD,CAFpB;AAAA;AAAA,MAEfe,SAFe;AAAA,MAEJC,YAFI;;AAAA,mBAGehB,QAAQ,CAAC,KAAD,CAHvB;AAAA;AAAA,MAGfiB,cAHe;AAAA,MAGCC,UAHD;;AAKtB,WAASC,aAAT,GAAyB;AACrBD,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH;;AAED,WAASE,YAAT,GAAwB;AACpBJ,IAAAA,YAAY,CAACH,KAAK,CAACQ,IAAN,CAAWC,IAAZ,CAAZ;AACAJ,IAAAA,UAAU,CAAC,IAAD,CAAV;AACH;;AAEDd,EAAAA,UAAU,CAAC;AACPmB,IAAAA,MAAM,EAAE,GADD;AAEPC,IAAAA,IAAI,EAAE;AACF,uBAAiBJ;AADf;AAFC,GAAD,CAAV;AAOAhB,EAAAA,UAAU,CAAC;AACPmB,IAAAA,MAAM,EAAE,GADD;AAEPE,IAAAA,QAAQ,EAAE,CAACR,cAFJ;AAGPO,IAAAA,IAAI,EAAE;AACFE,MAAAA,GAAG,EAAE,aAAAC,CAAC,EAAI;AACNA,QAAAA,CAAC,CAACC,cAAF;AACAT,QAAAA,aAAa;AAChB,OAJC;AAKFU,MAAAA,KAAK,EAAE,eAAAF,CAAC,EAAI;AACRA,QAAAA,CAAC,CAACC,cAAF;AACAd,QAAAA,OAAO,CAAC,UAAAO,IAAI,EAAI;AACZA,UAAAA,IAAI,CAACC,IAAL,GAAYP,SAAZ;AACA,iBAAOM,IAAP;AACH,SAHM,CAAP;AAIAH,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AAZC;AAHC,GAAD,CAAV,CArBsB,CAwCtB;AACA;;AACA,MAAMY,SAAS,GAAG,CAACC,MAAM,CAACC,OAA1B;AAEA,SAAOf,cAAc,gBACjB,oBAAC,gBAAD,qBACI,oBAAC,KAAD;AACI,IAAA,SAAS,EAAEa,SADf;AAEI,IAAA,SAAS,MAFb;AAGI,IAAA,KAAK,EAAEf,SAHX;AAII,IAAA,QAAQ,EAAEC,YAJd;AAKI,IAAA,MAAM,EAAEG;AALZ,IADJ,CADiB,gBAWjB,oBAAC,WAAD,qBACI,oBAAC,OAAD;AACI,IAAA,SAAS,EAAEb,eADf;AAEI,IAAA,SAAS,EAAE,QAFf;AAGI,IAAA,OAAO,eAAE,kCAAOI,CAAP;AAHb,kBAKI,oBAAC,QAAD;AAAU,mBAAY,sBAAtB;AAA6C,IAAA,OAAO,EAAEU;AAAtD,KACKP,KAAK,CAACQ,IAAN,CAAWC,IADhB,CALJ,CADJ,CAXJ;AAuBH,CAnEM","sourcesContent":["import React, { useState } from \"react\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { useContentModelEditor } from \"@webiny/app-headless-cms/admin/components/ContentModelEditor/Context\";\nimport { useHotkeys } from \"react-hotkeyz\";\nimport { FormName, formNameWrapper, NameInputWrapper, NameWrapper } from \"./NameStyled\";\nimport { i18n } from \"@webiny/app/i18n\";\nconst t = i18n.namespace(\"ContentModelEditor.Name\");\n\ndeclare global {\n    interface Window {\n        Cypress: any;\n    }\n}\n\nexport const Name = () => {\n    const { state, setData } = useContentModelEditor();\n    const [localName, setLocalName] = useState(null);\n    const [editingEnabled, setEditing] = useState(false);\n\n    function cancelChanges() {\n        setEditing(false);\n    }\n\n    function startEditing() {\n        setLocalName(state.data.name);\n        setEditing(true);\n    }\n\n    useHotkeys({\n        zIndex: 100,\n        keys: {\n            \"alt+cmd+enter\": startEditing\n        }\n    });\n\n    useHotkeys({\n        zIndex: 101,\n        disabled: !editingEnabled,\n        keys: {\n            esc: e => {\n                e.preventDefault();\n                cancelChanges();\n            },\n            enter: e => {\n                e.preventDefault();\n                setData(data => {\n                    data.name = localName;\n                    return data;\n                });\n                setEditing(false);\n            }\n        }\n    });\n\n    // Disable autoFocus because for some reason, blur event would automatically be triggered when clicking\n    // on the page title when doing Cypress testing. Not sure if this is RMWC or Cypress related issue.\n    const autoFocus = !window.Cypress;\n\n    return editingEnabled ? (\n        <NameInputWrapper>\n            <Input\n                autoFocus={autoFocus}\n                fullwidth\n                value={localName}\n                onChange={setLocalName}\n                onBlur={cancelChanges}\n            />\n        </NameInputWrapper>\n    ) : (\n        <NameWrapper>\n            <Tooltip\n                className={formNameWrapper}\n                placement={\"bottom\"}\n                content={<span>{t`rename`}</span>}\n            >\n                <FormName data-testid=\"fb-editor-form-title\" onClick={startEditing}>\n                    {state.data.name}\n                </FormName>\n            </Tooltip>\n        </NameWrapper>\n    );\n};\n"],"file":"Name.js"}