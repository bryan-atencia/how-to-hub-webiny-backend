{"version":3,"sources":["../../../../src/admin/views/ContentModelGroups/IconPicker.tsx"],"names":["React","css","getPlugins","Typography","Grid","FontAwesomeIcon","DelayedOnChange","Menu","Input","FormElementMessage","iconPickerLabel","marginBottom","marginLeft","MenuWrapper","color","backgroundColor","padding","NoResultWrapper","width","COLUMN_COUNT","gridItem","display","flexDirection","justifyContent","boxSizing","paddingTop","alignItems","textAlign","cursor","transform","borderRadius","transition","boxShadow","content","position","top","left","height","zIndex","opacity","grid","pickIcon","searchInput","input","useState","useCallback","useMemo","IconPicker","value","onChange","label","description","validation","filter","setFilter","mustRenderGrid","setMustRenderGrid","onFilterChange","cb","allIcons","plugins","reduce","icons","pl","concat","getIcons","ic","name","includes","renderCell","closeMenu","columnIndex","key","rowIndex","style","item","id","join","renderGrid","length","Math","ceil","fontAwesomeIconValue","split","isValid","message"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { css } from \"emotion\";\nimport { getPlugins } from \"@webiny/plugins\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { Grid } from \"react-virtualized\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport DelayedOnChange from \"./DelayedOnChange\";\nimport { Menu } from \"@webiny/ui/Menu\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { CmsIcon, CmsIconsPlugin } from \"@webiny/app-headless-cms/types\";\nimport { FormComponentProps } from \"@webiny/ui/types\";\nimport { FormElementMessage } from \"@webiny/ui/FormElementMessage\";\n\n/**\n * Controls the helper text below the checkbox.\n * @type {string}\n */\nconst iconPickerLabel = css({ marginBottom: 5, marginLeft: 2 });\n\nconst MenuWrapper = css({\n    color: \"var(--mdc-theme-text-secondary-on-background)\",\n    backgroundColor: \"var(--mdc-theme-on-background)\",\n    padding: \"16px 8px\"\n});\n\nconst NoResultWrapper = css({\n    width: 640,\n    color: \"var(--mdc-theme-text-secondary-on-background)\",\n    padding: \"16px 12px\"\n});\n\nconst COLUMN_COUNT = 6;\n\nconst gridItem = css({\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n    boxSizing: \"border-box\",\n    paddingTop: 15,\n    alignItems: \"center\",\n    textAlign: \"center\",\n    cursor: \"pointer\",\n    transform: \"translateZ(0)\",\n    borderRadius: 2,\n    color: \"var(--mdc-theme-text-secondary-on-background)\",\n    transition: \"all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)\",\n    \"&::after\": {\n        boxShadow: \"0 0.25rem 0.125rem 0 rgba(0,0,0,0.05)\",\n        transition: \"opacity 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)\",\n        content: '\"\"',\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: -1,\n        opacity: 0\n    },\n    \"&:hover\": {\n        backgroundColor: \"var(--mdc-theme-background)\",\n        color: \"var(--mdc-theme-text-primary-on-background)\",\n        \"&::after\": {\n            opacity: 1\n        }\n    },\n    \">svg\": {\n        width: 42,\n        marginBottom: 5\n    }\n});\n\nconst grid = css({\n    padding: 20\n});\n\nconst pickIcon = css({\n    width: 50,\n    textAlign: \"center\",\n    cursor: \"pointer\"\n});\n\nconst searchInput = css({\n    input: {\n        padding: \"20px 12px 20px\"\n    }\n});\n\nconst { useState, useCallback, useMemo } = React;\n\nconst IconPicker = ({\n    value,\n    onChange,\n    label,\n    description,\n    validation\n}: FormComponentProps & {\n    label?: React.ReactNode;\n    description?: React.ReactNode;\n}) => {\n    const [filter, setFilter] = useState(\"\");\n    const [mustRenderGrid, setMustRenderGrid] = useState(false);\n\n    const onFilterChange = useCallback(\n        (value, cb) => {\n            setFilter(value);\n            cb();\n        },\n        [filter]\n    );\n\n    const allIcons: CmsIcon[] = useMemo(() => {\n        const plugins = getPlugins<CmsIconsPlugin>(\"cms-icons\");\n        return plugins.reduce((icons: Array<CmsIcon>, pl) => {\n            return icons.concat(pl.getIcons());\n        }, []);\n    }, []);\n\n    const icons = useMemo(() => {\n        return filter ? allIcons.filter(ic => ic.name.includes(filter)) : allIcons;\n    }, [filter]);\n\n    const renderCell = useCallback(\n        ({ closeMenu }) => {\n            return function renderCell({ columnIndex, key, rowIndex, style }) {\n                const item = icons[rowIndex * COLUMN_COUNT + columnIndex];\n                if (!item) {\n                    return null;\n                }\n\n                return (\n                    <div\n                        key={key}\n                        style={style}\n                        className={gridItem}\n                        onClick={() => {\n                            onChange(item.id.join(\"/\"));\n                            closeMenu();\n                        }}\n                    >\n                        <FontAwesomeIcon icon={item.id} size={\"2x\"} />\n                        <Typography use={\"body2\"}>{item.name}</Typography>\n                    </div>\n                );\n            };\n        },\n        [icons]\n    );\n\n    const renderGrid = useCallback(\n        ({ closeMenu }) => {\n            return (\n                <>\n                    <DelayedOnChange value={filter} onChange={onFilterChange}>\n                        {({ value, onChange }) => (\n                            <Input\n                                autoFocus\n                                className={searchInput}\n                                value={value}\n                                onChange={onChange}\n                                placeholder={\"Search icons...\"}\n                            />\n                        )}\n                    </DelayedOnChange>\n                    {icons.length === 0 ? (\n                        <div className={NoResultWrapper}>\n                            <Typography use=\"body1\">No results found.</Typography>\n                        </div>\n                    ) : (\n                        <Grid\n                            className={grid}\n                            cellRenderer={renderCell({ closeMenu })}\n                            columnCount={COLUMN_COUNT}\n                            columnWidth={100}\n                            height={440}\n                            rowCount={Math.ceil(icons.length / COLUMN_COUNT)}\n                            rowHeight={100}\n                            width={640}\n                        />\n                    )}\n                </>\n            );\n        },\n        [icons]\n    );\n\n    const fontAwesomeIconValue: any =\n        typeof value === \"string\" && value.includes(\"/\") ? value.split(\"/\") : [\"fas\", \"star\"];\n\n    return (\n        <>\n            {label && (\n                <div className={iconPickerLabel}>\n                    <Typography use={\"body1\"}>{label}</Typography>\n                </div>\n            )}\n            <div className={MenuWrapper}>\n                <Menu\n                    onOpen={() => setMustRenderGrid(true)}\n                    onClose={() => setMustRenderGrid(false)}\n                    handle={\n                        <div className={pickIcon}>\n                            <FontAwesomeIcon icon={fontAwesomeIconValue} size={\"2x\"} />\n                        </div>\n                    }\n                >\n                    {mustRenderGrid && renderGrid}\n                </Menu>\n            </div>\n            {validation.isValid === false && (\n                <FormElementMessage error>{validation.message}</FormElementMessage>\n            )}\n            {validation.isValid !== false && description && (\n                <FormElementMessage>{description}</FormElementMessage>\n            )}\n        </>\n    );\n};\n\nexport default IconPicker;\n"],"file":"IconPicker.js"}