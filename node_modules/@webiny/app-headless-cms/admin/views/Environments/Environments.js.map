{"version":3,"sources":["../../../../src/admin/views/Environments/Environments.tsx"],"names":["React","SplitView","LeftPanel","RightPanel","FloatingActionButton","EnvironmentsDataList","EnvironmentsForm","CrudProvider","useCms","READ_ENVIRONMENT","LIST_ENVIRONMENTS","CREATE_ENVIRONMENT","UPDATE_ENVIRONMENT","DELETE_ENVIRONMENT","i18n","t","ns","Environments","environments","refreshEnvironments","isSelectedEnvironment","mutation","snackbar","item","options","onCompleted","query","variables","sort","savedOn","actions","resetForm"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,SAApB,EAA+BC,UAA/B,QAAiD,wCAAjD;AACA,SAASC,oBAAT,QAAqC,mDAArC;AACA,OAAOC,oBAAP,MAAiC,wBAAjC;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,SAASC,YAAT,QAA6B,iCAA7B;AACA,SAASC,MAAT,QAAuB,sCAAvB;AACA,SACIC,gBADJ,EAEIC,iBAFJ,EAGIC,kBAHJ,EAIIC,kBAJJ,EAKIC,kBALJ,QAMO,WANP;AAOA,SAASC,IAAT,QAAqB,kBAArB;AACA,IAAMC,CAAC,GAAGD,IAAI,CAACE,EAAL,CAAQ,qCAAR,CAAV;;AAEA,SAASC,YAAT,GAAwB;AAAA,gBAGhBT,MAAM,EAHU;AAAA,qCAEhBU,YAFgB;AAAA,MAEAC,mBAFA,wBAEAA,mBAFA;AAAA,MAEqBC,qBAFrB,wBAEqBA,qBAFrB;;AAKpB,sBACI,oBAAC,YAAD;AACI,IAAA,MAAM,EAAE;AACJC,MAAAA,QAAQ,EAAER,kBADN;AAEJS,MAAAA,QAAQ,EAAE,kBAAAC,IAAI,EAAI;AACd,YAAIH,qBAAqB,CAACG,IAAD,CAAzB,EAAiC;AAC7B,iBAAOR,CAAP;AACH;;AACD,eAAOA,CAAP;AACH;AAPG,KADZ;AAUI,IAAA,IAAI,EAAEN,gBAVV;AAWI,IAAA,MAAM,EAAE;AACJY,MAAAA,QAAQ,EAAEV,kBADN;AAEJa,MAAAA,OAAO,EAAE;AACLC,QAAAA,WAAW,EAAEN;AADR;AAFL,KAXZ;AAiBI,IAAA,MAAM,EAAE;AACJE,MAAAA,QAAQ,EAAET;AADN,KAjBZ;AAoBI,IAAA,IAAI,EAAE;AACFc,MAAAA,KAAK,EAAEhB,iBADL;AAEFiB,MAAAA,SAAS,EAAE;AAAEC,QAAAA,IAAI,EAAE;AAAEC,UAAAA,OAAO,EAAE,CAAC;AAAZ;AAAR;AAFT;AApBV,KAyBK;AAAA,QAAGC,OAAH,QAAGA,OAAH;AAAA,wBACG,uDACI,oBAAC,SAAD,qBACI,oBAAC,SAAD;AAAW,MAAA,IAAI,EAAE;AAAjB,oBACI,oBAAC,oBAAD,OADJ,CADJ,eAII,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAE;AAAlB,oBACI,oBAAC,gBAAD,OADJ,CAJJ,CADJ,eASI,oBAAC,oBAAD;AACI,qBAAY,mBADhB;AAEI,MAAA,OAAO,EAAEA,OAAO,CAACC;AAFrB,MATJ,CADH;AAAA,GAzBL,CADJ;AA4CH;;AAED,eAAed,YAAf","sourcesContent":["import React from \"react\";\nimport { SplitView, LeftPanel, RightPanel } from \"@webiny/app-admin/components/SplitView\";\nimport { FloatingActionButton } from \"@webiny/app-admin/components/FloatingActionButton\";\nimport EnvironmentsDataList from \"./EnvironmentsDataList\";\nimport EnvironmentsForm from \"./EnvironmentsForm\";\nimport { CrudProvider } from \"@webiny/app-admin/contexts/Crud\";\nimport { useCms } from \"@webiny/app-headless-cms/admin/hooks\";\nimport {\n    READ_ENVIRONMENT,\n    LIST_ENVIRONMENTS,\n    CREATE_ENVIRONMENT,\n    UPDATE_ENVIRONMENT,\n    DELETE_ENVIRONMENT\n} from \"./graphql\";\nimport { i18n } from \"@webiny/app/i18n\";\nconst t = i18n.ns(\"app-headless-cms/admin/environments\");\n\nfunction Environments() {\n    const {\n        environments: { refreshEnvironments, isSelectedEnvironment }\n    } = useCms();\n\n    return (\n        <CrudProvider\n            delete={{\n                mutation: DELETE_ENVIRONMENT,\n                snackbar: item => {\n                    if (isSelectedEnvironment(item)) {\n                        return t`Record deleted successfully. Switched to first available environment.`;\n                    }\n                    return t`Record deleted successfully.`;\n                }\n            }}\n            read={READ_ENVIRONMENT}\n            create={{\n                mutation: CREATE_ENVIRONMENT,\n                options: {\n                    onCompleted: refreshEnvironments\n                }\n            }}\n            update={{\n                mutation: UPDATE_ENVIRONMENT\n            }}\n            list={{\n                query: LIST_ENVIRONMENTS,\n                variables: { sort: { savedOn: -1 } }\n            }}\n        >\n            {({ actions }) => (\n                <>\n                    <SplitView>\n                        <LeftPanel span={4}>\n                            <EnvironmentsDataList />\n                        </LeftPanel>\n                        <RightPanel span={8}>\n                            <EnvironmentsForm />\n                        </RightPanel>\n                    </SplitView>\n                    <FloatingActionButton\n                        data-testid=\"new-record-button\"\n                        onClick={actions.resetForm}\n                    />\n                </>\n            )}\n        </CrudProvider>\n    );\n}\n\nexport default Environments;\n"],"file":"Environments.js"}