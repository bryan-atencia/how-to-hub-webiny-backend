import _objectWithoutProperties from "@babel/runtime/helpers/objectWithoutProperties";
import React from "react";
import { getPlugin } from "@webiny/plugins";
import { Authenticator } from "./cognito/Authenticator";
import SignInState from "./cognito/states/SignIn";
import RequireNewPasswordState from "./cognito/states/RequireNewPassword";
import ForgotPasswordState from "./cognito/states/ForgotPassword";
import SetNewPasswordState from "./cognito/states/SetNewPassword";
import invariant from "invariant";

var Authentication = function Authentication(_ref) {
  var onIdToken = _ref.onIdToken,
      viewProps = _objectWithoutProperties(_ref, ["onIdToken"]);

  var _getPlugin = getPlugin("cognito-view-sign-in"),
      SignIn = _getPlugin.view;

  invariant(SignIn, "Missing \"cognito-view-sign-in\" plugin!");

  var _getPlugin2 = getPlugin("cognito-view-require-new-password"),
      RequireNewPassword = _getPlugin2.view;

  invariant(RequireNewPassword, "Missing \"cognito-view-require-new-password\" plugin!");

  var _getPlugin3 = getPlugin("cognito-view-forgot-password"),
      ForgotPassword = _getPlugin3.view;

  invariant(ForgotPassword, "Missing \"cognito-view-forgot-password\" plugin!");

  var _getPlugin4 = getPlugin("cognito-view-set-new-password"),
      SetNewPassword = _getPlugin4.view;

  invariant(SetNewPassword, "Missing \"cognito-view-set-new-password\" plugin!");

  var _getPlugin5 = getPlugin("cognito-view-loading"),
      Loading = _getPlugin5.view;

  invariant(Loading, "Missing \"cognito-view-loading\" plugin!");
  return /*#__PURE__*/React.createElement(Authenticator, {
    onIdToken: onIdToken
  }, function (_ref2) {
    var checkingUser = _ref2.checkingUser,
        authProps = _objectWithoutProperties(_ref2, ["checkingUser"]);

    return checkingUser ? /*#__PURE__*/React.createElement(Loading, null) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SignInState, authProps, /*#__PURE__*/React.createElement(SignIn, viewProps)), /*#__PURE__*/React.createElement(RequireNewPasswordState, authProps, /*#__PURE__*/React.createElement(RequireNewPassword, viewProps)), /*#__PURE__*/React.createElement(ForgotPasswordState, authProps, /*#__PURE__*/React.createElement(ForgotPassword, viewProps)), /*#__PURE__*/React.createElement(SetNewPasswordState, authProps, /*#__PURE__*/React.createElement(SetNewPassword, viewProps)));
  });
};

export default Authentication;
//# sourceMappingURL=Authentication.js.map