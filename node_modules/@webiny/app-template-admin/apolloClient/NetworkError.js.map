{"version":3,"sources":["../../src/apolloClient/NetworkError.tsx"],"names":["React","useQuery","gql","Alert","Elevation","css","styled","GET_ERROR","errorStyle","margin","padding","boxSizing","Code","borderRadius","color","backgroundColor","Paragraph","lineHeight","NetworkError","children","fetchPolicy","data","process","env","REACT_APP_GRAPHQL_API_URL","NODE_ENV","networkError"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useQuery } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { Alert } from \"@webiny/ui/Alert\";\nimport { Elevation } from \"@webiny/ui/Elevation\";\nimport { css } from \"emotion\";\nimport styled from \"@emotion/styled\";\n\nconst GET_ERROR = gql`\n    {\n        networkError\n    }\n`;\n\nconst errorStyle = css({\n    margin: 50,\n    padding: \"15px 25px 5px 25px\",\n    boxSizing: \"border-box\"\n});\n\nconst Code = styled(\"span\")({\n    padding: \"2px 5px\",\n    margin: \"0 2px\",\n    borderRadius: \"5px\",\n    color: \"var(--webiny-theme-color-on-primary)\",\n    backgroundColor: \"var(--webiny-theme-color-primary)\"\n});\n\nconst Paragraph = styled(\"span\")({\n    lineHeight: 1.8\n});\n\nconst NetworkError = ({ children }) => {\n    const { data } = useQuery(GET_ERROR, { fetchPolicy: \"cache-only\" });\n\n    if (!process.env.REACT_APP_GRAPHQL_API_URL && process.env.NODE_ENV === \"production\") {\n        return (\n            <Elevation className={errorStyle} z={2}>\n                <Alert type={\"danger\"} title={\"GraphQL API is unavailable\"}>\n                    <Paragraph>\n                        Looks like you&#39;ve deployed your apps before deploying an API for them.\n                        <br />\n                        Make sure you deploy a matching API environment before deploying your apps\n                        by running\n                        <Code>yarn webiny deploy api --env=your-env</Code>. This is necessary for\n                        your apps to be built correctly.\n                        <br />\n                        Once your API is deployed, deploy your apps by running\n                        <Code>yarn webiny deploy apps --env=your-env</Code>.\n                    </Paragraph>\n                    <br />\n                    <Paragraph>\n                        For step by step instructions on deploying your apps, visit our{\" \"}\n                        <a\n                            target={\"_blank\"}\n                            rel={\"noreferrer\"}\n                            href={\"https://docs.webiny.com/docs/get-started/going-live\"}\n                        >\n                            Going Live guide\n                        </a>\n                        .\n                    </Paragraph>\n                </Alert>\n            </Elevation>\n        );\n    }\n\n    if (!process.env.REACT_APP_GRAPHQL_API_URL && process.env.NODE_ENV === \"development\") {\n        return (\n            <Elevation className={errorStyle} z={2}>\n                <Alert type={\"danger\"} title={\"GraphQL API is unavailable\"}>\n                    <Paragraph>\n                        Looks like you&#39;ve started your app before deploying an API for it.\n                        <br />\n                        Make sure you deploy a <Code>local</Code> environment of your API by running\n                        <Code>yarn webiny deploy api --env=local</Code>. This is necessary to run\n                        local React apps.\n                        <br />\n                        Once your API is deployed, restart this app via your terminal by running{\" \"}\n                        <Code>yarn start</Code> again.\n                    </Paragraph>\n                    <br />\n                    <Paragraph>\n                        For step by step instructions on getting started with Webiny, visit our{\" \"}\n                        <a\n                            target={\"_blank\"}\n                            rel={\"noreferrer\"}\n                            href={\"https://docs.webiny.com/docs/get-started/quick-start\"}\n                        >\n                            Quick Start guide\n                        </a>\n                        .\n                    </Paragraph>\n                </Alert>\n            </Elevation>\n        );\n    }\n\n    return data && data.networkError ? (\n        <Elevation className={errorStyle} z={2}>\n            <Alert type={\"danger\"} title={\"GraphQL API is unavailable\"}>\n                <Paragraph>\n                    Your API seems to be unavailable!\n                    <br />\n                    Make sure your API is working by visiting{\" \"}\n                    <a\n                        href={process.env.REACT_APP_GRAPHQL_API_URL}\n                        target={\"_blank\"}\n                        rel={\"noreferrer\"}\n                    >\n                        {process.env.REACT_APP_GRAPHQL_API_URL}\n                    </a>\n                    .\n                    <br />\n                    If you&#39;ve recently deployed your API, please allow <Code>\n                        ~10 minutes\n                    </Code>{\" \"}\n                    for your API URL to become available.\n                </Paragraph>\n            </Alert>\n        </Elevation>\n    ) : (\n        children\n    );\n};\n\nexport { NetworkError, GET_ERROR };\n"],"file":"NetworkError.js"}