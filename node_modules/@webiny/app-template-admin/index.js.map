{"version":3,"sources":["../src/index.tsx"],"names":["React","createTemplate","ApolloProvider","UiProvider","I18NProvider","SecurityProvider","CircularProgress","AppInstaller","ThemeProvider","fileUploadPlugin","imagePlugin","adminPlugins","welcomeScreenPlugins","i18nPlugins","securityPlugins","cognito","cognitoTheme","fileManagerPlugins","createApolloClient","NetworkError","BrowserRouter","Route","Redirect","opts","appStructure","type","name","render","children","process","env","PUBLIC_URL","defaultRoute","securityProvider","otherPlugins","plugins"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { createTemplate } from \"@webiny/app-template\";\nimport { ApolloProvider } from \"react-apollo\";\n\n// App structure imports\nimport { UiProvider } from \"@webiny/app/contexts/Ui\";\nimport { I18NProvider } from \"@webiny/app-i18n/contexts/I18N\";\nimport { SecurityProvider } from \"@webiny/app-security/contexts/Security\";\nimport { CircularProgress } from \"@webiny/ui/Progress\";\nimport { AppInstaller } from \"@webiny/app-admin/components/Install/AppInstaller\";\nimport { ThemeProvider } from \"@webiny/app-admin/contexts/Theme\";\n\n// Other plugins\nimport { fileUploadPlugin, imagePlugin } from \"@webiny/app/plugins\";\nimport adminPlugins from \"@webiny/app-admin/plugins\";\nimport welcomeScreenPlugins from \"@webiny/app-plugin-admin-welcome-screen\";\nimport i18nPlugins from \"@webiny/app-i18n/admin/plugins\";\nimport securityPlugins from \"@webiny/app-security/admin/plugins\";\nimport cognito from \"@webiny/app-plugin-security-cognito\";\nimport cognitoTheme from \"@webiny/app-plugin-security-cognito-theme/admin\";\nimport fileManagerPlugins from \"@webiny/app-file-manager/admin\";\n\n// ApolloClient\nimport { createApolloClient } from \"./apolloClient\";\nimport { NetworkError } from \"./apolloClient/NetworkError\";\n\n// Router\nimport { BrowserRouter, Route, Redirect } from \"@webiny/react-router\";\n\nexport type AdminAppOptions = {\n    cognito: {\n        region: string;\n        userPoolId: string;\n        userPoolWebClientId: string;\n    };\n    defaultRoute?: string;\n    plugins?: any[];\n};\n\nexport default createTemplate<AdminAppOptions>(opts => {\n    const appStructure = [\n        {\n            type: \"app-template-renderer\",\n            name: \"app-template-renderer-apollo\",\n            render(children) {\n                return (\n                    <ApolloProvider client={createApolloClient()}>\n                        <NetworkError>{children}</NetworkError>\n                    </ApolloProvider>\n                );\n            }\n        },\n        {\n            type: \"app-template-renderer\",\n            name: \"app-template-renderer-router\",\n            render(children) {\n                return (\n                    <BrowserRouter basename={process.env.PUBLIC_URL}>\n                        {children}\n                        <Route\n                            exact\n                            path=\"/\"\n                            render={() => <Redirect to={opts.defaultRoute || \"/\"} />}\n                        />\n                    </BrowserRouter>\n                );\n            }\n        },\n        {\n            type: \"app-template-renderer\",\n            name: \"app-template-renderer-ui\",\n            render(children) {\n                return <UiProvider>{children}</UiProvider>;\n            }\n        },\n        {\n            type: \"app-template-renderer\",\n            name: \"app-template-renderer-i18n\",\n            render(children) {\n                return (\n                    <I18NProvider loader={<CircularProgress label={\"Loading locales...\"} />}>\n                        {children}\n                    </I18NProvider>\n                );\n            }\n        },\n        {\n            type: \"app-template-renderer\",\n            name: \"app-template-renderer-app-installer\",\n            render(children) {\n                const securityProvider = (\n                    <SecurityProvider loader={<CircularProgress label={\"Checking user...\"} />} />\n                );\n\n                return <AppInstaller security={securityProvider}>{children}</AppInstaller>;\n            }\n        },\n        {\n            type: \"app-template-renderer\",\n            name: \"app-template-renderer-admin-theme\",\n            render(children) {\n                return <ThemeProvider>{children}</ThemeProvider>;\n            }\n        }\n    ];\n\n    const otherPlugins = [\n        welcomeScreenPlugins(),\n        fileUploadPlugin(),\n        imagePlugin(),\n        adminPlugins(),\n        i18nPlugins(),\n        securityPlugins(),\n        cognito(opts.cognito),\n        cognitoTheme(),\n        fileManagerPlugins(),\n        ...(opts.plugins || [])\n    ];\n\n    return [...appStructure, ...otherPlugins];\n});\n"],"file":"index.js"}