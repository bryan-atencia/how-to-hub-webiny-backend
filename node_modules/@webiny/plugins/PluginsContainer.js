"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PluginsContainer = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

const assign = (plugins, target) => {
  for (let i = 0; i < plugins.length; i++) {
    const plugin = plugins[i];

    if (Array.isArray(plugin)) {
      assign(plugin, target);
      continue;
    }

    const name = plugin._name || plugin.name;

    if (!name) {
      throw Error(`Plugin must have a "name" or "_name" key.`);
    }

    target[name] = plugin;
    plugin.init && plugin.init();
  }
};

class PluginsContainer {
  constructor(plugins = []) {
    (0, _defineProperty2.default)(this, "plugins", {});
    assign(plugins, this.plugins);
  }

  byName(name) {
    return this.plugins[name];
  }

  byType(type) {
    if (!type) {
      return Object.values(this.plugins);
    }

    return Object.values(this.plugins).filter(pl => pl.type === type);
  }

  register(...plugins) {
    assign(plugins, this.plugins);
  }

  unregister(name) {
    delete this.plugins[name];
  }

}

exports.PluginsContainer = PluginsContainer;
//# sourceMappingURL=PluginsContainer.js.map