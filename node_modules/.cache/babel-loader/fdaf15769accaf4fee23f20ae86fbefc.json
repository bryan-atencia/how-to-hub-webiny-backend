{"ast":null,"code":"import React from \"react\";\nimport { css } from \"emotion\";\nimport TimeAgo from \"timeago-react\";\nimport { ListItem, ListItemText, ListItemTextPrimary, ListItemTextSecondary, ListItemGraphic, ListItemMeta } from \"@webiny/ui/List\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport { Icon } from \"@webiny/ui/Icon\";\nimport { MenuItem, Menu, MenuDivider } from \"@webiny/ui/Menu\";\nimport { ConfirmationDialog } from \"@webiny/ui/ConfirmationDialog\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { ReactComponent as MoreVerticalIcon } from \"@svgr/webpack!@webiny/app-page-builder/admin/assets/more_vert.svg\";\nimport { ReactComponent as LockIcon } from \"@svgr/webpack!@webiny/app-page-builder/admin/assets/lock.svg\";\nimport { ReactComponent as BeenHereIcon } from \"@svgr/webpack!@webiny/app-page-builder/admin/assets/beenhere.svg\";\nimport { ReactComponent as GestureIcon } from \"@svgr/webpack!@webiny/app-page-builder/admin/assets/gesture.svg\";\nimport { useRevisionHandlers } from \"./useRevisionHandlers\";\nimport { usePageBuilderSettings } from \"@webiny/app-page-builder/admin/hooks/usePageBuilderSettings\";\nimport { ReactComponent as AddIcon } from \"@svgr/webpack!@webiny/app-page-builder/admin/assets/add.svg\";\nimport { ReactComponent as EditIcon } from \"@svgr/webpack!@webiny/app-page-builder/admin/assets/edit.svg\";\nimport { ReactComponent as PublishIcon } from \"@svgr/webpack!@webiny/app-page-builder/admin/assets/round-publish-24px.svg\";\nimport { ReactComponent as DeleteIcon } from \"@svgr/webpack!@webiny/app-page-builder/admin/assets/delete.svg\";\nimport { ReactComponent as PreviewIcon } from \"@svgr/webpack!@webiny/app-page-builder/admin/assets/visibility.svg\";\nvar primaryColor = /*#__PURE__*/css({\n  color: \"var(--mdc-theme-primary)\"\n}, \"label:primaryColor;\");\nvar revisionsMenu = /*#__PURE__*/css({\n  width: 250,\n  right: -105,\n  left: \"auto !important\"\n}, \"label:revisionsMenu;\");\n\nvar getIcon = function getIcon(rev) {\n  switch (true) {\n    case rev.locked && !rev.published:\n      return {\n        icon: /*#__PURE__*/React.createElement(Icon, {\n          icon: /*#__PURE__*/React.createElement(LockIcon, null)\n        }),\n        text: \"This revision is locked (it has already been published)\"\n      };\n\n    case rev.published:\n      return {\n        icon: /*#__PURE__*/React.createElement(Icon, {\n          icon: /*#__PURE__*/React.createElement(BeenHereIcon, null),\n          className: primaryColor\n        }),\n        text: \"This revision is currently published!\"\n      };\n\n    default:\n      return {\n        icon: /*#__PURE__*/React.createElement(Icon, {\n          icon: /*#__PURE__*/React.createElement(GestureIcon, null)\n        }),\n        text: \"This is a draft\"\n      };\n  }\n};\n\nvar Div = function Div(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/React.createElement(\"div\", null, children);\n};\n\nvar Revision = function Revision(_ref2) {\n  var rev = _ref2.rev;\n\n  var _getIcon = getIcon(rev),\n      icon = _getIcon.icon,\n      tooltipText = _getIcon.text;\n\n  var _usePageBuilderSettin = usePageBuilderSettings(),\n      getPagePreviewUrl = _usePageBuilderSettin.getPagePreviewUrl;\n\n  var _useRevisionHandlers = useRevisionHandlers({\n    rev: rev\n  }),\n      deleteRevision = _useRevisionHandlers.deleteRevision,\n      createRevision = _useRevisionHandlers.createRevision,\n      publishRevision = _useRevisionHandlers.publishRevision,\n      editRevision = _useRevisionHandlers.editRevision;\n\n  return /*#__PURE__*/React.createElement(ConfirmationDialog, {\n    title: \"Confirmation required!\",\n    message: /*#__PURE__*/React.createElement(\"span\", null, \"Are you sure you want to delete this revision?\")\n  }, function (_ref3) {\n    var showConfirmation = _ref3.showConfirmation;\n    return /*#__PURE__*/React.createElement(ListItem, null, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Tooltip, {\n      content: tooltipText,\n      placement: \"bottom\"\n    }, icon)), /*#__PURE__*/React.createElement(ListItemText, null, /*#__PURE__*/React.createElement(ListItemTextPrimary, null, rev.title), /*#__PURE__*/React.createElement(ListItemTextSecondary, null, \"Last modified \", /*#__PURE__*/React.createElement(TimeAgo, {\n      datetime: rev.savedOn\n    }), \" (#\", rev.version, \")\")), /*#__PURE__*/React.createElement(ListItemMeta, null, /*#__PURE__*/React.createElement(Menu, {\n      handle: /*#__PURE__*/React.createElement(IconButton, {\n        icon: /*#__PURE__*/React.createElement(MoreVerticalIcon, null)\n      }),\n      className: revisionsMenu\n      /*openSide={\"left\"} TODO: @adrian */\n\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: createRevision\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(AddIcon, null)\n    })), \"New from current\"), !rev.locked && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: editRevision\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(EditIcon, null)\n    })), \"Edit\"), !rev.published && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: function onClick() {\n        return publishRevision(rev);\n      }\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(PublishIcon, null)\n    })), \"Publish\"), /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: function onClick() {\n        return window.open(getPagePreviewUrl(rev), \"_blank\");\n      }\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(PreviewIcon, null)\n    })), \"Preview\"), !rev.locked && rev.id !== rev.parent && /*#__PURE__*/React.createElement(Div, null, /*#__PURE__*/React.createElement(MenuDivider, null), /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: function onClick() {\n        return showConfirmation(deleteRevision);\n      }\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n    })), \"Delete\")))));\n  });\n};\n\nexport default Revision;","map":null,"metadata":{},"sourceType":"module"}