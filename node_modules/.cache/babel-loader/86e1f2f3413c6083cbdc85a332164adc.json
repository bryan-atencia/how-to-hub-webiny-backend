{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _cloneDeep from \"lodash/cloneDeep\";\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"Save\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"Cancel\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"Appearance\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"Predefined Values\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"General\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"Field Settings - {fieldTypeLabel}\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"Field Settings\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { css } from \"emotion\";\nimport { Dialog, DialogContent, DialogTitle, DialogActions, DialogButton } from \"@webiny/ui/Dialog\";\nimport { Form } from \"@webiny/form\";\nimport { Tabs, Tab } from \"@webiny/ui/Tabs\";\nimport GeneralTab from \"./EditFieldDialog/GeneralTab\";\nimport AppearanceTab from \"./EditFieldDialog/AppearanceTab\";\nimport PredefinedValuesTab from \"./EditFieldDialog/PredefinedValuesTab\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { useContentModelEditor } from \"@webiny/app-headless-cms/admin/components/ContentModelEditor/Context\";\nimport { getPlugins } from \"@webiny/plugins\";\nvar t = i18n.namespace(\"app-headless-cms/admin/components/editor\");\nvar dialogBody = /*#__PURE__*/css({\n  \"&.webiny-ui-dialog__content\": {\n    width: 875,\n    height: 450\n  }\n}, \"label:dialogBody;\");\n\nvar EditFieldDialog = function EditFieldDialog(_ref) {\n  var field = _ref.field,\n      onSubmit = _ref.onSubmit,\n      props = _objectWithoutProperties(_ref, [\"field\", \"onSubmit\"]);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      current = _useState2[0],\n      setCurrent = _useState2[1];\n\n  var _useContentModelEdito = useContentModelEditor(),\n      getFieldPlugin = _useContentModelEdito.getFieldPlugin;\n\n  useEffect(function () {\n    if (!field) {\n      return setCurrent(field);\n    }\n\n    var clonedField = _cloneDeep(field);\n\n    if (!clonedField.renderer || !clonedField.renderer.name) {\n      var _getPlugins$filter = getPlugins(\"cms-editor-field-renderer\").filter(function (item) {\n        return item.renderer.canUse({\n          field: field\n        });\n      }),\n          _getPlugins$filter2 = _slicedToArray(_getPlugins$filter, 1),\n          renderPlugin = _getPlugins$filter2[0];\n\n      if (renderPlugin) {\n        clonedField.renderer = {\n          name: renderPlugin.renderer.rendererName\n        };\n      }\n    }\n\n    setCurrent(clonedField);\n  }, [field]);\n  var onClose = useCallback(function () {\n    setCurrent(null);\n    props.onClose();\n  }, undefined);\n  var render = null;\n  var headerTitle = t(_templateObject());\n\n  if (current) {\n    var fieldPlugin = getFieldPlugin({\n      type: current.type\n    });\n\n    if (fieldPlugin) {\n      headerTitle = t(_templateObject2())({\n        fieldTypeLabel: fieldPlugin.field.label\n      });\n    }\n\n    render = /*#__PURE__*/React.createElement(Form, {\n      data: current,\n      onSubmit: onSubmit\n    }, function (form) {\n      var predefinedValuesTabEnabled = fieldPlugin.field.allowPredefinedValues && form.data.predefinedValues && form.data.predefinedValues.enabled;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DialogContent, {\n        className: dialogBody\n      }, /*#__PURE__*/React.createElement(Tabs, null, /*#__PURE__*/React.createElement(Tab, {\n        label: t(_templateObject3())\n      }, /*#__PURE__*/React.createElement(GeneralTab, {\n        form: form,\n        field: form.data,\n        fieldPlugin: fieldPlugin\n      })), /*#__PURE__*/React.createElement(Tab, {\n        label: t(_templateObject4()),\n        disabled: !predefinedValuesTabEnabled\n      }, predefinedValuesTabEnabled && /*#__PURE__*/React.createElement(PredefinedValuesTab, {\n        form: form,\n        field: form.data,\n        fieldPlugin: fieldPlugin\n      })), /*#__PURE__*/React.createElement(Tab, {\n        label: t(_templateObject5())\n      }, /*#__PURE__*/React.createElement(AppearanceTab, {\n        form: form,\n        field: form.data,\n        fieldPlugin: fieldPlugin\n      })))), /*#__PURE__*/React.createElement(DialogActions, {\n        style: {\n          justifyContent: \"flex-end\"\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(DialogButton, {\n        onClick: onClose\n      }, t(_templateObject6())), /*#__PURE__*/React.createElement(DialogButton, {\n        onClick: form.submit\n      }, t(_templateObject7())))));\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Dialog, {\n    preventOutsideDismiss: true,\n    open: !!current,\n    onClose: onClose\n  }, /*#__PURE__*/React.createElement(DialogTitle, null, headerTitle), render);\n};\n\nexport default EditFieldDialog;","map":null,"metadata":{},"sourceType":"module"}