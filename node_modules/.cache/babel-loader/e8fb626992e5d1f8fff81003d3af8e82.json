{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _get from \"lodash/get\";\nimport * as React from \"react\";\nimport { ElementRoot } from \"@webiny/app-page-builder/render/components/ElementRoot\";\nimport { Form } from \"@webiny/form\";\nimport { getPlugins } from \"@webiny/plugins\";\nvar MailchimpElement = /*#__PURE__*/React.memo(function (_ref) {\n  var element = _ref.element;\n\n  var selected = _get(element, \"data.settings.component\", _get(element, \"settings.component\"));\n\n  var component = getPlugins(\"pb-page-element-mailchimp-component\").find(function (cmp) {\n    return cmp.componentName === selected;\n  });\n  var render = /*#__PURE__*/React.createElement(\"span\", null, \"You must configure your embed in the settings!\");\n\n  if (component) {\n    var Component = component.component;\n    render = /*#__PURE__*/React.createElement(Form, {\n      key: component.name\n    }, function (_ref2) {\n      var form = _ref2.form;\n      return /*#__PURE__*/React.createElement(Component, Object.assign({\n        processing: false // It will suffice for editor preview needs.\n\n      }, form, {\n        submit: /*#__PURE__*/function () {\n          var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref3) {\n            var onSuccess;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    onSuccess = _ref3.onSuccess;\n                    _context.next = 3;\n                    return form.validate();\n\n                  case 3:\n                    if (!_context.sent) {\n                      _context.next = 6;\n                      break;\n                    }\n\n                    form.submit();\n                    onSuccess && onSuccess();\n\n                  case 6:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref4.apply(this, arguments);\n          };\n        }()\n      }));\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(ElementRoot, {\n    key: component ? component.name : \"no-component\",\n    element: element,\n    className: \"webiny-pb-page-element-mailchimp\"\n  }, render);\n});\nMailchimpElement.displayName = \"MailchimpElement\";\nexport default MailchimpElement;","map":null,"metadata":{},"sourceType":"module"}