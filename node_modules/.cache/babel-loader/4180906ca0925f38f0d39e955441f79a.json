{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"Please type {resourceName} to confirm.\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport { css } from \"emotion\";\nimport noop from \"lodash/noop\";\nimport { Dialog, DialogButton, DialogCancel, DialogActions, DialogTitle, DialogContent } from \"@webiny/ui/Dialog\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { CircularProgress } from \"@webiny/ui/Progress\";\nimport { Alert } from \"@webiny/ui/Alert\";\nimport { i18n } from \"@webiny/app/i18n\";\nvar t = i18n.ns(\"app-headless-cms/admin/environments/data-list-utils\");\nvar messageStyle = /*#__PURE__*/css({\n  \"& .mdc-dialog__surface\": {\n    maxWidth: \"540px !important\"\n  },\n  \"& .mdc-dialog__content\": {\n    span: {\n      display: \"inline-block\",\n      marginBottom: 16\n    },\n    b: {\n      fontWeight: \"bold\"\n    }\n  },\n  \"& .mdc-dialog__actions\": {\n    alignItems: \"center !important\"\n  },\n  \"& .mdc-dialog__button\": {\n    width: \"100%\",\n    \"&:nth-child(2)\": {\n      marginLeft: \"0px !important\"\n    }\n  }\n}, \"label:messageStyle;\");\nvar confirmButtonStyles = /*#__PURE__*/css({\n  backgroundColor: \"#FED7D7 !important\",\n  color: \"#9B2C2C !important\",\n  \"&:disabled\": {\n    opacity: 0.4\n  }\n}, \"label:confirmButtonStyles;\");\nvar inputStyles = /*#__PURE__*/css({\n  margin: \"16px 0px\"\n}, \"label:inputStyles;\");\n/**\n * Use ConfirmationDialog component to display a list of choices, once the handler is triggered.\n */\n\nvar ConfirmationDialogWithInput = /*#__PURE__*/function (_React$Component) {\n  _inherits(ConfirmationDialogWithInput, _React$Component);\n\n  var _super = _createSuper(ConfirmationDialogWithInput);\n\n  function ConfirmationDialogWithInput() {\n    var _this;\n\n    _classCallCheck(this, ConfirmationDialogWithInput);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"__isMounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"callbacks\", {\n      onAccept: noop,\n      onCancel: noop\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      show: false,\n      loading: false,\n      name: \"\",\n      disableConfirm: true\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showConfirmation\", function (onAccept, onCancel) {\n      _this.callbacks = {\n        onAccept: onAccept,\n        onCancel: onCancel\n      };\n\n      _this.setState({\n        show: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hideConfirmation\", function () {\n      _this.setState({\n        show: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAccept\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var onAccept;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              onAccept = _this.callbacks.onAccept;\n\n              if (!(typeof onAccept === \"function\")) {\n                _context.next = 6;\n                break;\n              }\n\n              _this.setState({\n                loading: true\n              });\n\n              _context.next = 5;\n              return onAccept();\n\n            case 5:\n              if (_this.__isMounted) {\n                _this.setState({\n                  loading: false,\n                  show: false\n                });\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var onCancel;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              onCancel = _this.callbacks.onCancel;\n\n              if (!(typeof onCancel === \"function\")) {\n                _context2.next = 4;\n                break;\n              }\n\n              _context2.next = 4;\n              return onCancel();\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnchange\", function (value) {\n      _this.setState({\n        name: value\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(ConfirmationDialogWithInput, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.__isMounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.__isMounted = false;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevState.name === this.state.name) {\n        return;\n      }\n\n      if (this.state.disableConfirm && this.state.name === this.props.resourceName) {\n        this.setState({\n          disableConfirm: false\n        });\n      } else {\n        this.setState({\n          disableConfirm: true\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Dialog, {\n        className: messageStyle,\n        open: this.state.show,\n        onClose: this.hideConfirmation,\n        \"data-testid\": this.props[\"data-testid\"]\n      }, this.state.loading ? this.props.loading : null, /*#__PURE__*/React.createElement(DialogTitle, null, this.props.title), /*#__PURE__*/React.createElement(DialogContent, null, /*#__PURE__*/React.createElement(Alert, {\n        title: \"Wait! Let's review what you're about to do.\",\n        type: \"warning\"\n      }), /*#__PURE__*/React.createElement(Typography, {\n        use: \"body1\"\n      }, this.props.message), \" \", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(Typography, {\n        use: \"body1\"\n      }, t(_templateObject())({\n        resourceName: /*#__PURE__*/React.createElement(\"b\", null, this.props.resourceName)\n      })), /*#__PURE__*/React.createElement(Input, {\n        className: inputStyles,\n        value: this.state.name,\n        onChange: this.handleOnchange\n      })), /*#__PURE__*/React.createElement(DialogActions, null, /*#__PURE__*/React.createElement(DialogCancel, {\n        onClick: this.onCancel\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(DialogButton, {\n        className: confirmButtonStyles,\n        \"data-testid\": \"confirmationdialog-confirm-action\",\n        onClick: this.onAccept,\n        disabled: this.state.disableConfirm\n      }, \"I understand the consequences, delete this environment\"))), this.props.children({\n        showConfirmation: this.showConfirmation\n      }));\n    }\n  }]);\n\n  return ConfirmationDialogWithInput;\n}(React.Component);\n\n_defineProperty(ConfirmationDialogWithInput, \"defaultProps\", {\n  title: \"Confirmation\",\n  message: \"Are you sure you want to continue?\",\n  loading: /*#__PURE__*/React.createElement(CircularProgress, null),\n  resourceName: null\n});\n\nexport { ConfirmationDialogWithInput };","map":null,"metadata":{},"sourceType":"module"}