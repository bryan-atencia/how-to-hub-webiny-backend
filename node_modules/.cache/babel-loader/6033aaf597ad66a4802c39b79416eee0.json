{"ast":null,"code":"import _get from \"lodash/get\";\nimport React, { useEffect, useCallback } from \"react\";\nimport { css } from \"emotion\";\n\nfunction appendSDK(props) {\n  var sdk = props.sdk,\n      global = props.global,\n      element = props.element;\n\n  var _ref = _get(element, \"data.source\") || {},\n      url = _ref.url;\n\n  if (!sdk || !url || window[global]) {\n    return Promise.resolve();\n  }\n\n  return new Promise(function (resolve) {\n    var script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = encodeURI(sdk);\n    script.setAttribute(\"async\", \"\");\n    script.setAttribute(\"charset\", \"utf-8\");\n    script.onload = resolve;\n    document.body.appendChild(script);\n  });\n}\n\nfunction initEmbed(props) {\n  var sdk = props.sdk,\n      init = props.init,\n      element = props.element;\n\n  if (sdk && _get(element, \"data.source.url\")) {\n    var node = document.getElementById(element.id);\n\n    if (typeof init === \"function\" && node) {\n      init({\n        props: props,\n        node: node\n      });\n    }\n  }\n}\n\nvar centerAlign = /*#__PURE__*/css({\n  \"*:first-of-type\": {\n    marginLeft: \"auto !important\",\n    marginRight: \"auto !important\"\n  }\n}, \"label:centerAlign;\");\nexport default (function (props) {\n  var element = props.element,\n      renderEmbed = props.renderEmbed;\n\n  var _ref2 = _get(element, \"data.source\") || {},\n      url = _ref2.url;\n\n  var renderer = useCallback(function () {\n    if (typeof renderEmbed === \"function\") {\n      return renderEmbed(props);\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: element.id,\n      className: centerAlign,\n      dangerouslySetInnerHTML: {\n        __html: _get(element, \"data.oembed.html\") || \"\"\n      }\n    });\n  }, [element, renderEmbed]);\n  useEffect(function () {\n    appendSDK(props).then(function () {\n      return initEmbed(props);\n    });\n  });\n  return url ? renderer() : null;\n});","map":null,"metadata":{},"sourceType":"module"}