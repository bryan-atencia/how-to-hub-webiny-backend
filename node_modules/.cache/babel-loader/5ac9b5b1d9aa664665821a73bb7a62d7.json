{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"Before creating an index, please add at least one field to the content model.\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"Index removed. To apply the changes, please save the content model.\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"You are about to remove the {index} index. Are you sure you want to continue?\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"Confirm index removal\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"The index for the \\\"id\\\" field cannot be deleted.\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"N/A\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"Created: {time}\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"Add index\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useCallback, useState } from \"react\";\nimport { css } from \"emotion\";\nimport { useContentModelEditor } from \"@webiny/app-headless-cms/admin/components/ContentModelEditor/Context\";\nimport { Elevation } from \"@webiny/ui/Elevation\";\nimport { List, ListActions, ListItem, ListItemMeta, ListItemText, ListItemTextPrimary, ListItemTextSecondary } from \"@webiny/ui/List\";\nimport { ConfirmationDialog } from \"@webiny/ui/ConfirmationDialog\";\nimport { DeleteIcon } from \"@webiny/ui/List/DataList/icons\";\nimport { ButtonDefault, ButtonIcon } from \"@webiny/ui/Button\";\nimport { ReactComponent as AddIcon } from \"@svgr/webpack!@webiny/app-admin/assets/icons/round-add-24px.svg\";\nimport NewIndexDialog from \"./NewIndexDialog\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport TimeAgo from \"timeago-react\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nvar t = i18n.ns(\"app-headless-cms/admin/components/editor/tabs/indexes\");\nvar style = {\n  previewWrapper: /*#__PURE__*/css({\n    padding: 40,\n    backgroundColor: \"var(--webiny-theme-color-surface, #fff) !important\",\n    margin: 40,\n    boxSizing: \"border-box\"\n  }, \"label:previewWrapper;\"),\n  listWrapper: /*#__PURE__*/css({\n    marginBottom: 10,\n    display: \"flex\",\n    flexDirection: \"column\",\n    \".mdc-list .mdc-list-item\": {\n      borderBottom: \"1px solid var(--mdc-theme-on-background)\"\n    },\n    \".mdc-list .mdc-list-item:last-child\": {\n      borderBottom: \"none\"\n    }\n  }, \"label:listWrapper;\"),\n  addIndexButton: /*#__PURE__*/css({\n    textAlign: \"center\",\n    width: \"100%\"\n  }, \"label:addIndexButton;\"),\n  noFieldsMessage: /*#__PURE__*/css({\n    textAlign: \"center\"\n  }, \"label:noFieldsMessage;\")\n};\nexport var IndexesTab = function IndexesTab() {\n  var _useContentModelEdito = useContentModelEditor(),\n      data = _useContentModelEdito.data,\n      setData = _useContentModelEdito.setData;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dialogOpen = _useState2[0],\n      setDialogOpen = _useState2[1];\n\n  var _useSnackbar = useSnackbar(),\n      showSnackbar = _useSnackbar.showSnackbar;\n\n  var indexes = data.indexes,\n      fields = data.fields;\n  var isDefaultIdIndex = useCallback(function (index) {\n    return index.fields.length === 1 && index.fields[0] === \"id\";\n  }, []);\n  return /*#__PURE__*/React.createElement(Elevation, {\n    z: 1,\n    className: style.previewWrapper\n  }, fields && fields.length ? /*#__PURE__*/React.createElement(\"div\", {\n    className: style.listWrapper\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: style.addIndexButton\n  }, /*#__PURE__*/React.createElement(ButtonDefault, {\n    onClick: function onClick() {\n      return setDialogOpen(true);\n    }\n  }, /*#__PURE__*/React.createElement(ButtonIcon, {\n    icon: /*#__PURE__*/React.createElement(AddIcon, null)\n  }), t(_templateObject())), /*#__PURE__*/React.createElement(NewIndexDialog, {\n    open: dialogOpen,\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    }\n  })), /*#__PURE__*/React.createElement(List, {\n    twoLine: true\n  }, indexes.map(function (item) {\n    var fieldsList = item.fields.join(\", \");\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: fieldsList\n    }, /*#__PURE__*/React.createElement(ListItemText, null, /*#__PURE__*/React.createElement(ListItemTextPrimary, null, fieldsList), /*#__PURE__*/React.createElement(ListItemTextSecondary, null, item.createdOn ? t(_templateObject2())({\n      time: /*#__PURE__*/React.createElement(TimeAgo, {\n        datetime: item.createdOn\n      })\n    }) : t(_templateObject3()))), /*#__PURE__*/React.createElement(ListItemMeta, null, /*#__PURE__*/React.createElement(ListActions, null, isDefaultIdIndex(item) ? /*#__PURE__*/React.createElement(Tooltip, {\n      placement: \"bottom\",\n      content: /*#__PURE__*/React.createElement(\"span\", null, t(_templateObject4()))\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      disabled: true\n    })) : /*#__PURE__*/React.createElement(ConfirmationDialog, {\n      title: t(_templateObject5()),\n      message: t(_templateObject6())({\n        index: /*#__PURE__*/React.createElement(\"strong\", null, item.fields.join(\", \"))\n      })\n    }, function (_ref) {\n      var showConfirmation = _ref.showConfirmation;\n      return /*#__PURE__*/React.createElement(DeleteIcon, {\n        onClick: function onClick() {\n          showConfirmation(function () {\n            setData(function (data) {\n              var itemHash = item.fields.sort().join();\n              var index = data.indexes.findIndex(function (current) {\n                var currentHash = current.fields.sort().join();\n                return itemHash === currentHash;\n              });\n              data.indexes.splice(index, 1);\n              return data;\n            });\n            showSnackbar(t(_templateObject7()));\n          });\n        }\n      });\n    }))));\n  })))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: style.noFieldsMessage\n  }, t(_templateObject8())));\n};","map":null,"metadata":{},"sourceType":"module"}