{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"emotion\";\nimport { CircularProgress } from \"@webiny/ui/Progress\";\nimport { ButtonPrimary } from \"@webiny/ui/Button\";\nimport { SplitView, LeftPanel, RightPanel } from \"@webiny/app-admin/components/SplitView\";\nimport { useInstaller } from \"./useInstaller\";\nimport Sidebar from \"./Sidebar\";\nimport { Elevation } from \"@webiny/ui/Elevation\";\nexport var Wrapper = /*#__PURE__*/styled(\"section\", {\n  target: \"e280ipe0\",\n  label: \"Wrapper\"\n})({\n  display: \"flex\",\n  flexDirection: \"column\",\n  justifyContent: \"center\",\n  minHeight: \"100vh\",\n  color: \"var(--mdc-theme-on-surface)\"\n});\nexport var InstallContent = /*#__PURE__*/styled(\"div\", {\n  target: \"e280ipe1\",\n  label: \"InstallContent\"\n})({\n  maxWidth: 800,\n  margin: \"0 auto 25px auto\",\n  \".mdc-elevation--z2\": {\n    borderRadius: 4,\n    boxShadow: \"0 1px 3px 0 rgba(0,0,0,0.15)\"\n  }\n});\nvar installerSplitView = /*#__PURE__*/css({\n  \".webiny-split-view__inner\": {\n    height: \"100vh\",\n    \".webiny-split-view__right-panel-wrapper\": {\n      height: \"100vh\"\n    }\n  }\n}, \"label:installerSplitView;\");\nvar SuccessDialog = /*#__PURE__*/styled(\"div\", {\n  target: \"e280ipe2\",\n  label: \"SuccessDialog\"\n})({\n  padding: 40,\n  textAlign: \"center\",\n  p: {\n    paddingBottom: 40\n  }\n});\nexport var InnerContent = /*#__PURE__*/styled(\"div\", {\n  target: \"e280ipe3\",\n  label: \"InnerContent\"\n})({\n  padding: 25,\n  position: \"relative\"\n});\nexport var AppInstaller = function AppInstaller(_ref) {\n  var children = _ref.children,\n      security = _ref.security;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      finished = _useState2[0],\n      setFinished = _useState2[1];\n\n  var _useInstaller = useInstaller(),\n      loading = _useInstaller.loading,\n      installers = _useInstaller.installers,\n      installer = _useInstaller.installer,\n      showNextInstaller = _useInstaller.showNextInstaller,\n      showLogin = _useInstaller.showLogin,\n      onUser = _useInstaller.onUser;\n\n  var renderLayout = function renderLayout(content) {\n    var secure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return /*#__PURE__*/React.createElement(SplitView, {\n      className: installerSplitView\n    }, /*#__PURE__*/React.createElement(LeftPanel, {\n      span: 2\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      allInstallers: installers,\n      installer: installer,\n      showLogin: showLogin\n    })), /*#__PURE__*/React.createElement(RightPanel, {\n      span: 10\n    }, !showLogin && !secure && content, (showLogin || secure) && /*#__PURE__*/React.cloneElement(security, {\n      onUser: onUser\n    }, content)));\n  };\n\n  var renderBody = function renderBody(content) {\n    return /*#__PURE__*/React.createElement(Wrapper, null, /*#__PURE__*/React.createElement(InstallContent, null, /*#__PURE__*/React.createElement(InnerContent, null, content)));\n  }; // Loading installers data\n\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CircularProgress, {\n      label: \"Checking apps...\"\n    });\n  } // This means there are no installers to run or installation was finished\n\n\n  if (!loading && (installers.length === 0 || finished)) {\n    return /*#__PURE__*/React.cloneElement(security, null, children);\n  }\n\n  if (installer) {\n    return renderLayout(renderBody(installer.plugin.render({\n      onInstalled: showNextInstaller\n    })), installer.plugin.secure);\n  }\n\n  return renderLayout(renderBody( /*#__PURE__*/React.createElement(Elevation, {\n    z: 1\n  }, /*#__PURE__*/React.createElement(SuccessDialog, null, /*#__PURE__*/React.createElement(\"p\", null, \"You have successfully installed all new applications!\"), /*#__PURE__*/React.createElement(ButtonPrimary, {\n    \"data-testid\": \"open-webiny-cms-admin-button\",\n    onClick: function onClick() {\n      return setFinished(true);\n    }\n  }, \"Open Webiny CMS Administration\")))), true);\n};","map":null,"metadata":{},"sourceType":"module"}