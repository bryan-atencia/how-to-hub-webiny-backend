{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _get from \"lodash/get\";\nimport { useUi } from \"@webiny/app/hooks/useUi\";\nimport { default as localStorage } from \"store\";\nimport { set } from \"dot-prop-immutable\";\nvar LOCAL_STORAGE_KEY = \"webiny_apps_menu_sections\";\n\nvar modifyExpandedSections = function modifyExpandedSections(expandedSections, names, action) {\n  var returnNames = _toConsumableArray(expandedSections);\n\n  names.forEach(function (id) {\n    if (action === \"expand\") {\n      !returnNames.includes(id) && returnNames.push(id);\n    } else {\n      returnNames.includes(id) && returnNames.splice(returnNames.indexOf(id), 1);\n    }\n  });\n  return returnNames;\n};\n\nvar expandAppsMenuSection = function expandAppsMenuSection(names, expandedSections) {\n  if (!Array.isArray(names)) {\n    names = [names];\n  }\n\n  return modifyExpandedSections(expandedSections, names, \"expand\");\n};\n\nexport default (function () {\n  var ui = useUi();\n  var hook = {\n    showMenu: function showMenu() {\n      ui.setState(function (ui) {\n        return set(ui, \"appsMenu.show\", true);\n      });\n    },\n    hideMenu: function hideMenu() {\n      ui.setState(function (ui) {\n        return set(ui, \"appsMenu.show\", false);\n      });\n    },\n    menuIsShown: function menuIsShown() {\n      return _get(ui, \"appsMenu.show\", false);\n    },\n    expandSection: function expandSection(name) {\n      var sections = _get(ui, \"appsMenu.expandedSections\", []);\n\n      sections = modifyExpandedSections(sections, [name], \"expand\");\n      localStorage.set(LOCAL_STORAGE_KEY, sections.join(\",\"));\n      ui.setState(function (ui) {\n        return set(ui, \"appsMenu.expandedSections\", sections);\n      });\n    },\n    collapseSection: function collapseSection(name) {\n      var sections = _get(ui, \"appsMenu.expandedSections\", []);\n\n      sections = modifyExpandedSections(sections, [name], \"collapse\");\n      localStorage.set(LOCAL_STORAGE_KEY, sections.join(\",\"));\n      ui.setState(function (ui) {\n        return set(ui, \"appsMenu.expandedSections\", sections);\n      });\n    },\n    toggleSection: function toggleSection(name) {\n      if (hook.sectionIsExpanded(name)) {\n        return hook.collapseSection(name);\n      }\n\n      return hook.expandSection(name);\n    },\n    sectionIsExpanded: function sectionIsExpanded(name) {\n      return _get(ui, \"appsMenu.expandedSections\", []).includes(name);\n    },\n    initSections: function initSections() {\n      if (!localStorage.get(LOCAL_STORAGE_KEY)) {\n        return;\n      }\n\n      var sections = expandAppsMenuSection(localStorage.get(LOCAL_STORAGE_KEY).split(\",\"), _get(ui, \"appsMenu.expandedSections\", []));\n      localStorage.set(LOCAL_STORAGE_KEY, sections.join(\",\"));\n      ui.setState(function (ui) {\n        return set(ui, \"appsMenu.expandedSections\", sections);\n      });\n    }\n  };\n  return hook;\n});","map":null,"metadata":{},"sourceType":"module"}