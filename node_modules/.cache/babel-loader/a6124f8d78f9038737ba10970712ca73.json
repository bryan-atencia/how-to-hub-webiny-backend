{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"Select a file\\\"\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { createRenderImagePreview, imageExtensions } from \"./utils\";\nimport FileUpload from \"./FileUpload\";\nimport fileIcon from \"../../fields/icons/round_insert_drive_file-24px.svg\";\nimport { i18n } from \"@webiny/app/i18n\";\nvar t = i18n.ns(\"app-headless-cms/admin/fields/file\");\nvar imagePreviewProps = {\n  transform: {\n    width: 300\n  },\n  style: {\n    width: \"100%\",\n    height: 300,\n    objectFit: \"contain\"\n  }\n};\n\nvar SingleFile = function SingleFile(props) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      previewURL = _useState2[0],\n      setPreviewURL = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isImage = _useState4[0],\n      setIsImage = _useState4[1]; // Update `previewURL`\n\n\n  useEffect(function () {\n    if (props.bind.value && props.bind.value.includes(\"http\")) {\n      setPreviewURL(null);\n    }\n  }, [props.bind.value]); // Update `isImage`\n\n  useEffect(function () {\n    if (props.bind.value) {\n      setIsImage(imageExtensions.some(function (extension) {\n        return props.bind.value.includes(extension);\n      }));\n    }\n  }, [props.bind.value]);\n  var getImageSrc = useCallback(function () {\n    if (imageExtensions.some(function (extension) {\n      return props.bind.value.includes(extension);\n    })) {\n      return props.bind.value;\n    }\n\n    return fileIcon;\n  }, [props.bind.value]);\n  var getValue = useCallback(function () {\n    if (!props.bind.value) {\n      return props.bind.value;\n    }\n\n    return {\n      src: previewURL || getImageSrc()\n    };\n  }, [previewURL, props.bind.value]);\n  return /*#__PURE__*/React.createElement(FileUpload, Object.assign({}, props.bind, {\n    onChange: function onChange(value) {\n      if (value !== null) {\n        props.bind.onChange(value.key);\n        setPreviewURL(value.src);\n      } else {\n        props.bind.onChange(value);\n        setPreviewURL(value);\n      }\n    },\n    value: getValue(),\n    imagePreviewProps: imagePreviewProps,\n    placeholder: t(_templateObject()),\n    renderImagePreview: !isImage && createRenderImagePreview({\n      value: props.bind.value,\n      imagePreviewProps: imagePreviewProps\n    })\n  }));\n};\n\nexport default SingleFile;","map":null,"metadata":{},"sourceType":"module"}