{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\" Delete\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"Publish\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\" Edit\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"New from current\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"Last modified: {time} (#{version})\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"N/A\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"You are about to delete revision {revision}. Are you sure you want to continue?\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"Confirmation required!\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport { css } from \"emotion\";\nimport TimeAgo from \"timeago-react\";\nimport { ListItem, ListItemText, ListItemTextPrimary, ListItemTextSecondary, ListItemGraphic, ListItemMeta } from \"@webiny/ui/List\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport { Icon } from \"@webiny/ui/Icon\";\nimport { MenuItem, Menu, MenuDivider } from \"@webiny/ui/Menu\";\nimport { ConfirmationDialog } from \"@webiny/ui/ConfirmationDialog\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { ReactComponent as MoreVerticalIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/more_vert.svg\";\nimport { ReactComponent as LockIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/lock.svg\";\nimport { ReactComponent as BeenHereIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/beenhere.svg\";\nimport { ReactComponent as GestureIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/gesture.svg\";\nimport { ReactComponent as AddIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/add.svg\";\nimport { ReactComponent as EditIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/edit.svg\";\nimport { ReactComponent as PublishIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/publish.svg\";\nimport { ReactComponent as DeleteIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/delete.svg\";\nimport { useRouter } from \"@webiny/react-router\";\nimport { I18NValue } from \"@webiny/app-i18n/components\";\nimport { i18n } from \"@webiny/app/i18n\";\nvar t = i18n.ns(\"app-headless-cms/admin/plugins/content-details/content-revisions\");\nvar primaryColor = /*#__PURE__*/css({\n  color: \"var(--mdc-theme-primary)\"\n}, \"label:primaryColor;\");\nvar revisionsMenu = /*#__PURE__*/css({\n  width: 250,\n  right: -105,\n  left: \"auto !important\"\n}, \"label:revisionsMenu;\");\n\nvar getIcon = function getIcon(rev) {\n  switch (true) {\n    case rev.meta.locked && !rev.meta.published:\n      return {\n        icon: /*#__PURE__*/React.createElement(Icon, {\n          icon: /*#__PURE__*/React.createElement(LockIcon, null)\n        }),\n        text: \"This revision is locked (it has already been published)\"\n      };\n\n    case rev.meta.published:\n      return {\n        icon: /*#__PURE__*/React.createElement(Icon, {\n          icon: /*#__PURE__*/React.createElement(BeenHereIcon, null),\n          className: primaryColor\n        }),\n        text: \"This revision is currently published!\"\n      };\n\n    default:\n      return {\n        icon: /*#__PURE__*/React.createElement(Icon, {\n          icon: /*#__PURE__*/React.createElement(GestureIcon, null)\n        }),\n        text: \"This is a draft\"\n      };\n  }\n};\n\nvar Revision = function Revision(props) {\n  var revision = props.revision,\n      createContentFrom = props.createContentFrom,\n      deleteContent = props.deleteContent,\n      publishContent = props.publishContent,\n      switchTab = props.switchTab;\n\n  var _getIcon = getIcon(revision),\n      icon = _getIcon.icon,\n      tooltipText = _getIcon.text;\n\n  var _useRouter = useRouter(),\n      history = _useRouter.history;\n\n  return /*#__PURE__*/React.createElement(ConfirmationDialog, {\n    title: t(_templateObject()),\n    message: /*#__PURE__*/React.createElement(\"span\", null, t(_templateObject2())({\n      revision: /*#__PURE__*/React.createElement(\"strong\", null, \"#\", revision.meta.version)\n    }))\n  }, function (_ref) {\n    var showConfirmation = _ref.showConfirmation;\n    return /*#__PURE__*/React.createElement(ListItem, null, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Tooltip, {\n      content: tooltipText,\n      placement: \"bottom\"\n    }, icon)), /*#__PURE__*/React.createElement(ListItemText, null, /*#__PURE__*/React.createElement(ListItemTextPrimary, null, /*#__PURE__*/React.createElement(I18NValue, {\n      value: revision.meta.title,\n      default: t(_templateObject3())\n    })), /*#__PURE__*/React.createElement(ListItemTextSecondary, null, t(_templateObject4())({\n      time: /*#__PURE__*/React.createElement(TimeAgo, {\n        datetime: revision.savedOn\n      }),\n      version: revision.meta.version\n    }))), /*#__PURE__*/React.createElement(ListItemMeta, null, /*#__PURE__*/React.createElement(Menu, {\n      handle: /*#__PURE__*/React.createElement(IconButton, {\n        icon: /*#__PURE__*/React.createElement(MoreVerticalIcon, null)\n      }),\n      className: revisionsMenu\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: function onClick() {\n        return createContentFrom(revision);\n      }\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(AddIcon, null)\n    })), t(_templateObject5())), !revision.meta.locked && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: function onClick() {\n        var id = revision.id;\n        var query = new URLSearchParams(location.search);\n        query.set(\"id\", id);\n        history.push({\n          search: query.toString()\n        });\n        switchTab(0);\n      }\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(EditIcon, null)\n    })), t(_templateObject6())), !revision.meta.published && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: function onClick() {\n        return publishContent(revision);\n      }\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(PublishIcon, null)\n    })), t(_templateObject7())), !revision.meta.locked && revision.id !== revision.meta.parent && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MenuDivider, null), /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: function onClick() {\n        return showConfirmation(function () {\n          return deleteContent(revision);\n        });\n      }\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n    })), t(_templateObject8()))))));\n  });\n};\n\nexport default Revision;","map":null,"metadata":{},"sourceType":"module"}