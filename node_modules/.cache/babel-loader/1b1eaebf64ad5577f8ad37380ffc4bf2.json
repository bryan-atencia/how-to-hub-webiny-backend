{"ast":null,"code":"import ApolloClient from \"apollo-client\";\nimport { ApolloLink } from \"apollo-link\";\nimport { BatchHttpLink } from \"apollo-link-batch-http\";\nimport { ErrorLink } from \"apollo-link-error\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { createAuthLink } from \"@webiny/app-security/components\";\nimport { createOmitTypenameLink } from \"@webiny/app/graphql\";\nimport { GET_ERROR } from \"./NetworkError\";\nexport default (function (opts) {\n  return new ApolloClient({\n    link: ApolloLink.from([new ErrorLink(function (_ref) {\n      var networkError = _ref.networkError,\n          operation = _ref.operation;\n\n      if (networkError) {\n        var _operation$getContext = operation.getContext(),\n            cache = _operation$getContext.cache;\n\n        cache.writeQuery({\n          query: GET_ERROR,\n          data: {\n            networkError: \"UNAVAILABLE\"\n          }\n        });\n      }\n    }), createOmitTypenameLink(), createAuthLink(), new BatchHttpLink({\n      uri: opts.uri\n    })]),\n    cache: new InMemoryCache({\n      addTypename: true,\n      dataIdFromObject: function dataIdFromObject(obj) {\n        return obj.id || null;\n      }\n    })\n  });\n});","map":null,"metadata":{},"sourceType":"module"}