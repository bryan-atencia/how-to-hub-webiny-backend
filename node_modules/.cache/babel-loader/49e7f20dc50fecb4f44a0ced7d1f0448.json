{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport React from \"react\";\nimport Auth from \"@aws-amplify/auth\";\nimport Authentication from \"./Authentication\";\n\nvar factory = function factory(config) {\n  // Configure Amplify Auth\n  Auth.configure(config);\n  return {\n    name: \"security-authentication-provider-cognito\",\n    type: \"security-authentication-provider\",\n    securityProviderHook: function securityProviderHook(_ref) {\n      var onIdToken = _ref.onIdToken;\n\n      var renderAuthentication = function renderAuthentication() {\n        var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            _ref2$viewProps = _ref2.viewProps,\n            viewProps = _ref2$viewProps === void 0 ? {} : _ref2$viewProps;\n\n        return /*#__PURE__*/React.createElement(Authentication, Object.assign({\n          onIdToken: onIdToken\n        }, viewProps));\n      };\n\n      var logout = /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return Auth.signOut();\n\n                case 2:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function logout() {\n          return _ref3.apply(this, arguments);\n        };\n      }();\n\n      var getIdToken = /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n          var cognitoUser, idToken;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return Auth.currentSession();\n\n                case 2:\n                  cognitoUser = _context2.sent;\n                  idToken = cognitoUser.getIdToken();\n                  return _context2.abrupt(\"return\", cognitoUser ? idToken.getJwtToken() : null);\n\n                case 5:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function getIdToken() {\n          return _ref4.apply(this, arguments);\n        };\n      }();\n\n      return {\n        getIdToken: getIdToken,\n        renderAuthentication: renderAuthentication,\n        logout: logout\n      };\n    }\n  };\n};\n\nexport default factory;","map":null,"metadata":{},"sourceType":"module"}