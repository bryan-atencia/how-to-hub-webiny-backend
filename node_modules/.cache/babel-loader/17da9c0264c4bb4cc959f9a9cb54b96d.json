{"ast":null,"code":"import React from \"react\";\nimport { css } from \"emotion\";\nimport TimeAgo from \"timeago-react\";\nimport { ListItem, ListItemText, ListItemTextPrimary, ListItemTextSecondary, ListItemGraphic, ListItemMeta } from \"@webiny/ui/List\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport { Icon } from \"@webiny/ui/Icon\";\nimport { MenuItem, Menu, MenuDivider } from \"@webiny/ui/Menu\";\nimport { ConfirmationDialog } from \"@webiny/ui/ConfirmationDialog\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { ReactComponent as AddIcon } from \"@svgr/webpack!@webiny/app-form-builder/admin/icons/add.svg\";\nimport { ReactComponent as BeenHereIcon } from \"@svgr/webpack!@webiny/app-form-builder/admin/icons/beenhere.svg\";\nimport { ReactComponent as DeleteIcon } from \"@svgr/webpack!@webiny/app-form-builder/admin/icons/delete.svg\";\nimport { ReactComponent as EditIcon } from \"@svgr/webpack!@webiny/app-form-builder/admin/icons/edit.svg\";\nimport { ReactComponent as GestureIcon } from \"@svgr/webpack!@webiny/app-form-builder/admin/icons/gesture.svg\";\nimport { ReactComponent as LockIcon } from \"@svgr/webpack!@webiny/app-form-builder/admin/icons/lock.svg\";\nimport { ReactComponent as MoreVerticalIcon } from \"@svgr/webpack!@webiny/app-form-builder/admin/icons/more_vert.svg\";\nimport { ReactComponent as PublishIcon } from \"@svgr/webpack!@webiny/app-form-builder/admin/icons/publish.svg\";\nimport { ReactComponent as UnpublishIcon } from \"@svgr/webpack!@webiny/app-form-builder/admin/icons/unpublish.svg\";\nimport { useRevision } from \"./useRevision\";\nvar primaryColor = /*#__PURE__*/css({\n  color: \"var(--mdc-theme-primary)\"\n}, \"label:primaryColor;\");\nvar revisionsMenu = /*#__PURE__*/css({\n  width: 250,\n  right: -105,\n  left: \"auto !important\"\n}, \"label:revisionsMenu;\");\n\nvar getIcon = function getIcon(rev) {\n  switch (rev.status) {\n    case \"locked\":\n      return {\n        icon: /*#__PURE__*/React.createElement(Icon, {\n          icon: /*#__PURE__*/React.createElement(LockIcon, null)\n        }),\n        text: \"This revision is locked (it has already been published)\"\n      };\n\n    case \"published\":\n      return {\n        icon: /*#__PURE__*/React.createElement(Icon, {\n          icon: /*#__PURE__*/React.createElement(BeenHereIcon, null),\n          className: primaryColor\n        }),\n        text: \"This revision is currently published!\"\n      };\n\n    default:\n      return {\n        icon: /*#__PURE__*/React.createElement(Icon, {\n          icon: /*#__PURE__*/React.createElement(GestureIcon, null)\n        }),\n        text: \"This is a draft\"\n      };\n  }\n};\n\nvar Revision = function Revision(props) {\n  var rev = props.revision,\n      form = props.form;\n\n  var _getIcon = getIcon(rev),\n      icon = _getIcon.icon,\n      tooltipText = _getIcon.text;\n\n  var _useRevision = useRevision({\n    revision: rev,\n    form: form\n  }),\n      publishRevision = _useRevision.publishRevision,\n      createRevision = _useRevision.createRevision,\n      deleteRevision = _useRevision.deleteRevision,\n      editRevision = _useRevision.editRevision,\n      unpublishRevision = _useRevision.unpublishRevision;\n\n  return /*#__PURE__*/React.createElement(ListItem, null, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Tooltip, {\n    content: tooltipText,\n    placement: \"bottom\"\n  }, icon)), /*#__PURE__*/React.createElement(ListItemText, null, /*#__PURE__*/React.createElement(ListItemTextPrimary, null, rev.name), /*#__PURE__*/React.createElement(ListItemTextSecondary, null, \"Last modified \", /*#__PURE__*/React.createElement(TimeAgo, {\n    datetime: rev.savedOn\n  }), \" (#\", rev.version, \")\")), /*#__PURE__*/React.createElement(ListItemMeta, null, /*#__PURE__*/React.createElement(Menu, {\n    handle: /*#__PURE__*/React.createElement(IconButton, {\n      icon: /*#__PURE__*/React.createElement(MoreVerticalIcon, null)\n    }),\n    className: revisionsMenu\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: createRevision\n  }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n    icon: /*#__PURE__*/React.createElement(AddIcon, null)\n  })), \"New from current\"), rev.status === \"draft\" && /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: editRevision\n  }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n    icon: /*#__PURE__*/React.createElement(EditIcon, null)\n  })), \"Edit\"), rev.status !== \"published\" && /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: function onClick() {\n      return publishRevision(rev);\n    }\n  }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n    icon: /*#__PURE__*/React.createElement(PublishIcon, null)\n  })), \"Publish\"), rev.status === \"published\" && /*#__PURE__*/React.createElement(ConfirmationDialog, {\n    title: \"Confirmation required!\",\n    message: /*#__PURE__*/React.createElement(\"span\", null, \"Are you sure you want to unpublish this revision?\")\n  }, function (_ref) {\n    var showConfirmation = _ref.showConfirmation;\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: function onClick() {\n        return showConfirmation(function () {\n          return unpublishRevision(rev);\n        });\n      }\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(UnpublishIcon, null)\n    })), \"Unpublish\");\n  }), /*#__PURE__*/React.createElement(MenuDivider, null), /*#__PURE__*/React.createElement(ConfirmationDialog, {\n    title: \"Confirmation required!\",\n    message: /*#__PURE__*/React.createElement(\"span\", null, \"Are you sure you want to delete this revision?\")\n  }, function (_ref2) {\n    var showConfirmation = _ref2.showConfirmation;\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: function onClick() {\n        return showConfirmation(deleteRevision);\n      }\n    }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n      icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n    })), \"Delete\");\n  }))));\n};\n\nexport default Revision;","map":null,"metadata":{},"sourceType":"module"}