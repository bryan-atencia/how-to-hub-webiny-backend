{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _isEqual from \"lodash/isEqual\";\nimport React, { useState, useCallback } from \"react\";\nimport classnames from \"classnames\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"emotion\";\nimport { ChromePicker } from \"react-color\";\nimport { Menu } from \"@webiny/ui/Menu\";\nimport { usePageBuilder } from \"@webiny/app-page-builder/hooks/usePageBuilder\";\nimport { ReactComponent as IconPalette } from \"@svgr/webpack!@webiny/app-page-builder/editor/assets/icons/round-color_lens-24px.svg\";\nvar ColorPickerStyle = /*#__PURE__*/styled(\"div\", {\n  target: \"e1aiz49u0\",\n  label: \"ColorPickerStyle\"\n})({\n  display: \"flex\",\n  flexWrap: \"wrap\",\n  justifyContent: \"space-between\"\n});\nvar CompactColorPicker = /*#__PURE__*/styled(\"div\", {\n  target: \"e1aiz49u1\",\n  label: \"CompactColorPicker\"\n})({\n  \".mdc-menu-surface\": {\n    overflow: \"visible\"\n  }\n});\nvar ColorList = /*#__PURE__*/styled(\"div\", {\n  target: \"e1aiz49u2\",\n  label: \"ColorList\"\n})({\n  display: \"flex\"\n});\nvar ColorBox = /*#__PURE__*/styled(\"div\", {\n  target: \"e1aiz49u3\",\n  label: \"ColorBox\"\n})({\n  cursor: \"pointer\",\n  width: 50,\n  height: 40,\n  margin: 10,\n  padding: 5,\n  borderRadius: 2,\n  boxSizing: \"border-box\",\n  transition: \"transform 0.2s\",\n  color: \"var(--mdc-theme-text-secondary-on-background)\"\n});\nvar Color = /*#__PURE__*/styled(\"div\", {\n  target: \"e1aiz49u4\",\n  label: \"Color\"\n})({\n  cursor: \"pointer\",\n  width: 40,\n  height: 30,\n  border: \"1px solid var(--mdc-theme-on-background)\",\n  transition: \"transform 0.2s, scale 0.2s\",\n  display: \"flex\",\n  alignItems: \"center\",\n  \"&::after\": {\n    boxShadow: \"0 0.25rem 0.125rem 0 rgba(0,0,0,0.05)\",\n    transition: \"opacity 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)\",\n    content: '\"\"',\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: -1,\n    opacity: 0\n  },\n  \"&:hover\": {\n    transform: \"scale(1.25)\",\n    \"&::after\": {\n      opacity: 1\n    }\n  }\n});\nvar transparent = /*#__PURE__*/css({\n  backgroundSize: \"10px 10px\",\n  backgroundImage: \"linear-gradient( 45deg, #555 25%, transparent 25%, transparent),\" + \"linear-gradient(-45deg, #555 25%, transparent 25%, transparent),\" + \"linear-gradient( 45deg, transparent 75%, #555 75%),\" + \"linear-gradient(-45deg, transparent 75%, #555 75%)\"\n}, \"label:transparent;\");\nvar chromePickerStyles = /*#__PURE__*/css({\n  width: \"100%\",\n  \".chrome-picker\": {\n    boxShadow: \"none !important\",\n    width: \"100% !important\"\n  }\n}, \"label:chromePickerStyles;\");\nvar iconPaletteStyle = /*#__PURE__*/css({\n  height: 20,\n  width: \"100%\",\n  marginTop: 1,\n  color: \"var(--mdc-theme-secondary)\"\n}, \"label:iconPaletteStyle;\");\nvar styles = {\n  selectedColor: /*#__PURE__*/css({\n    boxShadow: \"0px 0px 0px 2px var(--mdc-theme-secondary)\"\n  }, \"label:selectedColor;\"),\n  swatch: /*#__PURE__*/css({\n    padding: \"5px\",\n    background: \"#fff\",\n    borderRadius: \"1px\",\n    boxShadow: \"0 0 0 1px rgba(0,0,0,.1)\",\n    display: \"inline-block\",\n    cursor: \"pointer\",\n    height: 30,\n    boxSizing: \"border-box\"\n  }, \"label:swatch;\"),\n  color: /*#__PURE__*/css({\n    width: \"40px\",\n    height: \"100%\",\n    borderRadius: \"2px\"\n  }, \"label:color;\")\n};\n\nvar ColorPicker = function ColorPicker(_ref) {\n  var value = _ref.value,\n      onChange = _ref.onChange,\n      onChangeComplete = _ref.onChangeComplete,\n      _ref$compact = _ref.compact,\n      compact = _ref$compact === void 0 ? false : _ref$compact;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showPicker = _useState2[0],\n      setShowPicker = _useState2[1];\n\n  var getColorValue = useCallback(function (rgb) {\n    return \"rgba(\".concat(rgb.r, \", \").concat(rgb.g, \", \").concat(rgb.b, \", \").concat(rgb.a, \")\");\n  }, []);\n  var onColorChange = useCallback(function (color) {\n    onChange(getColorValue(color.rgb));\n  }, [onChange]);\n  var onColorChangeComplete = useCallback(function (_ref2) {\n    var rgb = _ref2.rgb;\n    onChangeComplete(getColorValue(rgb));\n  }, [onChangeComplete]);\n  var hidePicker = useCallback(function () {\n    setShowPicker(false);\n  }, [setShowPicker]);\n  var togglePicker = useCallback(function (e) {\n    e.stopPropagation();\n    setShowPicker(!showPicker);\n  }, [showPicker, setShowPicker]);\n\n  var _usePageBuilder = usePageBuilder(),\n      theme = _usePageBuilder.theme;\n\n  var themeColor = false;\n  var colorPicker = /*#__PURE__*/React.createElement(ColorPickerStyle, {\n    onClick: hidePicker\n  }, Object.values(theme.colors).map(function (color, index) {\n    if (color === value || value === \"transparent\") {\n      themeColor = true;\n    }\n\n    return /*#__PURE__*/React.createElement(ColorBox, {\n      key: index\n    }, /*#__PURE__*/React.createElement(Color, {\n      className: color === value ? styles.selectedColor : null,\n      style: {\n        backgroundColor: color\n      },\n      onClick: function onClick() {\n        hidePicker();\n        onChangeComplete(color);\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(ColorBox, null, /*#__PURE__*/React.createElement(Color, {\n    className: classnames(transparent, _defineProperty({}, styles.selectedColor, value === \"transparent\")),\n    onClick: function onClick() {\n      hidePicker();\n      onChangeComplete(\"transparent\");\n    }\n  })), /*#__PURE__*/React.createElement(ColorBox, null, /*#__PURE__*/React.createElement(Color, {\n    className: value && !themeColor ? styles.selectedColor : null,\n    style: {\n      backgroundColor: themeColor ? \"#fff\" : value\n    },\n    onClick: togglePicker\n  }, /*#__PURE__*/React.createElement(IconPalette, {\n    className: iconPaletteStyle\n  }))), showPicker && /*#__PURE__*/React.createElement(\"span\", {\n    onClick: function onClick(e) {\n      return e.stopPropagation();\n    },\n    className: chromePickerStyles\n  }, /*#__PURE__*/React.createElement(ChromePicker, {\n    color: value || \"#fff\",\n    onChange: onColorChange,\n    onChangeComplete: onColorChangeComplete\n  })));\n\n  if (compact) {\n    return /*#__PURE__*/React.createElement(CompactColorPicker, null, /*#__PURE__*/React.createElement(Menu, {\n      handle: /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.swatch\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.color,\n        style: {\n          backgroundColor: value\n        }\n      }))\n    }, /*#__PURE__*/React.createElement(ColorList, null, /*#__PURE__*/React.cloneElement(colorPicker, {\n      style: {\n        width: 240\n      }\n    }))));\n  }\n\n  return colorPicker;\n};\n\nexport default /*#__PURE__*/React.memo(ColorPicker, _isEqual);","map":null,"metadata":{},"sourceType":"module"}