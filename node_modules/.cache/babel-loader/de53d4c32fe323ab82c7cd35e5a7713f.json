{"ast":null,"code":"import * as React from \"react\";\nimport { getPlugins } from \"@webiny/plugins\";\nimport { ELEMENT_CREATED, activateElement, togglePlugin } from \"@webiny/app-page-builder/editor/actions\";\nimport { ReactComponent as SettingsIcon } from \"@svgr/webpack!@webiny/app-page-builder/editor/assets/icons/settings.svg\";\nimport AdvancedSettings from \"./AdvancedSettings\";\nimport Action from \"../components/Action\";\nimport AdvancedAction from \"./AdvancedAction\";\nexport default [{\n  name: \"pb-editor-content-element-advanced-settings\",\n  type: \"pb-editor-content\",\n  render: function render() {\n    return /*#__PURE__*/React.createElement(AdvancedSettings, null);\n  }\n}, {\n  type: \"pb-editor-redux-middleware\",\n  name: \"pb-editor-redux-middleware-advanced-settings\",\n  actions: [ELEMENT_CREATED],\n  middleware: function middleware(_ref) {\n    var store = _ref.store,\n        action = _ref.action,\n        next = _ref.next;\n    var _action$payload = action.payload,\n        element = _action$payload.element,\n        source = _action$payload.source;\n    next(action); // Check the source of the element (could be `saved` element which behaves differently from other elements)\n\n    var sourcePlugin = getPlugins(\"pb-editor-page-element\").find(function (pl) {\n      return pl.elementType === source.type;\n    });\n\n    if (!sourcePlugin) {\n      return;\n    }\n\n    var onCreate = sourcePlugin.onCreate;\n\n    if (!onCreate || onCreate !== \"skip\") {\n      // If source element does not define a specific `onCreate` behavior - continue with the actual element plugin\n      var plugin = getPlugins(\"pb-editor-page-element\").find(function (pl) {\n        return pl.elementType === element.type;\n      });\n\n      if (!plugin) {\n        return;\n      }\n\n      var _onCreate = plugin.onCreate;\n\n      if (_onCreate && _onCreate === \"open-settings\") {\n        store.dispatch(activateElement({\n          element: element.id\n        }));\n        store.dispatch(togglePlugin({\n          name: \"pb-editor-page-element-settings-advanced\"\n        }));\n      }\n    }\n  }\n}, {\n  name: \"pb-editor-page-element-settings-advanced\",\n  type: \"pb-editor-page-element-settings\",\n  renderAction: function renderAction() {\n    return /*#__PURE__*/React.createElement(AdvancedAction, null, /*#__PURE__*/React.createElement(Action, {\n      plugin: this.name,\n      icon: /*#__PURE__*/React.createElement(SettingsIcon, null),\n      \"data-testid\": \"pb-editor-advanced-settings-button\",\n      tooltip: \"Advanced settings\"\n    }));\n  }\n}];","map":null,"metadata":{},"sourceType":"module"}