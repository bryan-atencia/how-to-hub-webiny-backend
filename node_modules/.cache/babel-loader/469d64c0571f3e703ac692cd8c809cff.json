{"ast":null,"code":"import getFieldPosition from \"./getFieldPosition\";\n/**\n * Remove all rows that have zero fields in it.\n * @param data\n */\n\nvar cleanupEmptyRows = function cleanupEmptyRows(data) {\n  data.layout = data.layout.filter(function (row) {\n    return row.length > 0;\n  });\n};\n\nvar moveField = function moveField(_ref) {\n  var field = _ref.field,\n      position = _ref.position,\n      data = _ref.data;\n  var row = position.row,\n      index = position.index;\n  var fieldId = typeof field === \"string\" ? field : field._id;\n  var existingPosition = getFieldPosition({\n    field: fieldId,\n    data: data\n  });\n\n  if (existingPosition) {\n    data.layout[existingPosition.row].splice(existingPosition.index, 1);\n  } // Setting a form field into a new non-existing row.\n\n\n  if (!data.layout[row]) {\n    data.layout[row] = [fieldId];\n    return;\n  } // If row exists, we drop the field at the specified index.\n\n\n  if (index === null) {\n    // Create a new row with the new field at the given row index,\n    data.layout.splice(row, 0, [fieldId]);\n    return;\n  }\n\n  data.layout[row].splice(index, 0, fieldId);\n};\n\nexport default (function (params) {\n  moveField(params);\n  cleanupEmptyRows(params.data);\n});","map":null,"metadata":{},"sourceType":"module"}