{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _get from \"lodash/get\";\nimport * as React from \"react\";\nimport { Query } from \"react-apollo\";\nimport { usePageBuilder } from \"@webiny/app-page-builder/hooks/usePageBuilder\";\nimport { loadPages } from \"./graphql\";\nimport { getPlugins } from \"@webiny/plugins\";\n\nvar PagesList = function PagesList(_ref) {\n  var data = _ref.data;\n\n  var component = data.component,\n      vars = _objectWithoutProperties(data, [\"component\"]);\n\n  var components = getPlugins(\"pb-page-element-pages-list-component\");\n  var pageList = components.find(function (cmp) {\n    return cmp.componentName === component;\n  });\n\n  var _usePageBuilder = usePageBuilder(),\n      theme = _usePageBuilder.theme;\n\n  if (!pageList) {\n    return /*#__PURE__*/React.createElement(\"div\", null, \"Selected page list component not found!\");\n  }\n\n  var ListComponent = pageList.component;\n\n  if (!ListComponent) {\n    return /*#__PURE__*/React.createElement(\"div\", null, \"You must select a component to render your list!\");\n  }\n\n  var sort = null;\n\n  if (vars.sortBy) {\n    sort = _defineProperty({}, vars.sortBy, parseInt(vars.sortDirection) || -1);\n  }\n\n  var variables = {\n    category: vars.category,\n    sort: sort,\n    tags: vars.tags,\n    tagsRule: vars.tagsRule,\n    limit: parseInt(vars.resultsPerPage),\n    after: undefined,\n    before: undefined\n  };\n  return /*#__PURE__*/React.createElement(Query, {\n    query: loadPages,\n    variables: variables\n  }, function (_ref2) {\n    var data = _ref2.data,\n        loading = _ref2.loading,\n        refetch = _ref2.refetch;\n\n    if (loading) {\n      return /*#__PURE__*/React.createElement(\"div\", null, \"Loading...\");\n    }\n\n    var pages = _get(data, \"pageBuilder.listPublishedPages\");\n\n    if (!pages || !pages.data.length) {\n      return /*#__PURE__*/React.createElement(\"div\", null, \"No pages match the criteria.\");\n    }\n\n    var prevPage = null;\n\n    if (pages.meta.hasPreviousPage) {\n      prevPage = function prevPage() {\n        return refetch(_objectSpread(_objectSpread({}, variables), {}, {\n          before: pages.meta.cursors.before\n        }));\n      };\n    }\n\n    var nextPage = null;\n\n    if (pages.meta.hasNextPage) {\n      nextPage = function nextPage() {\n        return refetch(_objectSpread(_objectSpread({}, variables), {}, {\n          after: pages.meta.cursors.after\n        }));\n      };\n    }\n\n    return /*#__PURE__*/React.createElement(ListComponent, Object.assign({}, pages, {\n      nextPage: nextPage,\n      prevPage: prevPage,\n      theme: theme\n    }));\n  });\n};\n\nexport default /*#__PURE__*/React.memo(PagesList);","map":null,"metadata":{},"sourceType":"module"}