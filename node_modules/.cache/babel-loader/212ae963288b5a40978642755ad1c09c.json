{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"Delete\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"Cannot delete\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"Use as title\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"Title field set successfully.\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"entry title\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"multiple values\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { ReactComponent as EditIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/edit.svg\";\nimport { ReactComponent as DeleteIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/delete.svg\";\nimport { ReactComponent as TitleIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/title-24px.svg\";\nimport { useI18N } from \"@webiny/app-i18n/hooks/useI18N\";\nimport { useContentModelEditor } from \"@webiny/app-headless-cms/admin/components/ContentModelEditor/Context\";\nimport { ReactComponent as MoreVerticalIcon } from \"@svgr/webpack!@webiny/app-headless-cms/admin/icons/more_vert.svg\";\nimport { Menu, MenuItem } from \"@webiny/ui/Menu\";\nimport { getPlugins } from \"@webiny/plugins\";\nimport { css } from \"emotion\";\nimport { ListItemGraphic } from \"@webiny/ui/List\";\nimport { Icon } from \"@webiny/ui/Icon\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nvar t = i18n.ns(\"app-headless-cms/admin/components/editor/field\");\nvar FieldContainer = /*#__PURE__*/styled(\"div\", {\n  target: \"e4t4mqa0\",\n  label: \"FieldContainer\"\n})({\n  display: \"flex\",\n  flexDirection: \"row\",\n  justifyContent: \"space-between\",\n  alignItems: \"center\"\n});\nvar Info = /*#__PURE__*/styled(\"div\", {\n  target: \"e4t4mqa1\",\n  label: \"Info\"\n})({\n  display: \"flex\",\n  flexDirection: \"column\",\n  \"> *\": {\n    flex: \"1 100%\",\n    lineHeight: \"150%\"\n  }\n});\nvar Actions = /*#__PURE__*/styled(\"div\", {\n  target: \"e4t4mqa2\",\n  label: \"Actions\"\n})({\n  display: \"flex\",\n  flexDirection: \"row\",\n  alignItems: \"right\",\n  \"> *\": {\n    flex: \"1 100%\"\n  }\n});\nvar menuStyles = /*#__PURE__*/css({\n  width: 220,\n  right: -105,\n  left: \"auto !important\",\n  \".disabled\": {\n    opacity: 0.5,\n    pointerEvents: \"none\"\n  }\n}, \"label:menuStyles;\");\n\nvar Field = function Field(props) {\n  var field = props.field,\n      onEdit = props.onEdit,\n      onDelete = props.onDelete;\n\n  var _useI18N = useI18N(),\n      getValue = _useI18N.getValue;\n\n  var _useSnackbar = useSnackbar(),\n      showSnackbar = _useSnackbar.showSnackbar;\n\n  var _useContentModelEdito = useContentModelEditor(),\n      getFieldPlugin = _useContentModelEdito.getFieldPlugin,\n      setData = _useContentModelEdito.setData,\n      data = _useContentModelEdito.data;\n\n  var fieldPlugin = getFieldPlugin({\n    type: field.type\n  });\n  var plugins = getPlugins(\"cms-editor-field-option\");\n  var lockedFields = data.lockedFields || [];\n  return /*#__PURE__*/React.createElement(FieldContainer, null, /*#__PURE__*/React.createElement(Info, null, /*#__PURE__*/React.createElement(Typography, {\n    use: \"subtitle1\"\n  }, getValue(field.label), \" \"), /*#__PURE__*/React.createElement(Typography, {\n    use: \"caption\"\n  }, fieldPlugin && fieldPlugin.field.label, \" \", field.multipleValues && /*#__PURE__*/React.createElement(React.Fragment, null, \"(\", t(_templateObject()), \")\"), field.fieldId === data.titleFieldId && /*#__PURE__*/React.createElement(React.Fragment, null, \"(\", t(_templateObject2()), \")\"))), /*#__PURE__*/React.createElement(Actions, null, /*#__PURE__*/React.createElement(IconButton, {\n    icon: /*#__PURE__*/React.createElement(EditIcon, null),\n    onClick: function onClick() {\n      return onEdit(field);\n    }\n  }), /*#__PURE__*/React.createElement(Menu, {\n    className: menuStyles,\n    handle: /*#__PURE__*/React.createElement(IconButton, {\n      icon: /*#__PURE__*/React.createElement(MoreVerticalIcon, null)\n    })\n  }, plugins.map(function (pl) {\n    return /*#__PURE__*/React.cloneElement(pl.render(), {\n      key: pl.name\n    });\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    disabled: field.multipleValues || field.type !== \"text\",\n    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return setData(function (data) {\n                data.titleFieldId = field.fieldId;\n                return data;\n              });\n\n            case 2:\n              response = _context.sent;\n\n              if (!response.error) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\", showSnackbar(response.error.message));\n\n            case 5:\n              showSnackbar(t(_templateObject3()));\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))\n  }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n    icon: /*#__PURE__*/React.createElement(TitleIcon, null)\n  })), t(_templateObject4())), /*#__PURE__*/React.createElement(MenuItem, {\n    disabled: lockedFields.find(function (lockedField) {\n      return lockedField.fieldId === field.fieldId;\n    }),\n    onClick: function onClick() {\n      return onDelete(field);\n    }\n  }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {\n    icon: /*#__PURE__*/React.createElement(DeleteIcon, null)\n  })), lockedFields.find(function (lockedField) {\n    return lockedField.fieldId === field.fieldId;\n  }) ? t(_templateObject5()) : t(_templateObject6())))));\n};\n\nexport default Field;","map":null,"metadata":{},"sourceType":"module"}