{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"Slug\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"Cannot be changed.\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"Name\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport { Cell } from \"@webiny/ui/Grid\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { validation } from \"@webiny/validation\";\nimport slugify from \"slugify\";\nvar t = i18n.ns(\"app-headless-cms/admin/components/name-slug\");\n\nvar toSlug = function toSlug(text) {\n  return slugify(text, {\n    replacement: \"-\",\n    lower: true,\n    remove: /[*#\\?<>_\\{\\}\\[\\]+~.()'\"!:;@]/g\n  });\n};\n\nvar slugValidator = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value, validateSlugUniqueness, newEntry) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (newEntry) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            validation.validateSync(value, \"required,maxLength:100\");\n            _context.next = 5;\n            return validateSlugUniqueness();\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function slugValidator(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction NameSlug(_ref2) {\n  var newEntry = _ref2.newEntry,\n      Bind = _ref2.Bind,\n      setValue = _ref2.setValue,\n      _ref2$name = _ref2.name,\n      name = _ref2$name === void 0 ? {} : _ref2$name,\n      _ref2$slug = _ref2.slug,\n      slug = _ref2$slug === void 0 ? {} : _ref2$slug,\n      validateSlugUniqueness = _ref2.validateSlugUniqueness;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Cell, {\n    span: 6\n  }, /*#__PURE__*/React.createElement(Bind, Object.assign({}, name, {\n    name: \"name\",\n    validators: validation.create(\"required,maxLength:100\"),\n    afterChange: function afterChange(value) {\n      if (newEntry) {\n        setValue(\"slug\", toSlug(value));\n      }\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: t(_templateObject())\n  }))), /*#__PURE__*/React.createElement(Cell, {\n    span: 6\n  }, /*#__PURE__*/React.createElement(Bind, {\n    name: \"slug\",\n    validators: function validators(value) {\n      return slugValidator(value, validateSlugUniqueness, newEntry);\n    }\n  }, function (bindProps) {\n    return /*#__PURE__*/React.createElement(Input, Object.assign({\n      description: t(_templateObject2())\n    }, bindProps, slug, {\n      disabled: !newEntry,\n      label: t(_templateObject3())\n    }));\n  })));\n}\n\nexport default NameSlug;","map":null,"metadata":{},"sourceType":"module"}