{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport * as React from \"react\";\n\nvar defaultRenderElement = function defaultRenderElement(_ref) {\n  var attributes = _ref.attributes,\n      children = _ref.children;\n  return /*#__PURE__*/React.createElement(\"p\", attributes, children);\n};\n\nvar defaultRenderLeaf = function defaultRenderLeaf(_ref2) {\n  var attributes = _ref2.attributes,\n      children = _ref2.children;\n  return /*#__PURE__*/React.createElement(\"span\", attributes, children);\n};\n\nvar defaultRenderEditor = function defaultRenderEditor(_ref3) {\n  var children = _ref3.children;\n  return children;\n};\n\nexport var pluginsToProps = function pluginsToProps(plugins, args) {\n  var editorPlugins = plugins.map(function (pl) {\n    return pl.editor;\n  }).filter(Boolean);\n  var renderElementFns = [];\n  var renderLeafFns = [];\n  var renderEditorFns = [];\n  var otherProps = {};\n\n  var _loop = function _loop(i) {\n    var _editorPlugins$i = editorPlugins[i],\n        renderEditor = _editorPlugins$i.renderEditor,\n        renderElement = _editorPlugins$i.renderElement,\n        renderLeaf = _editorPlugins$i.renderLeaf,\n        other = _objectWithoutProperties(_editorPlugins$i, [\"renderEditor\", \"renderElement\", \"renderLeaf\"]);\n\n    if (typeof renderEditor === \"function\") {\n      renderEditorFns.push(renderEditor);\n    }\n\n    if (typeof renderElement === \"function\") {\n      renderElementFns.push(renderElement);\n    }\n\n    if (typeof renderLeaf === \"function\") {\n      renderLeafFns.push(renderLeaf);\n    }\n\n    Object.keys(other).forEach(function (key) {\n      if (!otherProps[key]) {\n        otherProps[key] = [];\n      }\n\n      otherProps[key].push(other[key]);\n    });\n  };\n\n  for (var i = 0; i < editorPlugins.length; i++) {\n    _loop(i);\n  }\n\n  renderEditorFns.push(defaultRenderEditor);\n  renderElementFns.push(defaultRenderElement);\n  renderLeafFns.push(defaultRenderLeaf);\n  var renderEditorMw = createMiddleware(renderEditorFns);\n  return _objectSpread({\n    renderEditor: function renderEditor(children) {\n      return renderEditorMw(_objectSpread({\n        children: children\n      }, args));\n    },\n    renderElement: createMiddleware(renderElementFns),\n    renderLeaf: createLeafMiddleware(renderLeafFns)\n  }, Object.keys(otherProps).reduce(function (acc, key) {\n    var mw = createMiddleware(otherProps[key]);\n\n    acc[key] = function (event) {\n      return mw(_objectSpread({\n        event: event\n      }, args));\n    };\n\n    return acc;\n  }, {}));\n};\n\nvar createMiddleware = function createMiddleware(fns) {\n  return function (args) {\n    var i = 0;\n\n    function next() {\n      var fn = fns[i++];\n\n      if (!fn) {\n        return;\n      }\n\n      return fn(args, next);\n    }\n\n    return next();\n  };\n};\n\nvar createLeafMiddleware = function createLeafMiddleware(fns) {\n  return function (args) {\n    var i = 0;\n\n    function next(_ref4) {\n      var children = _ref4.children;\n      var fn = fns[i++];\n\n      if (!fn) {\n        return children;\n      }\n\n      return next({\n        children: fn(_objectSpread(_objectSpread({}, args), {}, {\n          children: children\n        }))\n      });\n    }\n\n    return next(args);\n  };\n};","map":null,"metadata":{},"sourceType":"module"}