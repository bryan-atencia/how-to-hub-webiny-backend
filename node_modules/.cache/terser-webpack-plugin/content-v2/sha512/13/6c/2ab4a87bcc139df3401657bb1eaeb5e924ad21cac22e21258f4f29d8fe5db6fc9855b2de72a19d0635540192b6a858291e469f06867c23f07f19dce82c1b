{"code":"(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[22],{1615:function(n,e,t){\"use strict\";t.r(e);var a=t(1),r=t.n(a),i=t(0),o=t.n(i),c=t(65),s=t(188),l=t(5),u=t.n(l),m=t(12),d=t.n(m),f=t(11),v=t(118),p=t(112),h=t(21),b=t(69),E=t(18),g=t(26),w=t(29),C=t.n(w),k=t(30),y=t.n(k),A=t(13),$=t.n(A),O=t(32),S=t.n(O),N=t(33),x=t.n(N),_=t(7),j=t.n(_),I=t(8),D=t(138),P=t.n(D),q=t(40),F=t(17),B=t(35),M=t(68);function J(){var n=r()([\"Please type {resourceName} to confirm.\"]);return J=function(){return n},n}var L=f.a.ns(\"app-headless-cms/admin/environments/data-list-utils\"),W=Object(I.a)({\"& .mdc-dialog__surface\":{maxWidth:\"540px !important\"},\"& .mdc-dialog__content\":{span:{display:\"inline-block\",marginBottom:16},b:{fontWeight:\"bold\"}},\"& .mdc-dialog__actions\":{alignItems:\"center !important\"},\"& .mdc-dialog__button\":{width:\"100%\",\"&:nth-child(2)\":{marginLeft:\"0px !important\"}}},\"label:messageStyle;\"),R=Object(I.a)({backgroundColor:\"#FED7D7 !important\",color:\"#9B2C2C !important\",\"&:disabled\":{opacity:.4}},\"label:confirmButtonStyles;\"),T=Object(I.a)({margin:\"16px 0px\"},\"label:inputStyles;\"),U=function(n){S()(t,n);var e=x()(t);function t(){var n;C()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=e.call.apply(e,[this].concat(r)),j()($()(n),\"__isMounted\",!1),j()($()(n),\"callbacks\",{onAccept:P.a,onCancel:P.a}),j()($()(n),\"state\",{show:!1,loading:!1,name:\"\",disableConfirm:!0}),j()($()(n),\"showConfirmation\",(function(e,t){n.callbacks={onAccept:e,onCancel:t},n.setState({show:!0})})),j()($()(n),\"hideConfirmation\",(function(){n.setState({show:!1})})),j()($()(n),\"onAccept\",d()(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(\"function\"!==typeof(t=n.callbacks.onAccept)){e.next=6;break}return n.setState({loading:!0}),e.next=5,t();case 5:n.__isMounted&&n.setState({loading:!1,show:!1});case 6:case\"end\":return e.stop()}}),e)})))),j()($()(n),\"onCancel\",d()(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(\"function\"!==typeof(t=n.callbacks.onCancel)){e.next=4;break}return e.next=4,t();case 4:case\"end\":return e.stop()}}),e)})))),j()($()(n),\"handleOnchange\",(function(e){n.setState({name:e})})),n}return y()(t,[{key:\"componentDidMount\",value:function(){this.__isMounted=!0}},{key:\"componentWillUnmount\",value:function(){this.__isMounted=!1}},{key:\"componentDidUpdate\",value:function(n,e){e.name!==this.state.name&&(this.state.disableConfirm&&this.state.name===this.props.resourceName?this.setState({disableConfirm:!1}):this.setState({disableConfirm:!0}))}},{key:\"render\",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{className:W,open:this.state.show,onClose:this.hideConfirmation,\"data-testid\":this.props[\"data-testid\"]},this.state.loading?this.props.loading:null,o.a.createElement(q.g,null,this.props.title),o.a.createElement(q.f,null,o.a.createElement(M.a,{title:\"Wait! Let's review what you're about to do.\",type:\"warning\"}),o.a.createElement(h.a,{use:\"body1\"},this.props.message),\" \",o.a.createElement(\"br\",null),o.a.createElement(h.a,{use:\"body1\"},L(J())({resourceName:o.a.createElement(\"b\",null,this.props.resourceName)})),o.a.createElement(F.a,{className:T,value:this.state.name,onChange:this.handleOnchange})),o.a.createElement(q.c,null,o.a.createElement(q.e,{onClick:this.onCancel},\"Cancel\"),o.a.createElement(q.d,{className:R,\"data-testid\":\"confirmationdialog-confirm-action\",onClick:this.onAccept,disabled:this.state.disableConfirm},\"I understand the consequences, delete this environment\"))),this.props.children({showConfirmation:this.showConfirmation}))}}]),t}(o.a.Component);function Z(){var n=r()([\"This action {verb} be undone. This will permanently delete the {name} environment and all of the created content.\"]);return Z=function(){return n},n}function z(){var n=r()([\"Not linked with an alias.\"]);return z=function(){return n},n}function G(){var n=r()(['This environment is linked with the \"{environmentAlias}\" alias.']);return G=function(){return n},n}function H(){var n=r()([\"Assigned to: {environmentAlias}\"]);return H=function(){return n},n}function K(){var n=r()([\"(default)\"]);return K=function(){return n},n}function Q(){var n=r()([\"Name Z-A\"]);return Q=function(){return n},n}function V(){var n=r()([\"Name A-Z\"]);return V=function(){return n},n}function X(){var n=r()([\"Oldest to newest\"]);return X=function(){return n},n}function Y(){var n=r()([\"Newest to oldest\"]);return Y=function(){return n},n}function nn(){var n=r()([\"Environments\"]);return nn=function(){return n},n}j()(U,\"defaultProps\",{title:\"Confirmation\",message:\"Are you sure you want to continue?\",loading:o.a.createElement(B.a,null),resourceName:null});var en=f.a.ns(\"app-headless-cms/admin/environments/data-list\"),tn=function(){var n=Object(p.a)(),e=n.actions,t=n.list,a=Object(b.b)().environments,r=a.refreshEnvironments,i=a.selectAvailableEnvironment,c=a.isSelectedEnvironment;return o.a.createElement(E.a,Object.assign({},t,{title:en(nn()),sorters:[{label:en(Y()),sorters:{createdOn:-1}},{label:en(X()),sorters:{createdOn:1}},{label:en(V()),sorters:{name:1}},{label:en(Q()),sorters:{name:-1}}]}),(function(n){var t=n.data,a=n.isSelected,s=n.select;return o.a.createElement(E.b,{\"data-testid\":\"default-data-list\"},t.map((function(n){return o.a.createElement(E.d,{key:n.id,selected:a(n)},o.a.createElement(E.g,{onClick:function(){return s(n)}},n.name,\" \",n.default&&o.a.createElement(h.a,{use:\"overline\"},en(K())),o.a.createElement(E.i,null,n.environmentAlias?en(H())({environmentAlias:o.a.createElement(g.b,{onClick:function(n){return n.stopPropagation()},to:\"/settings/cms/environments/aliases?id=\".concat(n.environmentAlias.id),title:en(G())({environmentAlias:n.environmentAlias.name})},n.environmentAlias.name)}):en(z()))),o.a.createElement(E.f,null,o.a.createElement(E.c,null,o.a.createElement(U,{title:\"Remove environment\",message:en(Z())({name:o.a.createElement(\"b\",null,n.name),verb:o.a.createElement(\"b\",null,\"cannot\")}),resourceName:n.name},(function(t){var a=t.showConfirmation;return o.a.createElement(v.a,{onClick:function(){a(d()(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete(n);case 2:c(n)&&i([n]),r();case 4:case\"end\":return t.stop()}}),t)}))))}})})))))})))}))},an=t(39),rn=t(3),on=t(10),cn=t(20),sn=t(31),ln=t(81);function un(){var n=r()([\"Save environment\"]);return un=function(){return n},n}function mn(){var n=r()([\"A base environment from which the new one will be created.\"]);return mn=function(){return n},n}function dn(){var n=r()([\"A base environment from which this one was created.\"]);return dn=function(){return n},n}function fn(){var n=r()([\"Base environment\"]);return fn=function(){return n},n}function vn(){var n=r()([\"Created from\"]);return vn=function(){return n},n}function pn(){var n=r()([\"Description\"]);return pn=function(){return n},n}function hn(){var n=r()([\"Name\"]);return hn=function(){return n},n}function bn(){var n=r()([\"New environment\"]);return bn=function(){return n},n}var En=f.a.ns(\"app-headless-cms/admin/environments/form\");var gn=function(){var n=Object(p.a)().form,e=Object(b.b)().environments.environments;return o.a.createElement(an.a,n,(function(t){var a=t.form,r=t.data,i=t.Bind;return o.a.createElement(sn.a,{\"data-testid\":\"pb-environments-form\"},n.loading&&o.a.createElement(B.a,null),o.a.createElement(sn.d,{title:r.name?r.name:En(bn())}),o.a.createElement(sn.b,null,o.a.createElement(rn.b,null,o.a.createElement(rn.a,{span:12},o.a.createElement(i,{name:\"name\",validators:cn.validation.create(\"required,maxLength:100\")},o.a.createElement(F.a,{label:En(hn())}))),o.a.createElement(rn.a,{span:12},o.a.createElement(i,{name:\"description\"},(function(n){return o.a.createElement(F.a,Object.assign({},n,{rows:4,maxLength:200,characterCount:!0,label:En(pn())}))}))),o.a.createElement(rn.a,{span:12},o.a.createElement(i,{name:\"createdFrom\",validators:!r.id&&cn.validation.create(\"required\")},(function(n){return o.a.createElement(ln.a,Object.assign({},n,{disabled:!!r.id,label:r.id?En(vn()):En(fn()),options:e,description:r.id?En(dn()):En(mn())}))}))))),o.a.createElement(sn.c,null,o.a.createElement(on.d,{onClick:a.submit},En(un()))))}))},wn=t(159),Cn=t(14),kn=t.n(Cn);function yn(){var n=r()([\"\\n    mutation deleteEnvironment($id: ID!) {\\n        cms {\\n            deleteEnvironment(id: $id) {\\n                data\\n                error {\\n                    code\\n                    message\\n                }\\n            }\\n        }\\n    }\\n\"]);return yn=function(){return n},n}function An(){var n=r()([\"\\n    mutation updateEnvironment($id: ID!, $data: CmsEnvironmentInput!){\\n        cms {\\n            environment: updateEnvironment(id: $id, data: $data) {\\n                data {\\n                    \",\"\\n                }\\n                error {\\n                    code\\n                    message\\n                    data\\n                }\\n            }\\n        }\\n    }\\n\"]);return An=function(){return n},n}function $n(){var n=r()([\"\\n    mutation createEnvironment($data: CmsEnvironmentInput!){\\n        cms {\\n            environment: createEnvironment(data: $data) {\\n                data {\\n                    \",\"\\n                }\\n                error {\\n                    code\\n                    message\\n                    data\\n                }\\n            }\\n        }\\n    }\\n\"]);return $n=function(){return n},n}function On(){var n=r()([\"\\n    query getEnvironment($id: ID!) {\\n        cms {\\n            environment: getEnvironment(id: $id){\\n                data {\\n                    \",\"\\n                }\\n                error {\\n                    code\\n                    message\\n                }\\n            }\\n        }\\n    }\\n\"]);return On=function(){return n},n}function Sn(){var n=r()([\"\\n    query listEnvironments(\\n        $where: JSON\\n        $sort: JSON\\n        $search: CmsSearchInput\\n        $limit: Int\\n        $after: String\\n        $before: String\\n    ) {\\n        cms {\\n            environments: listEnvironments(\\n                where: $where\\n                sort: $sort\\n                search: $search\\n                limit: $limit\\n                after: $after\\n                before: $before\\n            ) {\\n                data {\\n                    id\\n                    name\\n                    isProduction\\n                    createdOn\\n                    environmentAlias {\\n                        id\\n                        name\\n                    }\\n                }\\n                meta {\\n                    cursors {\\n                        next\\n                        previous\\n                    }\\n                    hasNextPage\\n                    hasPreviousPage\\n                    totalCount\\n                }\\n            }\\n        }\\n    }\\n\"]);return Sn=function(){return n},n}var Nn=\"\\n    id\\n    name\\n    description\\n    createdFrom {\\n        id\\n        name\\n    }\\n\",xn=kn()(Sn()),_n=kn()(On(),Nn),jn=kn()($n(),Nn),In=kn()(An(),Nn),Dn=kn()(yn());function Pn(){var n=r()([\"Record deleted successfully.\"]);return Pn=function(){return n},n}function qn(){var n=r()([\"Record deleted successfully. Switched to first available environment.\"]);return qn=function(){return n},n}var Fn=f.a.ns(\"app-headless-cms/admin/environments\");e.default=function(){var n=Object(b.b)().environments,e=n.refreshEnvironments,t=n.isSelectedEnvironment;return o.a.createElement(wn.b,{delete:{mutation:Dn,snackbar:function(n){return t(n)?Fn(qn()):Fn(Pn())}},read:_n,create:{mutation:jn,options:{onCompleted:e}},update:{mutation:In},list:{query:xn,variables:{sort:{savedOn:-1}}}},(function(n){var e=n.actions;return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.c,null,o.a.createElement(c.a,{span:4},o.a.createElement(tn,null)),o.a.createElement(c.b,{span:8},o.a.createElement(gn,null))),o.a.createElement(s.a,{\"data-testid\":\"new-record-button\",onClick:e.resetForm}))}))}}}]);","extractedComments":[]}