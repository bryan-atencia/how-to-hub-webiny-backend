{"code":"(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[20],{1619:function(e,t,r){\"use strict\";r.r(t);var a=r(16),n=r.n(a),c=r(0),o=r.n(c),i=r(65),s=r(188),u=r(5),l=r.n(u),m=r(1),f=r.n(m),d=r(12),b=r.n(d),h=r(106),p=r.n(h),v=r(9),E=r.n(v),g=r(163),w=r.n(g),k=r(26),O=r(8),x=r(21),j=r(79),y=r(118),C=r(113),F=r(378),S=r(122),L=r(41),N=r(18),D=r(11);function R(){var e=f()([\"Last modified: {time}.\"]);return R=function(){return e},e}function A(){var e=f()([\"Created by: {user}.\"]);return A=function(){return e},e}function B(){var e=f()([\"Name Z-A\"]);return B=function(){return e},e}function I(){var e=f()([\"Name A-Z\"]);return I=function(){return e},e}function P(){var e=f()([\"Oldest to newest\"]);return P=function(){return e},e}function Q(){var e=f()([\"Newest to oldest\"]);return Q=function(){return e},e}function U(){var e=f()([\"Forms\"]);return U=function(){return e},e}function q(){var e=f()([\"Something unexpected happened.\"]);return q=function(){return e},e}function H(){var e=f()([\"Form {name} deleted.\"]);return H=function(){return e},e}var J=D.a.namespace(\"FormsApp.FormsDataList\"),W=Object(O.a)({alignItems:\"flex-end !important\"},\"label:rightAlign;\"),Z=Object(O.a)({minHeight:\"66px !important\"},\"label:listItemMinHeight;\"),_=function(e){var t=Object(c.useRef)({}),r=e.dataList,a=Object(k.e)(),n=a.location,i=a.history,s=Object(F.a)(),u=Object(L.a)().showSnackbar,m=Object(S.a)(e,(function(e){var t=e.id;return function(){var e=b()(l.a.mark((function e(a){var c,o,m,f,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.mutate({mutation:C.c,variables:{id:a.id}});case 2:c=e.sent,o=E()(c,\"data.forms.deleteForm\"),m=o.data,f=o.error,m?u(J(H())({name:a.name})):u(f.message,{title:J(q())}),a.id===t&&((d=new URLSearchParams(n.search)).delete(\"id\"),i.push({search:d.toString()})),r.refresh();case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),f=Object(c.useCallback)((function(e){return t.current[e.id]||(t.current[e.id]=b()(l.a.mark((function t(){var r,a,n,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.published){t.next=11;break}return t.next=3,s.mutate({mutation:C.b,variables:{revision:e.id},refetchQueries:[\"FormsListForms\"]});case 3:if(r=t.sent,a=r.data,n=a.forms.revision,c=n.data,!(o=n.error)){t.next=8;break}return t.abrupt(\"return\",u(o.message));case 8:i.push(\"/forms/\".concat(c.id)),t.next=12;break;case 11:i.push(\"/forms/\"+e.id);case 12:case\"end\":return t.stop()}}),t)})))),t.current[e.id]}),[]),d=new URLSearchParams(n.search);return o.a.createElement(N.a,Object.assign({},r,{title:J(U()),sorters:[{label:J(Q()),sorters:{createdOn:-1}},{label:J(P()),sorters:{createdOn:1}},{label:J(I()),sorters:{name:1}},{label:J(B()),sorters:{name:-1}}]}),(function(e){var t=e.data,r=void 0===t?[]:t;return o.a.createElement(N.b,{\"data-testid\":\"default-data-list\"},r.map((function(e){return o.a.createElement(N.d,{key:e.id,className:Z},o.a.createElement(N.g,{onClick:function(){d.set(\"id\",e.id),i.push({search:d.toString()})}},e.name,e.createdBy&&o.a.createElement(N.i,null,e.createdBy.firstName&&o.a.createElement(o.a.Fragment,null,J(A())({user:e.createdBy.firstName}),\" \"),J(R())({time:o.a.createElement(w.a,{datetime:e.savedOn})}))),o.a.createElement(N.f,{className:W},o.a.createElement(x.a,{use:\"subtitle2\"},p()(e.status),\" (v\",e.version,\")\"),o.a.createElement(N.c,null,o.a.createElement(y.b,{onClick:f(e)}),o.a.createElement(j.a,null,(function(t){var r=t.showConfirmation;return o.a.createElement(y.a,{onClick:function(){return r(b()(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",m(e));case 1:case\"end\":return t.stop()}}),t)}))))}})})))))})))}))},z=r(296),M=r(72),G=r(15),K=r(44),T=r(85),V=Object(G.a)(\"div\",{target:\"e1edn85r0\",label:\"EmptySelect\"})({width:\"100%\",height:\"100%\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",color:\"var(--mdc-theme-on-surface)\",\".select-form\":{maxWidth:400,padding:\"50px 100px\",textAlign:\"center\",display:\"block\",borderRadius:2,backgroundColor:\"var(--mdc-theme-surface)\"}}),X=Object(G.a)(\"div\",{target:\"e1edn85r1\",label:\"DetailsContainer\"})({height:\"calc(100% - 10px)\",overflow:\"hidden\",position:\"relative\",nav:{backgroundColor:\"var(--mdc-theme-surface)\"}}),Y=function(){return o.a.createElement(V,null,o.a.createElement(K.a,{z:2,className:\"select-form\"},\"Select a form on the left side, or click the green button to create a new one.\"))},$=function(e){var t=e.refreshForms,r=Object(k.e)(),a=r.location,n=r.history,c=Object(L.a)().showSnackbar,i=new URLSearchParams(a.search),s=i.get(\"id\");return s?o.a.createElement(z.b,{query:C.f,variables:{id:s},onCompleted:function(e){var t=E()(e,\"forms.form.error.message\");t&&(i.delete(\"id\"),n.push({search:i.toString()}),c(t))}},(function(e){var r=e.data,a=e.loading,n=E()(r,\"forms.form.data\")||null;return o.a.createElement(X,null,n&&o.a.createElement(T.b,null,Object(M.d)(\"forms-form-details-revision-content\",{refreshForms:t,form:n,loading:a},{wrapper:!1})))})):o.a.createElement(Y,null)},ee=r(39),te=r(17),re=r(80),ae=r.n(re),ne=r(35),ce=r(40),oe=r(10);function ie(){var e=f()([\"Create\"]);return ie=function(){return e},e}function se(){var e=f()([\"New form\"]);return se=function(){return e},e}var ue=D.a.namespace(\"Forms.NewFormDialog\"),le=Object(O.a)({\".mdc-dialog__surface\":{width:400,minWidth:400}},\"label:narrowDialog;\"),me=function(e){var t=e.open,r=e.onClose,a=e.formsDataList,c=o.a.useState(!1),i=n()(c,2),s=i[0],u=i[1],m=Object(L.a)().showSnackbar,f=Object(k.e)().history;return o.a.createElement(ce.a,{open:t,onClose:r,className:le,\"data-testid\":\"fb-new-form-modal\"},o.a.createElement(z.a,{mutation:C.a},(function(e){return o.a.createElement(ee.a,{onSubmit:function(){var t=b()(l.a.mark((function t(r){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.t0=ae.a,t.next=4,e({variables:r,refetchQueries:[\"FormsListForms\"],awaitRefetchQueries:!0});case 4:if(t.t1=t.sent,!(n=(0,t.t0)(t.t1,\"data.forms.form\")).error){t.next=9;break}return u(!1),t.abrupt(\"return\",m(n.error.message));case 9:return t.next=11,a.refresh();case 11:f.push(\"/forms/\"+n.data.id);case 12:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(function(e){var t=e.Bind,r=e.submit;return o.a.createElement(o.a.Fragment,null,s&&o.a.createElement(ne.a,null),o.a.createElement(ce.g,null,ue(se())),o.a.createElement(ce.f,null,o.a.createElement(t,{name:\"name\"},o.a.createElement(te.a,{placeholder:\"Enter a name for your new form\"}))),o.a.createElement(ce.c,null,o.a.createElement(oe.a,{onClick:r},\"+ \",ue(ie()))))}))})))},fe=r(227);t.default=function(){var e=o.a.useState(!1),t=n()(e,2),r=t[0],a=t[1],c=Object(fe.a)({query:C.g,variables:{sort:{savedOn:-1}}});return o.a.createElement(o.a.Fragment,null,o.a.createElement(me,{open:r,onClose:function(){return a(!1)},formsDataList:c}),o.a.createElement(i.c,null,o.a.createElement(i.a,{span:4},o.a.createElement(_,{dataList:c})),o.a.createElement(i.b,{span:8},o.a.createElement($,{refreshForms:c.refresh}))),o.a.createElement(s.a,{\"data-testid\":\"new-record-button\",onClick:function(){return a(!0)}}))}}}]);","extractedComments":[]}